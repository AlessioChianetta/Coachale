Oggetto: Implementazione "Checkpoint Semantici" Bloccanti negli Script di Vendita
Ciao! Dobbiamo implementare una singola funzionalità critica: abilitare la validazione dei Checkpoint all'interno degli script di vendita.

Attualmente l'agente gestisce "Step" e "Fasi". Dobbiamo aggiungere un livello di controllo (Quality Assurance in tempo reale) basato sui Checkpoint definiti nello script.

Ecco le specifiche dettagliate:

Logica di Validazione (AI vs Keyword)
Intelligenza Semantica: L'agente NON deve cercare semplici parole chiave. Deve usare l'LLM per comprendere se il concetto richiesto dal checkpoint è stato soddisfatto o se l'informazione è stata acquisita correttamente durante la conversazione.
Parallelismo: Questa logica deve funzionare in parallelo alla gestione attuale degli step/fasi (advanced step). Mentre gli step mandano avanti la conversazione, i checkpoint validano la qualità dei dati raccolti.

Gatekeeping (Logica Bloccante)
Regola: Il passaggio alla fase successiva è subordinato al completamento dei checkpoint obbligatori della fase corrente.
Comportamento: Se l'agente non ha raccolto informazioni sufficienti per validare un checkpoint (es. budget, decisore, timeline), NON deve avanzare alla fase successiva. Deve rimanere nel contesto attuale finché non ottiene l'informazione mancante.

Risorse e Riferimenti
Per analizzare la struttura dati attuale dei checkpoint, fai riferimento a: /client/scripts

Requisiti di Logging (Cruciale per il Debug)
Ho bisogno di visibilità totale su cosa l'AI sta validando. I log devono mostrare chiaramente lo stato di avanzamento. Format richiesto nei log:

[FASE X] - Checkpoint Totali: Y | Validati: Z | Mancanti: K Esempio: FASE 1 - Checkpoint ID 3 validato. (Progress: 1/3 fatto, ne mancano 2) Richiesta di Analisi Preliminare e Piano di Intervento
Per favore, analizza le specifiche qui sotto con estrema attenzione ai dettagli (livello di precisione "pixel-perfect").
Prima di iniziare lo sviluppo, ho bisogno che tu:
Valuti criticamente la richiesta: Identifica subito eventuali casi limite (edge cases) o conflitti logici.
Mi fornisca un piano d'azione dettagliato: Voglio capire esattamente come intendi implementare la logica e come risolverai i bug dell'interfaccia.
Mi dia garanzie tecniche: Convincimi che la soluzione proposta sia robusta e che non creerà regressioni future.
Voglio essere sicuro che siamo perfettamente allineati prima di scrivere una sola riga di codice.