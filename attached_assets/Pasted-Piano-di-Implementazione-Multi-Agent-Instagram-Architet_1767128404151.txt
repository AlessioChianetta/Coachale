Piano di Implementazione: Multi-Agent Instagram
ğŸ“Š Architettura Attuale vs Proposta
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                        ARCHITETTURA ATTUALE                                   â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â•‘
â•‘   â”‚  Consultant â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ consultant_instagram_    â”‚                       â•‘
â•‘   â”‚             â”‚   1:1   â”‚     config               â”‚                       â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â”‚ â€¢ 1 account Instagram    â”‚                       â•‘
â•‘          â”‚                â”‚ â€¢ 1 AI personality       â”‚                       â•‘
â•‘          â”‚ 1:N            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â•‘
â•‘          â”‚                          â”‚                                        â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚ (referenza)                            â•‘
â•‘   â”‚  WhatsApp       â”‚              â–¼                                        â•‘
â•‘   â”‚  Agents (N)     â”‚â”€â”€â”€â”€â–º instagramConfigId (condiviso)                    â•‘
â•‘   â”‚  â€¢ Agent 1      â”‚                                                        â•‘
â•‘   â”‚  â€¢ Agent 2      â”‚   âš ï¸ TUTTI GLI AGENTI USANO                           â•‘
â•‘   â”‚  â€¢ Agent 3      â”‚      LO STESSO INSTAGRAM                               â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                    â–¼â–¼â–¼
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                        ARCHITETTURA PROPOSTA                                  â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â•‘
â•‘   â”‚  Consultant â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ consultant_instagram_    â”‚  (DEFAULT)            â•‘
â•‘   â”‚             â”‚         â”‚     config               â”‚  Se agente non        â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â”‚ â€¢ Account fallback       â”‚  ha proprio IG        â•‘
â•‘          â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â•‘
â•‘          â”‚ 1:N                                                               â•‘
â•‘          â–¼                                                                   â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â•‘
â•‘   â”‚  WhatsApp Agents                                                 â”‚       â•‘
â•‘   â”‚                                                                  â”‚       â•‘
â•‘   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚       â•‘
â•‘   â”‚  â”‚   Agent 1    â”‚   â”‚   Agent 2    â”‚   â”‚   Agent 3    â”‚        â”‚       â•‘
â•‘   â”‚  â”‚   "Marco"    â”‚   â”‚   "Sara"     â”‚   â”‚   "Luca"     â”‚        â”‚       â•‘
â•‘   â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚       â•‘
â•‘   â”‚         â”‚                  â”‚                  â”‚                 â”‚       â•‘
â•‘   â”‚         â–¼                  â–¼                  â–¼                 â”‚       â•‘
â•‘   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚       â•‘
â•‘   â”‚  â”‚@marco_biz    â”‚   â”‚@sara_consult â”‚   â”‚  (usa default)â”‚        â”‚       â•‘
â•‘   â”‚  â”‚Instagram #1  â”‚   â”‚Instagram #2  â”‚   â”‚  consultant IGâ”‚        â”‚       â•‘
â•‘   â”‚  â”‚AI: Energico  â”‚   â”‚AI: Empatico  â”‚   â”‚               â”‚        â”‚       â•‘
â•‘   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚       â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â•‘
â•‘                                                                               â•‘
â•‘   âœ… OGNI AGENTE PUÃ’ AVERE IL PROPRIO INSTAGRAM CON AI DIVERSA              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”„ Flusso Webhook (Routing per Instagram Page ID)
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                     NUOVO FLUSSO MESSAGGI INSTAGRAM                         â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                             â•‘
â•‘   Messaggio in arrivo da Instagram                                          â•‘
â•‘            â”‚                                                                â•‘
â•‘            â–¼                                                                â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â•‘
â•‘   â”‚  Webhook Receiver  â”‚ â—„â”€â”€â”€ /api/instagram/webhook                       â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â•‘
â•‘             â”‚                                                               â•‘
â•‘             â–¼                                                               â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â•‘
â•‘   â”‚ Estrai Instagram   â”‚                                                   â•‘
â•‘   â”‚ Page ID dal msg    â”‚                                                   â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â•‘
â•‘             â”‚                                                               â•‘
â•‘             â–¼                                                               â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘   â”‚                      ROUTING PER PAGE ID                           â”‚   â•‘
â•‘   â”‚                                                                    â”‚   â•‘
â•‘   â”‚   PageID: 123456 â”€â”€â”€â”€â–º Agent "Marco" â”€â”€â”€â”€â–º AI Personality: Energicoâ”‚   â•‘
â•‘   â”‚   PageID: 789012 â”€â”€â”€â”€â–º Agent "Sara"  â”€â”€â”€â”€â–º AI Personality: Empaticoâ”‚   â•‘
â•‘   â”‚   PageID: unknown â”€â”€â”€â–º Consultant Default                          â”‚   â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘             â”‚                                                               â•‘
â•‘             â–¼                                                               â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â•‘
â•‘   â”‚ Genera risposta AI â”‚                                                   â•‘
â•‘   â”‚ con personality    â”‚                                                   â•‘
â•‘   â”‚ dell'agente        â”‚                                                   â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â•‘
â•‘                                                                             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ Piano di Implementazione in 2 Fasi
FASE 1: Fix Immediato (1-2 ore)
Sistema il pulsante "Testa Connessione" per usare la connessione reale

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FASE 1: FIX "TESTA CONNESSIONE"                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  [1.1] â”€â”€â”€â–º Trova l'ID della config Instagram attiva dal consulente        â”‚
â”‚                                                                             â”‚
â”‚  [1.2] â”€â”€â”€â–º Usa l'endpoint reale: /api/consultant/instagram/config/:id/testâ”‚
â”‚                                                                             â”‚
â”‚  [1.3] â”€â”€â”€â–º Aggiorna il wizard per chiamare l'endpoint corretto            â”‚
â”‚                                                                             â”‚
â”‚  [1.4] â”€â”€â”€â–º Mostra risultato test con username Instagram verificato        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
FASE 2: Multi-Agent Instagram (4-6 ore)
Ogni agente puÃ² avere il proprio Instagram collegato

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FASE 2A: MODIFICHE DATABASE                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  [2.1] â”€â”€â”€â–º Aggiungi nuova tabella: instagram_agent_config                 â”‚
â”‚             â€¢ whatsappAgentId (FK a consultantWhatsappConfig)              â”‚
â”‚             â€¢ instagramPageId, accessToken                                  â”‚
â”‚             â€¢ Tutte le impostazioni AI (personality, instructions, etc.)  â”‚
â”‚                                                                             â”‚
â”‚  [2.2] â”€â”€â”€â–º Aggiungi colonna a consultantWhatsappConfig:                   â”‚
â”‚             â€¢ ownInstagramConfigId (FK opzionale)                          â”‚
â”‚                                                                             â”‚
â”‚  [2.3] â”€â”€â”€â–º Migra dati esistenti:                                          â”‚
â”‚             â€¢ Crea record per ogni agente dalla config consultant          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FASE 2B: MODIFICHE BACKEND                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  [2.4] â”€â”€â”€â–º Nuovi endpoint API:                                            â”‚
â”‚             â€¢ GET/POST/PUT /api/consultant/agents/:agentId/instagram       â”‚
â”‚             â€¢ POST /api/consultant/agents/:agentId/instagram/test          â”‚
â”‚             â€¢ POST /api/consultant/agents/:agentId/instagram/connect       â”‚
â”‚                                                                             â”‚
â”‚  [2.5] â”€â”€â”€â–º Modifica OAuth flow:                                           â”‚
â”‚             â€¢ Passa agentId nel parametro state                            â”‚
â”‚             â€¢ Salva token nella tabella per-agente                         â”‚
â”‚                                                                             â”‚
â”‚  [2.6] â”€â”€â”€â–º Aggiorna webhook routing:                                      â”‚
â”‚             â€¢ Cerca config per Instagram Page ID                           â”‚
â”‚             â€¢ Carica AI personality dell'agente corretto                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FASE 2C: MODIFICHE FRONTEND                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  [2.7] â”€â”€â”€â–º Aggiungi sezione Instagram nel pannello agente:                â”‚
â”‚             â€¢ Pulsante "Collega Instagram"                                 â”‚
â”‚             â€¢ Status connessione (@username)                               â”‚
â”‚             â€¢ Impostazioni AI (personality, instructions)                  â”‚
â”‚                                                                             â”‚
â”‚  [2.8] â”€â”€â”€â–º Aggiungi tab "Instagram" nella vista conversazioni:            â”‚
â”‚             â€¢ Mostra conversazioni per agente                              â”‚
â”‚             â€¢ Badge con nome agente                                        â”‚
â”‚                                                                             â”‚
â”‚  [2.9] â”€â”€â”€â–º Aggiorna Setup Wizard:                                         â”‚
â”‚             â€¢ Mostra quali agenti hanno IG collegato                       â”‚
â”‚             â€¢ Status aggregato                                             â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ğŸ“Š Schema Database Proposto
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                          NUOVO SCHEMA RELAZIONALE                             â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘   users (consultant)                                                          â•‘
â•‘        â”‚                                                                      â•‘
â•‘        â”‚ 1:N                                                                  â•‘
â•‘        â–¼                                                                      â•‘
â•‘   consultant_whatsapp_config                                                  â•‘
â•‘   â”œâ”€â”€ id (PK)                                                                â•‘
â•‘   â”œâ”€â”€ consultantId (FK â†’ users)                                              â•‘
â•‘   â”œâ”€â”€ agentName                                                              â•‘
â•‘   â”œâ”€â”€ aiPersonality                                                          â•‘
â•‘   â”œâ”€â”€ ...                                                                    â•‘
â•‘   â””â”€â”€ ownInstagramConfigId (FK â†’ instagram_agent_config) â—„â”€â”€â”€ NUOVO!        â•‘
â•‘                â”‚                                                             â•‘
â•‘                â”‚ 1:1 (opzionale)                                             â•‘
â•‘                â–¼                                                             â•‘
â•‘   instagram_agent_config â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ NUOVA TABELLA!  â•‘
â•‘   â”œâ”€â”€ id (PK)                                                                â•‘
â•‘   â”œâ”€â”€ whatsappAgentId (FK â†’ consultant_whatsapp_config)                     â•‘
â•‘   â”œâ”€â”€ instagramPageId                                                        â•‘
â•‘   â”œâ”€â”€ facebookPageId                                                         â•‘
â•‘   â”œâ”€â”€ pageAccessToken (encrypted)                                            â•‘
â•‘   â”œâ”€â”€ instagramUsername                                                      â•‘
â•‘   â”œâ”€â”€ isConnected                                                            â•‘
â•‘   â”œâ”€â”€ aiPersonality (override)                                               â•‘
â•‘   â”œâ”€â”€ agentInstructions (override)                                           â•‘
â•‘   â”œâ”€â”€ businessName (override)                                                â•‘
â•‘   â”œâ”€â”€ bookingEnabled                                                         â•‘
â•‘   â””â”€â”€ ... (tutte le impostazioni AI)                                        â•‘
â•‘                â”‚                                                             â•‘
â•‘                â”‚ 1:N                                                         â•‘
â•‘                â–¼                                                             â•‘
â•‘   instagram_conversations                                                    â•‘
â•‘   â”œâ”€â”€ agentConfigId (FK â†’ instagram_agent_config)                           â•‘
â•‘   â””â”€â”€ ...                                                                    â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â±ï¸ Stima Tempi
Fase	Task	Tempo Stimato
1.1-1.4	Fix Testa Connessione	1-2 ore
2.1-2.3	Database schema + migrazione	1-2 ore
2.4-2.6	Backend API + OAuth + webhook	2-3 ore
2.7-2.9	Frontend UI agenti + wizard	2-3 ore
Totale		6-10 ore
