ğŸ“‹ ANALISI COMPLETA - Setup Wizard Nuove Sezioni
ğŸ” STATO ATTUALE E PROBLEMI IDENTIFICATI
La tabella consultant_onboarding_status attualmente traccia solo 7 configurazioni:

Vertex AI, SMTP, Google Calendar, Video Meeting, Lead Import, WhatsApp AI, Knowledge Base
MANCANO le seguenti sezioni richieste:

1ï¸âƒ£ Configurazione Corsi
Problema attuale: La struttura universityYears/Trimesters/Modules/Lessons esiste, ma non viene tracciata nell'onboarding.

Soluzione:

Aggiungere campo coursesCreated: boolean e coursesCount: integer alla tabella onboarding
Query per verificare: SELECT COUNT(*) FROM university_years WHERE created_by = consultantId
Status: verified se almeno 1 corso esiste
2ï¸âƒ£ Configurazione Esercizi
Problema attuale: Tabella exercises esiste con createdBy, ma non tracciata.

Soluzione:

Aggiungere campo exercisesCreated: boolean e exercisesCount: integer
Query: SELECT COUNT(*) FROM exercises WHERE created_by = consultantId
Status: verified se almeno 1 esercizio
3ï¸âƒ£ Configurazione Prima Email Riassuntiva (Appuntamenti)
Problema attuale: Le email di riepilogo consulenza sono tracciate in email_drafts con emailType = 'consultation_summary', ma non verificate nell'onboarding.

Soluzione:

Aggiungere campo firstSummaryEmailSent: boolean
Query: SELECT COUNT(*) FROM email_drafts WHERE consultant_id = X AND email_type = 'consultation_summary' AND status = 'sent'
Status: verified se almeno 1 email inviata
4ï¸âƒ£ Configurazione Primi Agenti AI WhatsApp
Problema attuale: Tabella consultantWhatsappConfig ha agentType con valori:

reactive_lead = Inbound
proactive_setter = Outbound
informative_advisor = Consulenziale
Ma non vengono tracciati separatamente nell'onboarding.

Soluzione: Aggiungere 3 campi:

hasInboundAgent: boolean
hasOutboundAgent: boolean  
hasConsultativeAgent: boolean

Query per ciascuno:

SELECT COUNT(*) FROM consultant_whatsapp_config 
WHERE consultant_id = X AND agent_type = 'reactive_lead'

5ï¸âƒ£ Configurazione Link Pubblico Agente
Problema attuale: Tabella whatsapp_agent_shares esiste per i link condivisi, ma non tracciata.

Soluzione:

Aggiungere campo hasPublicAgentLink: boolean e publicLinksCount: integer
Query: SELECT COUNT(*) FROM whatsapp_agent_shares WHERE consultant_id = X AND is_active = true
Link alla pagina: /consultant/whatsapp-agents-chat
6ï¸âƒ£ Configurazione Generazione Idee AI per WhatsApp
Problema CRITICO: Attualmente le idee sono salvate SOLO in localStorage nel frontend! Non persistenti!

Soluzione completa:

Creare nuova tabella consultant_ai_ideas:
CREATE TABLE consultant_ai_ideas (
  id VARCHAR PRIMARY KEY,
  consultant_id VARCHAR REFERENCES users(id),
  idea_name TEXT,
  idea_description TEXT,
  target_audience TEXT,
  agent_type TEXT, -- 'whatsapp' | 'public_link'
  integration_types TEXT[],
  source_type TEXT, -- 'generated' | 'template'
  created_at TIMESTAMP
);

Aggiungere all'onboarding:
hasGeneratedIdeas: boolean
generatedIdeasCount: integer

Query: SELECT COUNT(*) FROM consultant_ai_ideas WHERE consultant_id = X
ğŸ“ SCHEMA VISIVO DEL NUOVO SETUP WIZARD
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PASSI DI CONFIGURAZIONE                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… Vertex AI (Gemini)                          [Verificato] â”‚
â”‚ âœ… Email SMTP                                  [Verificato] â”‚
â”‚ âœ… Google Calendar                             [Verificato] â”‚
â”‚ âšª Video Meeting (TURN)                        [Opzionale]  â”‚
â”‚ âšª WhatsApp AI                                 [Opzionale]  â”‚
â”‚ âšª Import Lead                                 [Opzionale]  â”‚
â”‚ âšª Base di Conoscenza                          [Opzionale]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“š NUOVE SEZIONI                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“– Configurazione Corsi                        [Pending]    â”‚
â”‚    â†’ Link: /consultant/university                           â”‚
â”‚                                                             â”‚
â”‚ ğŸ“ Configurazione Esercizi                     [Pending]    â”‚
â”‚    â†’ Link: /consultant/exercises                            â”‚
â”‚                                                             â”‚
â”‚ ğŸ“§ Prima Email Riassuntiva                     [Pending]    â”‚
â”‚    â†’ Rilevata da: appuntamenti con email inviata            â”‚
â”‚    â†’ Link: /consultant/appointments                         â”‚
â”‚                                                             â”‚
â”‚ ğŸ¤– Primo Agente Inbound                        [Pending]    â”‚
â”‚    â†’ Tipo: reactive_lead                                    â”‚
â”‚    â†’ Link: /consultant/whatsapp                             â”‚
â”‚                                                             â”‚
â”‚ ğŸ“¤ Primo Agente Outbound                       [Pending]    â”‚
â”‚    â†’ Tipo: proactive_setter                                 â”‚
â”‚    â†’ Link: /consultant/whatsapp                             â”‚
â”‚                                                             â”‚
â”‚ ğŸ’¼ Primo Agente Consulenziale                  [Pending]    â”‚
â”‚    â†’ Tipo: informative_advisor                              â”‚
â”‚    â†’ Link: /consultant/whatsapp                             â”‚
â”‚                                                             â”‚
â”‚ ğŸ”— Link Pubblico Agente                        [Pending]    â”‚
â”‚    â†’ Link: /consultant/whatsapp-agents-chat                 â”‚
â”‚                                                             â”‚
â”‚ ğŸ’¡ Idee AI per Agenti                          [Pending]    â”‚
â”‚    â†’ Tab "Idee AI" in /consultant/whatsapp                  â”‚
â”‚    â†’ Persistenza: nuova tabella consultant_ai_ideas         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ› ï¸ MODIFICHE NECESSARIE
1. Database (schema.ts + migrazione)
Aggiungere 10 nuovi campi alla tabella consultant_onboarding_status
Creare nuova tabella consultant_ai_ideas
2. Backend (server/routes)
Aggiornare endpoint GET /api/consultant/onboarding/status per calcolare tutti i nuovi stati
Aggiungere logica di conteggio per ogni nuova sezione
3. Frontend (consultant-setup-wizard.tsx)
Aggiungere 8 nuove card di step nel array steps[]
Creare panel informativi per ogni nuovo step
Aggiornare interfaccia OnboardingStatus
4. Idee AI (consultant-whatsapp.tsx)
Sostituire localStorage con chiamate API
Salvare/recuperare da consultant_ai_ideas





ğŸ¯ NUOVO ORDINE SETUP WIZARD (Tutto Obbligatorio)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸš€  SETUP WIZARD - PASSI DI CONFIGURAZIONE                 â”‚
â”‚      Completa tutti i passi per attivare la piattaforma     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â•â•â•â•â•â•â• FASE 1: INFRASTRUTTURA BASE â•â•â•â•â•â•â•                â”‚
â”‚                                                              â”‚
â”‚  1.  ğŸ§   Vertex AI (Gemini)           â†’ Motore AI           â”‚
â”‚  2.  ğŸ“§  Email SMTP                   â†’ Invio email         â”‚
â”‚  3.  ğŸ“…  Google Calendar              â†’ Appuntamenti        â”‚
â”‚                                                              â”‚
â”‚  â•â•â•â•â•â•â• FASE 2: WHATSAPP & AGENTI â•â•â•â•â•â•â•                  â”‚
â”‚                                                              â”‚
â”‚  4.  ğŸ’¬  WhatsApp AI Credentials      â†’ Per tutti agenti    â”‚
â”‚  5.  ğŸ“¥  Agente Inbound               â†’ Riceve messaggi     â”‚
â”‚  6.  ğŸ“¤  Agente Outbound              â†’ Contatta proactive  â”‚
â”‚  7.  ğŸ’¼  Agente Consulenziale         â†’ Informativo         â”‚
â”‚  8.  ğŸ”—  Link Pubblico Agente         â†’ Condivisione        â”‚
â”‚  9.  ğŸ’¡  Idee AI Generate             â†’ Tab Idee AI         â”‚
â”‚                                                              â”‚
â”‚  â•â•â•â•â•â•â• FASE 3: CONTENUTI â•â•â•â•â•â•â•                          â”‚
â”‚                                                              â”‚
â”‚  10. ğŸ“–  Primo Corso                  â†’ University          â”‚
â”‚  11. ğŸ“  Primo Esercizio              â†’ Esercizi            â”‚
â”‚  12. ğŸ“š  Base di Conoscenza           â†’ Documenti AI        â”‚
â”‚                                                              â”‚
â”‚  â•â•â•â•â•â•â• FASE 4: AVANZATO â•â•â•â•â•â•â•                           â”‚
â”‚                                                              â”‚
â”‚  13. ğŸ“§  Prima Email Riassuntiva      â†’ Post-consulenza     â”‚
â”‚  14. ğŸ¥  Video Meeting (TURN)         â†’ Videochiamate       â”‚
â”‚  15. ğŸ“¥  Import Lead                  â†’ CRM esterni         â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Design piÃ¹ carino in stile Wizard:
Progress bar con percentuale completamento
Fasi colorate (Verde = completata, Blu = attiva, Grigio = bloccata)
Animazioni fluide tra step
Checkmark animato quando completi uno step
Badge numerato per ogni step
Sidebar condensata con mini-icone