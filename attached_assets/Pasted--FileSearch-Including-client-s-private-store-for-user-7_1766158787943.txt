ğŸ” [FileSearch] Including client's private store for user 7e40b56c-2cc8-4515-b843-dc105e478f38
ğŸ” [FileSearch] getStoreNamesForGeneration - Role: client, UserId: 7e40b56c-2cc8-4515-b843-dc105e478f38, ConsultantId: 0c73bbe5-51e1-4108-866b-6be7a52fce3b
   ğŸ“¦ Found 2 unique stores: Private Store - Client 7e40b56c, Knowledge Base Consulente

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ” FILE SEARCH MODE: Switching to Google AI Studio (required for File Search)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ğŸ“¦ Provider: Google AI Studio (@google/genai)
   âœ… File Search API: SUPPORTED
   âš ï¸  Vertex AI: NOT compatible with File Search
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Using GEMINI_API_KEY from environment for File Search
ğŸ”„ Building context for client 7e40b56c-2cc8-4515-b843-dc105e478f38 (intent: general, sessionType: normal)
ğŸ“š Including ALL 87 exercises in context (no limits applied)
ğŸ“š Prepared 87 exercise metadata (content will be loaded on-demand when asked)
ğŸ“š Found 81 documents linked to exercises
ğŸ“š Total library documents included in context: 5 (intent: general)
ğŸ¦ Fetching finance data for giusy.dattilo@gmail.com
[PercorsoCapitale] Client initialized for user: gi***@gmail.com
[PercorsoCapitale] req-1 Cache MISS for dashboard (user: gi***@gmail.com), fetching from API... (stats: 0/1 hits)
[PercorsoCapitale] req-2 Cache MISS for categoryBudgets (user: gi***@gmail.com), fetching from API... (stats: 0/2 hits)
[PercorsoCapitale] req-3 Cache MISS for transactions (user: gi***@gmail.com), fetching from API... (stats: 0/3 hits)
[PercorsoCapitale] req-4 Cache MISS for accountArchitecture (user: gi***@gmail.com), fetching from API... (stats: 0/4 hits)
[PercorsoCapitale] req-5 Cache MISS for budgetSettings (user: gi***@gmail.com), fetching from API... (stats: 0/5 hits)
[PercorsoCapitale] req-6 Cache MISS for investments (user: gi***@gmail.com), fetching from API... (stats: 0/6 hits)
[PercorsoCapitale] req-7 Cache MISS for goals (user: gi***@gmail.com), fetching from API... (stats: 0/7 hits)
[PercorsoCapitale] req-5 Cached budgetSettings for 86400s (895ms response time)
[PercorsoCapitale] req-6 Cached investments for 86400s (899ms response time)
[PercorsoCapitale] req-2 Cached categoryBudgets for 86400s (906ms response time)
[PercorsoCapitale] req-7 Cached goals for 86400s (1396ms response time)
[PercorsoCapitale] req-3 Cached transactions for 86400s (1386ms response time)
[PercorsoCapitale] req-4 Cached accountArchitecture for 86400s (1514ms response time)
[PercorsoCapitale] req-1 Cached dashboard for 86400s (1534ms response time)
ğŸ“Š [ProcessBudgets] Month 2025-12: Found 27 expense transactions
ğŸ“Š [ProcessBudgets] Month 2025-12: Found 27 expense transactions
ğŸ“Š [ProcessBudgets] Month 2025-11: Found 42 expense transactions
ğŸ“Š [ProcessBudgets] Month 2025-10: Found 27 expense transactions
ğŸ“Š [MultiMonth] Analyzing 175 transactions
ğŸ“… [MultiMonth] Date range: 2025-08-08 â†’ 2026-01-02
ğŸ“… [MultiMonth] Target months: 2025-07, 2025-08, 2025-09, 2025-10, 2025-11, 2025-12
ğŸ” [FilterTransactions] Filtering for month 2025-07:
   - Total transactions before filter: 175
   - Transactions after type filter: 175
   - Transactions matching month: 0
ğŸ“Š [ProcessBudgets] Month 2025-07: Found 0 expense transactions
ğŸ” [FilterTransactions] Filtering for month 2025-08:
   - Total transactions before filter: 175
   - Transactions after type filter: 175
   - Transactions matching month: 4
   - Date range: 2025-08-27 â†’ 2025-08-08
ğŸ“Š [ProcessBudgets] Month 2025-08: Found 3 expense transactions
ğŸ” [FilterTransactions] Filtering for month 2025-09:
   - Total transactions before filter: 175
   - Transactions after type filter: 175
   - Transactions matching month: 43
   - Date range: 2025-09-29 â†’ 2025-09-02
ğŸ“Š [ProcessBudgets] Month 2025-09: Found 33 expense transactions
ğŸ” [FilterTransactions] Filtering for month 2025-10:
   - Total transactions before filter: 175
   - Transactions after type filter: 175
   - Transactions matching month: 43
   - Date range: 2025-10-31 â†’ 2025-10-01
ğŸ“Š [ProcessBudgets] Month 2025-10: Found 27 expense transactions
ğŸ” [FilterTransactions] Filtering for month 2025-11:
   - Total transactions before filter: 175
   - Transactions after type filter: 175
   - Transactions matching month: 53
   - Date range: 2025-11-29 â†’ 2025-11-01
ğŸ“Š [ProcessBudgets] Month 2025-11: Found 42 expense transactions
ğŸ” [FilterTransactions] Filtering for month 2025-12:
   - Total transactions before filter: 175
   - Transactions after type filter: 175
   - Transactions matching month: 31
   - Date range: 2025-12-18 â†’ 2025-12-01
ğŸ“Š [ProcessBudgets] Month 2025-12: Found 27 expense transactions
âœ… Finance data fetched and transformed successfully (5 accounts, 8 budgets, 10 transactions)
ğŸ“Š Momentum stats: 14 check-ins (14 productive, 100% rate), streak: 0 days
ğŸ“… Calendar stats: 0 total upcoming (0 ongoing, 0 today, 0 this week)
ğŸ“š [Knowledge Base] Loading ALL knowledge content for client (no filtering)...
ğŸ“š [Client Knowledge Base] Loaded 0 documents and 0 APIs for client 7e40b56c-2cc8-4515-b843-dc105e478f38
â„¹ï¸ [Knowledge Base] No documents or API data uploaded yet
ğŸ’¾ Stored fresh context in cache for client 7e40b56c-2cc8-4515-b843-dc105e478f38 (intent: general)
â±ï¸  [TIMING] Context building: 4125ms
ğŸ” [FileSearch] Exercises indexed check: 10/10 checked, using FileSearch: true
â±ï¸  [TIMING] Exercise scraping: 1017ms
â±ï¸  [TIMING] Prompt building: 11ms

ğŸ“Š Token Usage Estimation (Intent: general):
  - System Prompt: ~13,503 tokens
  - User Message: ~48 tokens
  - Conversation History: ~0 tokens
  - Total Estimated: ~13,551 tokens
  - File Search Mode: âœ… ACTIVE (exercises/consultations via RAG)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š SYSTEM PROMPT BREAKDOWN (~13,503 tokens)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ’° Finance Data: 13,285 tokens (98.4%)
ğŸ“š Exercises: 93,881 tokens (695.3%)
ğŸ“– Library Docs: 1,573 tokens (11.6%)
ğŸ’¬ Consultations: 41,700 tokens (308.8%)
ğŸ¯ Goals & Tasks: 12 tokens (0.1%)
âš¡ Momentum & Calendar: 17 tokens (0.1%)
ğŸ—ºï¸  Roadmap: 2,458 tokens (18.2%)
ğŸ“š Knowledge Base: 41 tokens (0.3%)
ğŸ‘¤ User Profile & Base: 5,055 tokens (37.4%)

ğŸ“ UNIVERSITY: 10,102 tokens (74.8%)
   â””â”€ Overall Progress: 17 tokens
   â””â”€ ğŸ“… Anno 1 â€“ Metodo Turbo: 912 tokens
      â””â”€ Q1 â€“ Le Fondamenta della Tua AttivitÃ : 88 tokens (1 moduli, 3 lezioni)
      â””â”€ Q2 â€“ Metodo Turbo: Diventa Invincibile a Vendere: 615 tokens (8 moduli, 28 lezioni)
   â””â”€ ğŸ“… Anno 1 - Metodo Orbitale - Da 0 a 1.000.000 : 757 tokens
      â””â”€ Q1 - Le Fondamenta: 83 tokens (1 moduli, 13 lezioni)
      â””â”€ Q2 - Costruzione della Ricchezza: 86 tokens (1 moduli, 13 lezioni)
      â””â”€ Q3 - Ottimizzazione e Vita da Comandante: 88 tokens (1 moduli, 14 lezioni)
      â””â”€ Q4 - EreditÃ  e Comando Perpetuo: 86 tokens (1 moduli, 13 lezioni)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ” AI MODE: FILE SEARCH SEMANTIC (Gemini RAG) [CLIENT]
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ğŸ“¦ Stores disponibili: 2
      1. fileSearchStores/private-store-client-7e40b5-g2rbtd1xrc4n
      2. fileSearchStores/knowledge-base-consulente-juw371zchi3s
   âœ… Tool fileSearch: ATTIVO
   ğŸ“„ Il modello cercherÃ  semanticamente nei documenti indicizzati
   ğŸ’° RISPARMIO TOKENS: ~137,195 tokens (esercizi+library+consultazioni+KB)
   ğŸ“‰ System prompt ridotto: da ~150,698 a ~13,503 tokens
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
