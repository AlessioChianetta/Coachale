Ho analizzato a fondo tutto il codice esistente. Ora ho il quadro completo!

ğŸš€ PIANO COMPLETO: Script Builder CMS
ğŸ“Š Architettura Attuale
Componente	Descrizione
salesScripts table	Script con content, structure, energySettings, ladderOverrides
agentScriptAssignments	Collega script ad agenti (1 per tipo)
Block Types	Phase â†’ Step â†’ Question + GlobalRule, Energy, Biscottino, Checkpoint, Ladder
BlockEditor.tsx	Visualizza blocchi (sola lettura)
client-script-manager.tsx	Gestione script con tabs Discovery/Demo/Objections
ğŸ¯ Nuovo Modulo: Script Builder
Layout Proposto
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ModalitÃ : Manual â–¼]  [Template â–¼]  [AI-Assisted â–¼]            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             â”‚                                                   â”‚
â”‚  ğŸ“¦ PALETTE â”‚              ğŸ“ CANVAS BUILDER                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚                                                   â”‚
â”‚  ğŸ“ Fase    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  ğŸ¯ Step    â”‚   â”‚  ğŸ”’ SEZIONE INIZIALE (obbligatoria)     â”‚    â”‚
â”‚  ğŸ“Œ Domanda â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  âš¡ Energy  â”‚                                                   â”‚
â”‚  ğŸªœ Ladder  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  ğŸª Biscot. â”‚   â”‚  ğŸ“ FASE 1 - Apertura                   â”‚    â”‚
â”‚  â›” Checkpt â”‚   â”‚    â””â”€â”€ ğŸ¯ Step 1                        â”‚    â”‚
â”‚  ğŸš¨ Regola  â”‚   â”‚          â””â”€â”€ ğŸ“Œ Domanda "Come stai?"    â”‚    â”‚
â”‚             â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚                                                   â”‚
â”‚  [Drag me!] â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚             â”‚   â”‚  ğŸ”’ SEZIONE FINALE (obbligatoria)       â”‚    â”‚
â”‚             â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ”§ Le 3 ModalitÃ 
ModalitÃ  1: MANUALE
Canvas parte con Initial Section e Final Section bloccate (non cancellabili)
Sidebar con tutti i blocchi disponibili
Drag & Drop per inserire blocchi tra le sezioni
Editing inline di ogni blocco
ModalitÃ  2: DA TEMPLATE
Selezione template esistente (es. sales-script-base discovery)
Template viene convertito in blocchi editabili
Utente puÃ² modificare, aggiungere, rimuovere blocchi
Mantiene struttura base ma personalizzabile
ModalitÃ  3: AI-ASSISTED
Seleziona Template Base â†’ quale script usare come partenza
Seleziona Agente Target â†’ dropdown con agenti configurati
Aggiungi Commento â†’ istruzioni custom per l'AI
Genera â†’ Gemini 3.0 Pro adatta le domande per l'agente specifico
Prende configurazione agente (businessName, target, offering)
Modifica solo le DOMANDE per essere piÃ¹ pertinenti
Restituisce script a blocchi editabile
ğŸ“ Struttura File
client/src/pages/
â””â”€â”€ script-builder/
    â”œâ”€â”€ index.tsx                 # Pagina principale
    â””â”€â”€ components/
        â”œâ”€â”€ BlockPalette.tsx      # Sidebar blocchi trascinabili
        â”œâ”€â”€ BuilderCanvas.tsx     # Canvas drag & drop
        â”œâ”€â”€ ModeSelector.tsx      # Tabs modalitÃ 
        â”œâ”€â”€ TemplatePicker.tsx    # Dialog selezione template
        â”œâ”€â”€ AIAssistantDialog.tsx # Dialog AI (agente + commento)
        â””â”€â”€ DraggableBlock.tsx    # Blocco trascinabile generico
server/routes/
â””â”€â”€ script-builder.ts             # API per template + AI generation

ğŸ”Œ Integrazione
Nuova Tab "Builder" nella pagina /client/scripts esistente
Script creati appaiono nelle tabs Discovery/Demo/Obiezioni
Stessa logica attivazione/disattivazione per agenti
Salvataggio con stessa struttura DB (salesScripts table)