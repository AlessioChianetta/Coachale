â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ” FILE SEARCH MODE: Switching to Google AI Studio (required for File Search)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ğŸ“¦ Provider: Google AI Studio (@google/genai)
   âœ… File Search API: SUPPORTED
   âš ï¸  Vertex AI: NOT compatible with File Search
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… [SuperAdmin Gemini] Loaded 1 API keys from config
âœ… Using SuperAdmin Gemini key for File Search (1/1)
âœ… Using cached context for client 7e40b56c-2cc8-4515-b843-dc105e478f38 (intent: general, sessionType: normal, age: 107s)
â±ï¸  [TIMING] Context building: 2ms
ğŸ”” [EXERCISE CACHE] Modification hint detected in message
ğŸ” [FileSearch] Exercises indexed check: 10/10 checked, using FileSearch: true
â±ï¸  [TIMING] Exercise scraping: 1005ms
â±ï¸  [TIMING] Prompt building: 8ms

ğŸ“Š Token Usage Estimation (Intent: general):
  - System Prompt: ~4,106 tokens
  - User Message: ~15 tokens
  - Conversation History: ~2,165 tokens
  - Total Estimated: ~6,286 tokens
  - File Search Mode: âœ… ACTIVE (RAG via stores)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š SYSTEM PROMPT BREAKDOWN (~4,106 tokens)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ NEL SYSTEM PROMPT (4,106 tokens):
   ğŸ’° Finance Data: 14,244 tokens
   ğŸ¯ Goals & Tasks: 12 tokens
   âš¡ Momentum & Calendar: 67 tokens
   ğŸ‘¤ User Profile & Base: 5,055 tokens

ğŸ” VIA FILE SEARCH RAG (non nel prompt, cercati su richiesta):
   ğŸ“š Exercises: 94,852 tokens â†’ via RAG
   ğŸ“– Library Docs: 1,573 tokens â†’ via RAG
   ğŸ’¬ Consultations: 46,363 tokens â†’ via RAG
   ğŸ“š Knowledge Base: 41 tokens â†’ via RAG
   ğŸ“ University: 10,102 tokens â†’ via RAG

   ğŸ’° RISPARMIO: ~152,931 tokens spostati su File Search

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ” AI MODE: FILE SEARCH SEMANTIC (Gemini RAG) [CLIENT]
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ğŸ“¦ Stores disponibili: 1
      1. fileSearchStores/private-store-client-7e40b5-g2rbtd1xrc4n

   ğŸ“Š BREAKDOWN DOCUMENTI PER STORE:

   ğŸ‘¥ Private Store - Client 7e40b56c (2 documenti):
      ğŸ‹ï¸ Esercizi: 2
   âœ… Tool fileSearch: ATTIVO
   ğŸ“„ Il modello cercherÃ  semanticamente nei documenti indicizzati
   ğŸ’° RISPARMIO TOKENS: ~142,829 tokens (esercizi+library+consultazioni+KB)
   ğŸ“‰ System prompt ridotto: da ~146,935 a ~4,106 tokens
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•