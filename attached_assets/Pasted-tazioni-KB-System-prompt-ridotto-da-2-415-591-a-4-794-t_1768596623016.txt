tazioni+KB)
   ğŸ“‰ System prompt ridotto: da ~2,415,591 a ~4,794 tokens
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[AI] Using model: gemini-3-pro-preview with thinking_level: high [CLIENT STREAMING]
[AI] Provider: Google AI Studio, User-selected: YES
ğŸ› ï¸  [TOOLS] Client chat: codeExecution=YES, fileSearch=YES

ğŸ§® [CALC INTENT] Detected calculation request
   ğŸ“… Has date filter: true
   ğŸ—“ï¸  Suggested filter: dicembre
ğŸ“Š [TABULAR DATA] Found 4 tabular document(s) for Code Execution
ğŸ“Š [CODE EXEC] Prepared "archivio_-_estratto_orbitale.csv": 23 rows, 1.5KB (cumulative: 1.5KB)
ğŸ“Š [CODE EXEC] Prepared "archivio_-_estratto_orbitale.csv": 67245 rows, 4202.1KB (cumulative: 4203.6KB)
ğŸ“Š [CODE EXEC] Prepared "archivio_-_estratto_orbitale.csv": 316 rows, 6.0KB (cumulative: 4209.6KB)
ğŸ“Š [CODE EXEC] Prepared "archivio_-_estratto_orbitale.csv": 681 rows, 76.6KB (cumulative: 4286.2KB)
ğŸ“¦ [CODE EXEC] Total payload: 4.19MB across 4 file(s)
ğŸ“¦ [INLINE DATA] Prepared 4 CSV file(s) for Code Execution:
   ğŸ“„ archivio_-_estratto_orbitale.csv: 22 rows, 29 columns
   ğŸ“„ archivio_-_estratto_orbitale.csv: 67244 rows, 27 columns
   ğŸ“„ archivio_-_estratto_orbitale.csv: 315 rows, 7 columns
   ğŸ“„ archivio_-_estratto_orbitale.csv: 674 rows, 76 columns
ğŸ”„ AI stream attempt 1/6...
âŒ AI streaming error on attempt 1: {"error":{"message":"{\n  \"error\": {\n    \"code\": 429,\n    \"message\": \"You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. \\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_paid_tier_input_token_count, limit: 1000000, model: gemini-3-pro\\nPlease retry in 48.7835309s.\",\n    \"status\": \"RESOURCE_EXHAUSTED\",\n    \"details\": [\n      {\n        \"@type\": \"type.googleapis.com/google.rpc.Help\",\n        \"links\": [\n          {\n            \"description\": \"Learn more about Gemini API quotas\",\n            \"url\": \"https://ai.google.dev/gemini-api/docs/rate-limits\"\n          }\n        ]\n      },\n      {\n        \"@type\": \"type.googleapis.com/google.rpc.QuotaFailure\",\n        \"violations\": [\n          {\n            \"quotaMetric\": \"generativelanguage.googleapis.com/generate_content_paid_tier_input_token_count\",\n            \"quotaId\": \"GenerateContentPaidTierInputTokensPerModelPerMinute\",\n            \"quotaDimensions\": {\n              \"location\": \"global\",\n              \"model\": \"gemini-3-pro\"\n            },\n            \"quotaValue\": \"1000000\"\n          }\n        ]\n      },\n      {\n        \"@type\": \"type.googleapis.com/google.rpc.RetryInfo\",\n        \"retryDelay\": \"48s\"\n      }\n    ]\n  }\n}\n","code":429,"status":"Too Many Requests"}}
âŒ Errore nel processing AI streaming: ApiError: {"error":{"message":"{\n  \"error\": {\n    \"code\": 429,\n    \"message\": \"You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. \\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_paid_tier_input_token_count, limit: 1000000, model: gemini-3-pro\\nPlease retry in 48.7835309s.\",\n    \"status\": \"RESOURCE_EXHAUSTED\",\n    \"details\": [\n      {\n        \"@type\": \"type.googleapis.com/google.rpc.Help\",\n        \"links\": [\n          {\n            \"description\": \"Learn more about Gemini API quotas\",\n            \"url\": \"https://ai.google.dev/gemini-api/docs/rate-limits\"\n          }\n        ]\n      },\n      {\n        \"@type\": \"type.googleapis.com/google.rpc.QuotaFailure\",\n        \"violations\": [\n          {\n            \"quotaMetric\": \"generativelanguage.googleapis.com/generate_content_paid_tier_input_token_count\",\n            \"quotaId\": \"GenerateContentPaidTierInputTokensPerModelPerMinute\",\n            \"quotaDimensions\": {\n              \"location\": \"global\",\n              \"model\": \"gemini-3-pro\"\n            },\n            \"quotaValue\": \"1000000\"\n          }\n        ]\n      },\n      {\n        \"@type\": \"type.googleapis.com/google.rpc.RetryInfo\",\n        \"retryDelay\": \"48s\"\n      }\n    ]\n  }\n}\n","code":429,"status":"Too Many Requests"}}
    at throwErrorIfNotOK (/home/runner/workspace/node_modules/@google/genai/src/_api_client.ts:860:24)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async <anonymous> (/home/runner/workspace/node_modules/@google/genai/src/_api_client.ts:515:9)
    at async Models.Models.generateContentStream (/home/runner/workspace/node_modules/@google/genai/src/models.ts:201:14)
    at async GeminiClientAdapter.generateContentStream (/home/runner/workspace/server/ai/provider-factory.ts:363:29)
    at async streamWithBackoff (/home/runner/workspace/server/ai/retry-manager.ts:338:30)
    at async streamWithRetriesAdapter (/home/runner/workspace/server/ai-service.ts:130:20)
    at async Module.sendChatMessageStream (/home/runner/workspace/server/ai-service.ts:2293:22)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:10610:26) {
  status: 429
}
8:50:11 PM [express] POST /api/ai/chat 200 in 11519ms
8:50:12 PM [express] GET /api/ai/conversations 200 in 341ms :: [{"id":"67e963be-42e1-497d-9e6d-d4cc0â€¦
8:50:13 PM [express] GET /api/ai/conversations/67e963be-42e1-497d-9e6d-d4cc0555bd93 200 in 1302ms ::â€¦