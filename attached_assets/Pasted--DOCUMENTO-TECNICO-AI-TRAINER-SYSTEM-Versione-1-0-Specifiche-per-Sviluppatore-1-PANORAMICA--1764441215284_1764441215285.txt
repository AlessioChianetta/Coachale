ðŸ“‹ DOCUMENTO TECNICO: AI TRAINER SYSTEM
Versione 1.0 - Specifiche per Sviluppatore
1. ðŸŽ¯ PANORAMICA DEL SISTEMA
Obiettivo
Creare un sistema di testing automatico degli script di vendita dove un'AI simula diversi tipi di prospect (clienti potenziali) per testare le performance del Sales Agent senza intervento umano.

Principio Fondamentale
âš ï¸ CRITICO: L'AI Prospect deve usare ESATTAMENTE le stesse API, WebSocket e flussi esistenti. Come se fosse un utente reale che clicca sul link, compila i dati e inizia a parlare. NESSUN sistema parallelo.

2. ðŸ—ï¸ ARCHITETTURA DEL SISTEMA
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ARCHITETTURA AI TRAINER                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   ðŸ‘¤ UTENTE (Client)  â”‚
                            â”‚   Browser React App   â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              FRONTEND (React)                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ðŸ“± AI TRAINER TAB (nuovo)                                               â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ PersonaSelector (10+ personalitÃ )                                   â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ ScriptSelector (dropdown scripts esistenti)                         â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ PreviewPanel (anteprima messaggio iniziale)                         â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ StartTrainingButton (avvia sessione)                                â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ ActiveTrainersGrid (sessioni in corso)                              â”‚  â”‚
â”‚  â”‚  â””â”€â”€ ObserveModal (visualizza conversazione live)                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â”‚ HTTP REST API
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              BACKEND (Express)                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ðŸ“¡ NUOVE ROUTES (/api/training/*)                                       â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ POST /api/training/start-session                                    â”‚  â”‚
â”‚  â”‚  â”‚     â†’ Crea sessione, genera dati prospect, avvia simulator            â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ GET  /api/training/active-sessions                                  â”‚  â”‚
â”‚  â”‚  â”‚     â†’ Lista sessioni in corso                                         â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ POST /api/training/stop-session/:id                                 â”‚  â”‚
â”‚  â”‚  â”‚     â†’ Ferma una sessione                                              â”‚  â”‚
â”‚  â”‚  â””â”€â”€ GET  /api/training/session/:id/transcript                           â”‚  â”‚
â”‚  â”‚          â†’ Ottieni transcript live                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ðŸ¤– PROSPECT SIMULATOR SERVICE (nuovo)                                   â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ ProspectPersonaRegistry (10+ personalitÃ  con prompt)                â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ ProspectSimulatorClient (client WebSocket automatico)               â”‚  â”‚
â”‚  â”‚  â””â”€â”€ ProspectResponseGenerator (usa Gemini per risposte)                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â”‚ WebSocket (STESSO ESISTENTE!)
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GEMINI LIVE WS SERVICE (esistente)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ðŸ”Œ WebSocket Server (giÃ  implementato)                                  â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ Mode: sales_agent âœ“ (giÃ  esiste)                                   â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ Mode: consultation_invite âœ“ (giÃ  esiste)                           â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ Mode: ai_training â† NUOVO (aggiungere)                             â”‚  â”‚
â”‚  â”‚  â”‚         â””â”€â”€ Stesso flusso, ma:                                        â”‚  â”‚
â”‚  â”‚  â”‚             â€¢ Salta lobby/test microfono                              â”‚  â”‚
â”‚  â”‚  â”‚             â€¢ Accetta testo invece di audio                           â”‚  â”‚
â”‚  â”‚  â”‚             â€¢ Prospect dati pre-compilati                             â”‚  â”‚
â”‚  â”‚  â””â”€â”€ Tracking, Autosave, Analytics â†’ RIUSATI IDENTICI                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           DATABASE (PostgreSQL)                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ðŸ“Š TABELLE ESISTENTI (riusate)                                          â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ sales_conversation_training (tracking conversazioni)                â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ ai_conversations (storico conversazioni)                            â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ ai_messages (messaggi)                                              â”‚  â”‚
â”‚  â”‚  â””â”€â”€ client_sales_agents (agenti)                                        â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  ðŸ“Š NUOVA TABELLA                                                        â”‚  â”‚
â”‚  â”‚  â””â”€â”€ ai_training_sessions                                                â”‚  â”‚
â”‚  â”‚      â”œâ”€â”€ id (UUID)                                                       â”‚  â”‚
â”‚  â”‚      â”œâ”€â”€ agent_id (FK)                                                   â”‚  â”‚
â”‚  â”‚      â”œâ”€â”€ script_id (FK)                                                  â”‚  â”‚
â”‚  â”‚      â”œâ”€â”€ persona_id (string)                                             â”‚  â”‚
â”‚  â”‚      â”œâ”€â”€ status (running|completed|stopped)                              â”‚  â”‚
â”‚  â”‚      â”œâ”€â”€ conversation_id (FK â†’ ai_conversations)                         â”‚  â”‚
â”‚  â”‚      â”œâ”€â”€ started_at, ended_at                                            â”‚  â”‚
â”‚  â”‚      â””â”€â”€ result_score, result_notes                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. ðŸ”„ FLUSSO OPERATIVO DETTAGLIATO
Confronto: Flusso Manuale vs Flusso AI Trainer
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FLUSSO MANUALE (Prospect Reale)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ðŸ‘¤ Utente                    ðŸŒ Sistema                      ðŸ¤– Sales Agent
     â”‚                              â”‚                                â”‚
     â”‚  1. Crea link share          â”‚                                â”‚
     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>                                â”‚
     â”‚                              â”‚                                â”‚
     â”‚  2. Link generato            â”‚                                â”‚
     â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                â”‚
     â”‚                              â”‚                                â”‚
     â”‚  3. Prospect clicca link     â”‚                                â”‚
     â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>                                â”‚
     â”‚         â”‚                    â”‚                                â”‚
     â”‚         â”‚  4. Mostra Lobby   â”‚                                â”‚
     â”‚         â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                â”‚
     â”‚         â”‚                    â”‚                                â”‚
     â”‚         â”‚  5. Compila form   â”‚                                â”‚
     â”‚         â”‚    (nome, email)   â”‚                                â”‚
     â”‚         â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                                â”‚
     â”‚         â”‚                    â”‚                                â”‚
     â”‚         â”‚  6. Test microfono â”‚                                â”‚
     â”‚         â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                                â”‚
     â”‚         â”‚                    â”‚                                â”‚
     â”‚         â”‚  7. Entra in chat  â”‚                                â”‚
     â”‚         â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  8. WebSocket connect          â”‚
     â”‚         â”‚                    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚         â”‚                    â”‚                                â”‚
     â”‚         â”‚  9. Parla          â”‚  10. Audio to Sales Agent      â”‚
     â”‚         â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚         â”‚                    â”‚                                â”‚
     â”‚         â”‚                    â”‚  11. Sales Agent risponde      â”‚
     â”‚         â”‚  12. Riceve audio  â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚         â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                â”‚
     â”‚         â”‚                    â”‚                                â”‚
     â”‚         â”‚     [LOOP conversazione...]                         â”‚
     â”‚         â”‚                    â”‚                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FLUSSO AI TRAINER (Automatico)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ðŸ‘¤ Utente                    ðŸŒ Sistema                      ðŸ¤– Sales Agent
     â”‚                              â”‚                                â”‚
     â”‚  1. Seleziona Script         â”‚                                â”‚
     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>                                â”‚
     â”‚                              â”‚                                â”‚
     â”‚  2. Seleziona PersonalitÃ     â”‚                                â”‚
     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>                                â”‚
     â”‚                              â”‚                                â”‚
     â”‚  3. Clicca "AVVIA TRAINING"  â”‚                                â”‚
     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>                                â”‚
     â”‚                              â”‚                                â”‚
     â”‚                              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
     â”‚                              â”‚  â”‚ 4. SISTEMA FA TUTTO:     â”‚  â”‚
     â”‚                              â”‚  â”‚    a) Genera link share  â”‚  â”‚
     â”‚                              â”‚  â”‚    b) Crea dati prospect â”‚  â”‚
     â”‚                              â”‚  â”‚       (nome, email da    â”‚  â”‚
     â”‚                              â”‚  â”‚        personalitÃ )      â”‚  â”‚
     â”‚                              â”‚  â”‚    c) SALTA Lobby        â”‚  â”‚
     â”‚                              â”‚  â”‚    d) SALTA test mic     â”‚  â”‚
     â”‚                              â”‚  â”‚    e) Connette WebSocket â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                              â”‚  â”‚       (STESSO esistente!)â”‚           â”‚
     â”‚                              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
     â”‚                              â”‚                                         â”‚
     â”‚  5. Vede "Training Attivo"   â”‚  6. AI Prospect invia messaggio        â”‚
     â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                              â”‚                                         â”‚
     â”‚                              â”‚  7. Sales Agent risponde                â”‚
     â”‚                              â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                              â”‚                                         â”‚
     â”‚                              â”‚  8. AI Prospect "legge" risposta       â”‚
     â”‚                              â”‚     e genera nuova domanda/risposta    â”‚
     â”‚                              â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                              â”‚                                         â”‚
     â”‚  [PuÃ² OSSERVARE in tempo reale]    [LOOP automatico...]               â”‚
     â”‚                              â”‚                                         â”‚
     â”‚  9. Training completato      â”‚                                         â”‚
     â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                         â”‚
     â”‚                              â”‚                                         â”‚
     â”‚  10. Vede risultati/analyticsâ”‚                                         â”‚
     â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                         â”‚

4. ðŸ‘¥ REGISTRY DELLE 10 PERSONALITÃ€ PROSPECT
// File: shared/prospect-personas.ts
export interface ProspectPersona {
  id: string;
  name: string;
  emoji: string;
  description: string;
  characteristics: string[];
  typicalObjections: string[];
  communicationStyle: string;
  goal: string;
  systemPrompt: string;
  sampleOpeningMessage: string;
}
export const PROSPECT_PERSONAS: ProspectPersona[] = [
  {
    id: 'skeptic',
    name: 'Scettico',
    emoji: 'ðŸ¤¨',
    description: 'Non si fida facilmente, cerca prove concrete',
    characteristics: [
      'Fa domande insidiose',
      'Richiede prove e referenze',
      'Dubita delle promesse',
      'Ha avuto brutte esperienze passate'
    ],
    typicalObjections: [
      'Come faccio a fidarmi?',
      'Avete delle referenze verificabili?',
      'PerchÃ© dovrebbe funzionare per me?',
      'Ho giÃ  provato soluzioni simili...'
    ],
    communicationStyle: 'Diretto, interrogativo, cerca incongruenze',
    goal: 'Mettere alla prova la credibilitÃ  del venditore',
    systemPrompt: `Sei un prospect SCETTICO. Non ti fidi facilmente delle promesse commerciali. 
    Fai domande provocatorie, chiedi prove concrete, referenze verificabili. 
    Esprimi dubbi su tutto. Hai avuto brutte esperienze con venditori in passato.
    Non essere maleducato, ma sii diffidente e richiedi sempre conferme.`,
    sampleOpeningMessage: 'Buongiorno, ho ricevuto la vostra email. Devo essere sincero, sono piuttosto scettico perchÃ© ho giÃ  provato soluzioni simili senza grandi risultati. Convincetemi.'
  },
  {
    id: 'enthusiast',
    name: 'Entusiasta',
    emoji: 'ðŸ˜Š',
    description: 'Interessato e positivo, ma va guidato',
    characteristics: [
      'Fa molte domande',
      'Ãˆ genuinamente interessato',
      'Vuole capire i dettagli',
      'Tende a divagare'
    ],
    typicalObjections: [
      'Fantastico! Ma come funziona esattamente?',
      'Wow, e questo si integra con...?',
      'Interessante! Posso vedere una demo?'
    ],
    communicationStyle: 'Positivo, curioso, collaborativo',
    goal: 'Capire se il prodotto fa al caso suo',
    systemPrompt: `Sei un prospect ENTUSIASTA. Sei genuinamente interessato al prodotto/servizio.
    Fai molte domande per capire meglio. Sei positivo ma vuoi essere sicuro che sia adatto a te.
    A volte divaghi un po'. Mostra entusiasmo ma chiedi dettagli concreti.`,
    sampleOpeningMessage: 'Ciao! Ho visto il vostro prodotto e mi sembra molto interessante! Potete spiegarmi meglio come funziona? Sono curioso di sapere tutto!'
  },
  {
    id: 'indecisive',
    name: 'Indeciso',
    emoji: 'ðŸ¤”',
    description: 'Tentenna, ha paura di sbagliare',
    characteristics: [
      'Chiede tempo per riflettere',
      'Ha paura di prendere decisioni sbagliate',
      'Vuole consultare altri',
      'Rimanda continuamente'
    ],
    typicalObjections: [
      'Devo pensarci...',
      'Devo parlarne con il mio socio/team',
      'Non sono sicuro sia il momento giusto',
      'E se poi non funziona?'
    ],
    communicationStyle: 'Esitante, cerca rassicurazioni, evita impegni',
    goal: 'Evitare di prendere una decisione sbagliata',
    systemPrompt: `Sei un prospect INDECISO. Hai paura di prendere decisioni sbagliate.
    Chiedi sempre piÃ¹ tempo, dÃ¬ che devi pensarci, che devi parlare con qualcuno.
    Non dire mai un no secco, ma nemmeno un sÃ¬. Cerca rassicurazioni continue.
    Esprimi dubbi tipo "e se poi...", "non sono sicuro che..."`,
    sampleOpeningMessage: 'Salve, mi hanno parlato del vostro servizio e potrebbe interessarmi... perÃ² non sono sicuro, dovrei prima capire meglio e magari parlarne con il mio team. Avete qualche informazione in piÃ¹?'
  },
  {
    id: 'business',
    name: 'Business Oriented',
    emoji: 'ðŸ’¼',
    description: 'Parla di ROI, numeri e risultati',
    characteristics: [
      'Vuole vedere i numeri',
      'Parla di ROI e risultati',
      'Non ha tempo da perdere',
      'Vuole casi concreti'
    ],
    typicalObjections: [
      'Qual Ã¨ il ROI atteso?',
      'In quanto tempo recupero l investimento?',
      'Avete case study con numeri reali?',
      'Quanto mi costa esattamente?'
    ],
    communicationStyle: 'Pragmatico, orientato ai risultati, efficiente',
    goal: 'Capire se l investimento ha senso dal punto di vista business',
    systemPrompt: `Sei un prospect BUSINESS ORIENTED. Ti interessano solo i numeri e i risultati.
    Chiedi sempre il ROI, i costi esatti, i tempi di ritorno dell'investimento.
    Vuoi vedere case study con numeri reali, non promesse vaghe.
    Sei pragmatico e non perdi tempo in chiacchiere. Vai dritto al punto.`,
    sampleOpeningMessage: 'Buongiorno, veniamo al punto. Quanto costa il vostro servizio e qual Ã¨ il ROI che posso aspettarmi? Avete dei case study con numeri reali da mostrarmi?'
  },
  {
    id: 'technical',
    name: 'Tecnico',
    emoji: 'ðŸ”§',
    description: 'Vuole dettagli tecnici e specifiche',
    characteristics: [
      'Chiede specifiche tecniche',
      'Vuole sapere come funziona "sotto il cofano"',
      'Si preoccupa delle integrazioni',
      'Parla in gergo tecnico'
    ],
    typicalObjections: [
      'Che stack tecnologico usate?',
      'Come si integra con il nostro CRM?',
      'Avete delle API?',
      'Qual Ã¨ l uptime garantito?'
    ],
    communicationStyle: 'Dettagliato, tecnico, analitico',
    goal: 'Capire se tecnicamente il prodotto Ã¨ solido e integrabile',
    systemPrompt: `Sei un prospect TECNICO. Ti interessano i dettagli tecnici e le specifiche.
    Chiedi dello stack tecnologico, delle API, delle integrazioni possibili.
    Vuoi sapere come funziona "sotto il cofano". Parla in termini tecnici.
    Ti preoccupi della sicurezza, dell'uptime, della scalabilitÃ .`,
    sampleOpeningMessage: 'Ciao, sono il CTO della mia azienda. Prima di procedere ho bisogno di capire alcuni aspetti tecnici: che tecnologie utilizzate? Avete API REST o GraphQL? Come gestite la sicurezza dei dati?'
  },
  {
    id: 'price_focused',
    name: 'Focus Prezzo',
    emoji: 'ðŸ’°',
    description: 'Tutto ruota intorno al costo',
    characteristics: [
      'Chiede sconti continuamente',
      'Confronta con la concorrenza',
      'Vuole il massimo al minimo costo',
      'Negozia su tutto'
    ],
    typicalObjections: [
      'Ãˆ troppo caro',
      'La concorrenza costa meno',
      'Potete fare uno sconto?',
      'Non ho budget per questo'
    ],
    communicationStyle: 'Negoziatore, cerca sempre l affare migliore',
    goal: 'Ottenere il prezzo piÃ¹ basso possibile',
    systemPrompt: `Sei un prospect FOCALIZZATO SUL PREZZO. Tutto ruota intorno al costo.
    Chiedi sempre il prezzo prima di tutto. DÃ¬ che Ã¨ troppo caro.
    Menziona che la concorrenza costa meno. Chiedi sconti e offerte speciali.
    Negozia su tutto. Il budget Ã¨ sempre un problema per te.`,
    sampleOpeningMessage: 'Salve, prima di tutto quanto costa? Ho giÃ  ricevuto preventivi da altri fornitori e il budget Ã¨ limitato. Se il prezzo Ã¨ troppo alto non ha senso continuare la conversazione.'
  },
  {
    id: 'busy',
    name: 'Frettoloso',
    emoji: 'â°',
    description: 'Ha poco tempo, vuole andare al sodo',
    characteristics: [
      'Ha sempre fretta',
      'Interrompe se si divaga',
      'Vuole risposte brevi',
      'Non ha pazienza per i dettagli'
    ],
    typicalObjections: [
      'Mi dia i punti chiave in 2 minuti',
      'Non ho tempo per questo ora',
      'PuÃ² essere piÃ¹ breve?',
      'Richiamami tra una settimana'
    ],
    communicationStyle: 'Impaziente, diretto, vuole sintesi',
    goal: 'Capire rapidamente se vale la pena approfondire',
    systemPrompt: `Sei un prospect FRETTOLOSO. Hai sempre poco tempo e mille cose da fare.
    Chiedi di andare al punto. Interrompi se l'agente divaga troppo.
    Vuoi risposte brevi e concise. Se qualcosa richiede troppo tempo, rimanda.
    Mostra impazienza e guarda spesso l'orologio (metaforicamente).`,
    sampleOpeningMessage: 'Senta, ho solo 5 minuti. Mi dica in breve cosa fate e perchÃ© dovrebbe interessarmi. Andiamo al punto senza giri di parole.'
  },
  {
    id: 'defensive',
    name: 'Difensivo',
    emoji: 'ðŸ›¡ï¸',
    description: 'Ha avuto brutte esperienze, Ã¨ sulla difensiva',
    characteristics: [
      'Ãˆ stato scottato in passato',
      'Alza barriere',
      'Non vuole pressioni',
      'Sospettoso di tutto'
    ],
    typicalObjections: [
      'Non voglio essere pressato',
      'L ultimo fornitore mi ha fregato',
      'Non firmo nulla oggi',
      'PerchÃ© dovrei fidarmi di voi?'
    ],
    communicationStyle: 'Guardingo, sospettoso, alza muri',
    goal: 'Proteggersi da un altra fregatura',
    systemPrompt: `Sei un prospect DIFENSIVO. Sei stato scottato in passato da fornitori disonesti.
    Alzi barriere e sei sospettoso. Non vuoi sentirti pressato.
    Racconta di brutte esperienze passate. DÃ¬ chiaramente che non firmerai nulla oggi.
    Chiedi garanzie, contratti chiari, clausole di uscita.`,
    sampleOpeningMessage: 'Buongiorno. Premetto che l ultimo fornitore con cui ho lavorato mi ha creato solo problemi. Non voglio perdere tempo nÃ© essere pressato. Se avete intenzione di vendermi qualcosa a tutti i costi, possiamo chiudere qui.'
  },
  {
    id: 'decision_maker',
    name: 'Decision Maker',
    emoji: 'ðŸŽ¯',
    description: 'Decide lui, vuole capire il valore',
    characteristics: [
      'Ha potere decisionale',
      'Valuta il quadro generale',
      'Vuole capire il valore strategico',
      'Decide velocemente se convinto'
    ],
    typicalObjections: [
      'PerchÃ© dovrei scegliere voi e non altri?',
      'Come si allinea con la nostra strategia?',
      'Qual Ã¨ il vostro vantaggio competitivo?',
      'Chi altro usa il vostro servizio?'
    ],
    communicationStyle: 'Autorevole, strategico, valutativo',
    goal: 'Capire se il prodotto porta valore strategico all azienda',
    systemPrompt: `Sei un DECISION MAKER. Sei tu che decidi gli acquisti in azienda.
    Valuti il quadro generale e il valore strategico, non solo i dettagli.
    Chiedi perchÃ© dovresti scegliere loro invece della concorrenza.
    Se sei convinto, puoi decidere velocemente. Vuoi capire il vantaggio competitivo.`,
    sampleOpeningMessage: 'Buongiorno, sono l amministratore delegato. Ho 15 minuti. Mi spieghi in modo chiaro perchÃ© dovrei scegliere la vostra soluzione invece delle alternative sul mercato. Qual Ã¨ il vostro vantaggio competitivo?'
  },
  {
    id: 'analytical',
    name: 'Analitico',
    emoji: 'ðŸ“Š',
    description: 'Vuole dati, statistiche e prove',
    characteristics: [
      'Chiede dati e statistiche',
      'Vuole case study dettagliati',
      'Analizza tutto prima di decidere',
      'Non si fida del "sentito dire"'
    ],
    typicalObjections: [
      'Avete dati che supportano questa affermazione?',
      'Posso vedere le statistiche?',
      'Quali sono i KPI misurabili?',
      'Avete ricerche o studi a supporto?'
    ],
    communicationStyle: 'Metodico, basato sui dati, razionale',
    goal: 'Prendere una decisione basata su dati oggettivi',
    systemPrompt: `Sei un prospect ANALITICO. Prendi decisioni basate sui dati, non sulle emozioni.
    Chiedi sempre statistiche, case study dettagliati, KPI misurabili.
    Vuoi vedere numeri reali, non promesse. Non ti fidi del "sentito dire".
    Analizza tutto metodicamente prima di decidere.`,
    sampleOpeningMessage: 'Buongiorno. Prima di procedere vorrei vedere dei dati concreti. Avete statistiche sui risultati ottenuti dai vostri clienti? Case study dettagliati con metriche misurabili? Ho bisogno di numeri per valutare.'
  }
];

5. ðŸ“± LAYOUT UI DETTAGLIATO
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Dashboard    Panoramica â”‚ Addestramento â”‚ AI Training â”‚ AI Trainer â”‚ Guida     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   âš”ï¸ CAMPO DI BATTAGLIA - Test AI Automatico                                        â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                        â”‚
â”‚   Metti alla prova il tuo script con prospect simulati.                              â”‚
â”‚   L'AI parlerÃ  con il tuo Sales Agent come un vero cliente.                          â”‚
â”‚                                                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   ðŸ“‹ STEP 1: SELEZIONA LO SCRIPT DA TESTARE                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚   â”‚  Discovery Call v2                                          â–¼  â”‚               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   ðŸ‘¥ STEP 2: SCEGLI IL TUO AVVERSARIO (PersonalitÃ  Prospect)                         â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚   ðŸ¤¨    â”‚  â”‚   ðŸ˜Š    â”‚  â”‚   ðŸ¤”    â”‚  â”‚   ðŸ’¼    â”‚  â”‚   ðŸ”§    â”‚                   â”‚
â”‚   â”‚ Scetticoâ”‚  â”‚Entusiastâ”‚  â”‚Indeciso â”‚  â”‚Business â”‚  â”‚ Tecnico â”‚                   â”‚
â”‚   â”‚         â”‚  â”‚    âœ“    â”‚  â”‚         â”‚  â”‚         â”‚  â”‚         â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚   ðŸ’°    â”‚  â”‚   â°    â”‚  â”‚   ðŸ›¡ï¸    â”‚  â”‚   ðŸŽ¯    â”‚  â”‚   ðŸ“Š    â”‚                   â”‚
â”‚   â”‚ Prezzo  â”‚  â”‚Frettol. â”‚  â”‚Difensivoâ”‚  â”‚ Decisionâ”‚  â”‚Analiticoâ”‚                   â”‚
â”‚   â”‚         â”‚  â”‚         â”‚  â”‚         â”‚  â”‚  Maker  â”‚  â”‚         â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ ðŸ˜Š ENTUSIASTA                                                               â”‚   â”‚
â”‚   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                               â”‚   â”‚
â”‚   â”‚ Interessato e positivo, fa molte domande, vuole capire i dettagli.          â”‚   â”‚
â”‚   â”‚                                                                             â”‚   â”‚
â”‚   â”‚ Caratteristiche:                                                            â”‚   â”‚
â”‚   â”‚ â€¢ Fa molte domande per curiositÃ                                             â”‚   â”‚
â”‚   â”‚ â€¢ Ãˆ genuinamente interessato al prodotto                                    â”‚   â”‚
â”‚   â”‚ â€¢ Positivo ma vuole essere sicuro                                           â”‚   â”‚
â”‚   â”‚                                                                             â”‚   â”‚
â”‚   â”‚ Obiezioni tipiche:                                                          â”‚   â”‚
â”‚   â”‚ â€¢ "Fantastico! Ma come funziona esattamente?"                               â”‚   â”‚
â”‚   â”‚ â€¢ "Interessante! Si integra con...?"                                        â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   ðŸ‘ï¸ STEP 3: ANTEPRIMA MESSAGGIO INIZIALE                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ ðŸ’¬ "Ciao! Ho visto il vostro prodotto e mi sembra molto interessante!       â”‚   â”‚
â”‚   â”‚     Potete spiegarmi meglio come funziona? Sono curioso di sapere tutto!"   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚   â”‚            âš”ï¸ AVVIA BATTAGLIA                                 â”‚                 â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   ðŸŸ¢ BATTAGLIE IN CORSO (2 attive)                                   [Aggiorna]    â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚   â”‚ ðŸ¤¨ SCETTICO vs Discovery Call          â”‚  â”‚ ðŸ”§ TECNICO vs Demo Script          â”‚â”‚
â”‚   â”‚                                        â”‚  â”‚                                    â”‚â”‚
â”‚   â”‚ Prospect: Mario Rossi                  â”‚  â”‚ Prospect: Anna Bianchi             â”‚â”‚
â”‚   â”‚ â±ï¸ Durata: 5:23                        â”‚  â”‚ â±ï¸ Durata: 2:15                    â”‚â”‚
â”‚   â”‚ ðŸ“ Fase: Discovery (45%)               â”‚  â”‚ ðŸ“ Fase: Demo (30%)                â”‚â”‚
â”‚   â”‚ ðŸªœ Ladder: 2 attivazioni               â”‚  â”‚ ðŸªœ Ladder: 0 attivazioni           â”‚â”‚
â”‚   â”‚                                        â”‚  â”‚                                    â”‚â”‚
â”‚   â”‚ Ultimo scambio:                        â”‚  â”‚ Ultimo scambio:                    â”‚â”‚
â”‚   â”‚ "Come faccio a fidarmi di voi?"        â”‚  â”‚ "Quali API avete disponibili?"     â”‚â”‚
â”‚   â”‚                                        â”‚  â”‚                                    â”‚â”‚
â”‚   â”‚  [ðŸ‘ï¸ Osserva]  [â¹ï¸ Stop]              â”‚  â”‚  [ðŸ‘ï¸ Osserva]  [â¹ï¸ Stop]          â”‚â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   âœ… BATTAGLIE COMPLETATE (ultime 5)                              [Vedi tutte â†’]    â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
â”‚                                                                                      â”‚
â”‚   â”‚ Data       â”‚ PersonalitÃ  â”‚ Script      â”‚ Durata â”‚ Score â”‚ Azione            â”‚   â”‚
â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   â”‚
â”‚   â”‚ Oggi 14:30 â”‚ ðŸŽ¯ Decision â”‚ Discovery   â”‚ 8:45   â”‚ 92%   â”‚ [Analizza]        â”‚   â”‚
â”‚   â”‚ Oggi 11:15 â”‚ ðŸ’° Prezzo   â”‚ Discovery   â”‚ 6:22   â”‚ 78%   â”‚ [Analizza]        â”‚   â”‚
â”‚   â”‚ Ieri 16:00 â”‚ ðŸ¤” Indeciso â”‚ Demo        â”‚ 12:30  â”‚ 85%   â”‚ [Analizza]        â”‚   â”‚
â”‚   â”‚ Ieri 10:30 â”‚ ðŸ˜Š Entusias.â”‚ Objections  â”‚ 4:15   â”‚ 95%   â”‚ [Analizza]        â”‚   â”‚
â”‚   â”‚ 2 gg fa    â”‚ ðŸ›¡ï¸ Difensivâ”‚ Discovery   â”‚ 9:00   â”‚ 71%   â”‚ [Analizza]        â”‚   â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

6. ðŸ”Œ API ENDPOINTS
Nuovi Endpoints da Creare
// File: server/routes/ai-trainer.ts
// 1. AVVIA SESSIONE DI TRAINING
POST /api/training/start-session
Body: {
  agentId: string,
  scriptId: string,
  personaId: string  // es: 'skeptic', 'enthusiast', etc.
}
Response: {
  sessionId: string,
  status: 'running',
  prospectName: string,
  prospectEmail: string,
  websocketToken: string,  // Per la connessione WebSocket
  conversationId: string   // ID della conversazione (per tracking)
}
// 2. LISTA SESSIONI ATTIVE
GET /api/training/active-sessions?agentId=xxx
Response: {
  sessions: [
    {
      id: string,
      personaId: string,
      personaName: string,
      personaEmoji: string,
      scriptName: string,
      prospectName: string,
      startedAt: string,
      duration: number,  // secondi
      currentPhase: string,
      completionRate: number,
      ladderActivations: number,
      lastMessage: string
    }
  ]
}
// 3. FERMA SESSIONE
POST /api/training/stop-session/:sessionId
Response: {
  success: true,
  finalStats: {
    duration: number,
    completionRate: number,
    ladderActivations: number,
    messagesCount: number
  }
}
// 4. OTTIENI TRANSCRIPT LIVE
GET /api/training/session/:sessionId/transcript
Response: {
  messages: [
    { role: 'prospect', content: string, timestamp: string },
    { role: 'agent', content: string, timestamp: string }
  ],
  currentPhase: string,
  completionRate: number
}
// 5. LISTA PERSONALITÃ€ DISPONIBILI
GET /api/training/personas
Response: {
  personas: ProspectPersona[]  // Array delle 10 personalitÃ 
}

7. ðŸ“Š SEQUENCE DIAGRAM DETTAGLIATO
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend â”‚     â”‚  Backend â”‚     â”‚ Prospect     â”‚     â”‚ WS Service   â”‚     â”‚ Gemini   â”‚
â”‚  (React) â”‚     â”‚ (Express)â”‚     â”‚ Simulator    â”‚     â”‚ (esistente)  â”‚     â”‚   AI     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                â”‚                   â”‚                    â”‚                  â”‚
     â”‚ 1. POST /start-session             â”‚                    â”‚                  â”‚
     â”‚ (agentId, scriptId, personaId)     â”‚                    â”‚                  â”‚
     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚                  â”‚
     â”‚                â”‚                   â”‚                    â”‚                  â”‚
     â”‚                â”‚ 2. Genera dati    â”‚                    â”‚                  â”‚
     â”‚                â”‚    prospect       â”‚                    â”‚                  â”‚
     â”‚                â”‚    (nome, email)  â”‚                    â”‚                  â”‚
     â”‚                â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚                    â”‚                  â”‚
     â”‚                â”‚                   â”‚                    â”‚                  â”‚
     â”‚                â”‚ 3. Crea sessione  â”‚                    â”‚                  â”‚
     â”‚                â”‚    in DB          â”‚                    â”‚                  â”‚
     â”‚                â”‚                   â”‚                    â”‚                  â”‚
     â”‚ 4. Response    â”‚                   â”‚                    â”‚                  â”‚
     â”‚ (sessionId,    â”‚                   â”‚                    â”‚                  â”‚
     â”‚  wsToken)      â”‚                   â”‚                    â”‚                  â”‚
     â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                  â”‚
     â”‚                â”‚                   â”‚                    â”‚                  â”‚
     â”‚                â”‚                   â”‚ 5. Connetti WS     â”‚                  â”‚
     â”‚                â”‚                   â”‚    (mode:          â”‚                  â”‚
     â”‚                â”‚                   â”‚    'ai_training')  â”‚                  â”‚
     â”‚                â”‚                   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚
     â”‚                â”‚                   â”‚                    â”‚                  â”‚
     â”‚                â”‚                   â”‚                    â”‚ 6. Setup session â”‚
     â”‚                â”‚                   â”‚                    â”‚    (skip lobby)  â”‚
     â”‚                â”‚                   â”‚                    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                â”‚                   â”‚                    â”‚                  â”‚
     â”‚                â”‚                   â”‚                    â”‚ 7. Session ready â”‚
     â”‚                â”‚                   â”‚                    â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                â”‚                   â”‚                    â”‚                  â”‚
     â”‚                â”‚                   â”‚ 8. Invia primo     â”‚                  â”‚
     â”‚                â”‚                   â”‚    messaggio       â”‚                  â”‚
     â”‚                â”‚                   â”‚    (opening msg    â”‚                  â”‚
     â”‚                â”‚                   â”‚     da persona)    â”‚                  â”‚
     â”‚                â”‚                   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚
     â”‚                â”‚                   â”‚                    â”‚                  â”‚
     â”‚                â”‚                   â”‚                    â”‚ 9. Forward to    â”‚
     â”‚                â”‚                   â”‚                    â”‚    Sales Agent   â”‚
     â”‚                â”‚                   â”‚                    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                â”‚                   â”‚                    â”‚                  â”‚
     â”‚                â”‚                   â”‚                    â”‚ 10. Agent        â”‚
     â”‚                â”‚                   â”‚                    â”‚     response     â”‚
     â”‚                â”‚                   â”‚                    â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                â”‚                   â”‚                    â”‚                  â”‚
     â”‚                â”‚                   â”‚ 11. Riceve         â”‚                  â”‚
     â”‚                â”‚                   â”‚     risposta agent â”‚                  â”‚
     â”‚                â”‚                   â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚
     â”‚                â”‚                   â”‚                    â”‚                  â”‚
     â”‚                â”‚                   â”‚ 12. Genera nuova   â”‚                  â”‚
     â”‚                â”‚                   â”‚     risposta       â”‚                  â”‚
     â”‚                â”‚                   â”‚     prospect       â”‚                  â”‚
     â”‚                â”‚                   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚
     â”‚                â”‚                   â”‚                    â”‚                  â”‚
     â”‚                â”‚                   â”‚ 13. Risposta       â”‚                  â”‚
     â”‚                â”‚                   â”‚     generata       â”‚                  â”‚
     â”‚                â”‚                   â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                â”‚                   â”‚                    â”‚                  â”‚
     â”‚                â”‚                   â”‚ 14. Invia come     â”‚                  â”‚
     â”‚                â”‚                   â”‚     user message   â”‚                  â”‚
     â”‚                â”‚                   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚
     â”‚                â”‚                   â”‚                    â”‚                  â”‚
     â”‚                â”‚                   â”‚    [LOOP fino a fine conversazione]   â”‚
     â”‚                â”‚                   â”‚                    â”‚                  â”‚
     â”‚ 15. Poll GET /active-sessions      â”‚                    â”‚                  â”‚
     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚                  â”‚
     â”‚                â”‚                   â”‚                    â”‚                  â”‚
     â”‚ 16. Status update (fase, tempo,    â”‚                    â”‚                  â”‚
     â”‚     ultimo messaggio)              â”‚                    â”‚                  â”‚
     â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                  â”‚
     â”‚                â”‚                   â”‚                    â”‚                  â”‚

8. ðŸ“ STRUTTURA FILE DA CREARE/MODIFICARE
ðŸ“ NUOVI FILE DA CREARE:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
shared/
â””â”€â”€ prospect-personas.ts          # Registry delle 10+ personalitÃ 
server/
â”œâ”€â”€ routes/
â”‚   â””â”€â”€ ai-trainer.ts             # Nuove API endpoints
â”œâ”€â”€ services/
â”‚   â””â”€â”€ prospect-simulator/
â”‚       â”œâ”€â”€ index.ts              # Export principale
â”‚       â”œâ”€â”€ simulator-client.ts   # Client WebSocket che fa da prospect
â”‚       â””â”€â”€ response-generator.ts # Genera risposte con Gemini
client/src/
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ client-sales-agent-analytics.tsx  # MODIFICARE: aggiungere tab
â”œâ”€â”€ components/
â”‚   â””â”€â”€ ai-trainer/
â”‚       â”œâ”€â”€ index.ts              # Export principale
â”‚       â”œâ”€â”€ AITrainerTab.tsx      # Componente principale del tab
â”‚       â”œâ”€â”€ PersonaSelector.tsx   # Griglia selezione personalitÃ 
â”‚       â”œâ”€â”€ ScriptSelector.tsx    # Dropdown selezione script
â”‚       â”œâ”€â”€ PreviewPanel.tsx      # Anteprima messaggio iniziale
â”‚       â”œâ”€â”€ ActiveTrainers.tsx    # Griglia sessioni attive
â”‚       â”œâ”€â”€ TrainerCard.tsx       # Card singola sessione
â”‚       â””â”€â”€ ObserveModal.tsx      # Modal per vedere conversazione live
ðŸ“ FILE ESISTENTI DA MODIFICARE:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
server/
â”œâ”€â”€ routes.ts                     # Aggiungere import ai-trainer routes
â”œâ”€â”€ ai/
â”‚   â””â”€â”€ gemini-live-ws-service.ts # Aggiungere mode 'ai_training'
shared/
â””â”€â”€ schema.ts                     # Aggiungere tabella ai_training_sessions

9. âš¡ MODIFICHE A GEMINI-LIVE-WS-SERVICE
// File: server/ai/gemini-live-ws-service.ts
// AGGIUNGERE nuovo mode ai tipi esistenti
type ConnectionMode = 'sales_agent' | 'consultation_invite' | 'assistenza' | 'consulente' | 'ai_training';
// Nella logica di gestione della connessione WebSocket:
if (mode === 'ai_training') {
  // 1. SALTA la lobby - non serve test microfono
  // 2. Prospect dati giÃ  compilati dalla personalitÃ  scelta
  // 3. Usa TESTO invece di AUDIO per i messaggi
  // 4. RIUSA tutto il resto:
  //    - SalesScriptTracker âœ“
  //    - SalesScriptLogger âœ“
  //    - Autosave âœ“
  //    - Analytics âœ“
  //    - Phase detection âœ“
  
  // Il ProspectSimulatorClient si connetterÃ  come un client normale
  // ma invierÃ  messaggi di tipo 'text' invece che 'audio'
}

10. âœ… CHECKLIST DI IMPLEMENTAZIONE
FASE 1: Frontend (Settimana 1)
 Creare componente AITrainerTab.tsx
 Implementare PersonaSelector.tsx con le 10 personalitÃ 
 Creare ScriptSelector.tsx (riusa logica esistente)
 Implementare PreviewPanel.tsx
 Creare ActiveTrainers.tsx con polling
 Implementare ObserveModal.tsx
 Aggiungere tab alla navigazione esistente
FASE 2: Backend - PersonalitÃ  e API (Settimana 2)
 Creare shared/prospect-personas.ts
 Implementare server/routes/ai-trainer.ts
 Aggiungere tabella ai_training_sessions allo schema
 Creare endpoint POST /start-session
 Creare endpoint GET /active-sessions
 Creare endpoint POST /stop-session
FASE 3: Backend - Simulator (Settimana 3)
 Creare ProspectSimulatorClient
 Implementare ProspectResponseGenerator
 Modificare gemini-live-ws-service.ts per mode ai_training
 Testare connessione WebSocket automatica
 Implementare loop conversazione
FASE 4: Testing e Integrazione (Settimana 4)
 Test end-to-end completo
 Verificare tracking e analytics
 Verificare salvataggio conversazioni
 Stress test con multiple sessioni
 Bug fixing
11. ðŸŽ¯ CRITERI DI ACCETTAZIONE
âœ“ Stesse API: L'AI Trainer deve usare esattamente le stesse API del flusso manuale
âœ“ Stesso WebSocket: Connessione allo stesso endpoint WebSocket esistente
âœ“ Stesso Tracking: I dati devono apparire nelle stesse tabelle del database
âœ“ Stesso Analytics: Le metriche devono popolare gli stessi grafici esistenti
âœ“ 10+ PersonalitÃ : Almeno 10 personalitÃ  prospect diverse e realistiche
âœ“ Real-time: PossibilitÃ  di vedere la conversazione in tempo reale
âœ“ Stop/Start: PossibilitÃ  di fermare e riavviare sessioni
âœ“ Multi-sessione: Supporto per multiple sessioni contemporanee
Questo documento contiene tutte le specifiche tecniche necessarie per implementare il sistema. Il tuo programmatore avrÃ  tutto quello che serve per iniziare!