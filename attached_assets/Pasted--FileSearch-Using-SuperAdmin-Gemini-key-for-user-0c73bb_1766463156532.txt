 [FileSearch] Using SuperAdmin Gemini key for user 0c73bbe5-51e1-4108-866b-6be7a52fce3b (1/1)
üîç [FileSearch] Client type: object, has fileSearchStores: true
üì§ [FileSearch] Uploading "[GUIDA] Guida Completa Piattaforma Consulente" (hash: 3d00fe39b8df49b6) to store fileSearchStores/knowledge-base-consulente-juw371zchi3s
‚ùå [FileSearch] Upload with hash failed: error: new row for relation "file_search_documents" violates check constraint "file_search_documents_source_type_check"
    at /home/runner/workspace/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async <anonymous> (/home/runner/workspace/node_modules/src/node-postgres/session.ts:104:19)
    at async FileSearchService.uploadDocumentWithHash (/home/runner/workspace/server/ai/file-search-service.ts:643:23)
    at async FileSearchService.uploadDocumentFromContent (/home/runner/workspace/server/ai/file-search-service.ts:531:22)
    at async Function.syncConsultantGuide (/home/runner/workspace/server/services/file-search-sync-service.ts:555:28)
    at async <anonymous> (/home/runner/workspace/server/routes/file-search.ts:1022:18) {
  length: 717,
  severity: 'ERROR',
  code: '23514',
  detail: 'Failing row contains (3d25c036-d6a5-400b-8b15-293a3e6347a1, 67d6e373-f964-48e5-b434-45e8643620fe, file-1766463165652, filesearch-1766463160359.txt, [GUIDA] Guida Completa Piattaforma Consulente, text/plain, indexed, consultant_guide, consultant-guide-0c73bbe5-51e1-4108-866b-6be7a52fce3b, {"maxOverlapTokens": 40, "maxTokensPerChunk": 400}, null, 2025-12-23 04:12:45.703085, 2025-12-23 04:12:45.652, 3d00fe39b8df49b6, null, 54101, null, 2025-12-23 04:12:45.652, null).',
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: 'public',
  table: 'file_search_documents',
  column: undefined,
  dataType: undefined,
  constraint: 'file_search_documents_source_type_check',
  file: 'execMain.c',
  line: '2033',
  routine: 'ExecConstraints'
}
4:12:45 AM [express] POST /api/file-search/sync-single 500 in 5922ms :: {"success":false,"error":"ne‚Ä¶
4:12:49 AM [express] POST /api/activity/session/heartbeat 200 in 916ms :: {"success":true,"lastActiv‚Ä¶
