# MANUALE COMPLETO DELLA PIATTAFORMA

## Guida Operativa Completa per Consulenti e Clienti

**Versione 3.0 - Febbraio 2026**

---

# INDICE GENERALE

## PARTE PRIMA: INTRODUZIONE
- Capitolo 1: Benvenuto nella Piattaforma
- Capitolo 2: Architettura e Navigazione
- Capitolo 3: Primi Passi e Orientamento

## PARTE SECONDA: GUIDA CONSULENTE
- Capitolo 4: Onboarding e Setup Iniziale
- Capitolo 5: Dashboard e Panoramica
- Capitolo 6: Gestione Clienti Completa
- Capitolo 7: Comunicazione e Lead Management
- Capitolo 8: WhatsApp Business e Agenti AI
- Capitolo 9: Contenuti Formativi e Universit√†
- Capitolo 10: Cervello AI ‚Äì Memoria & Documenti
- Capitolo 11: Email Marketing e Automazioni
- Capitolo 12: Calendario e Gestione Consulenze
- Capitolo 13: Impostazioni e Configurazioni Avanzate

## PARTE TERZA: GUIDA CLIENTE
- Capitolo 14: Dashboard Cliente
- Capitolo 15: AI Assistant - Il Tuo Assistente Personale
- Capitolo 16: Formazione e Universit√†
- Capitolo 17: Gestione del Tempo e Consulenze
- Capitolo 18: Agenti AI e Strumenti di Vendita
- Capitolo 19: Cervello AI Personale (Area Cliente)

## PARTE QUARTA: APPENDICI
- Appendice A: Glossario Completo dei Termini
- Appendice B: Risoluzione Problemi per Scenario
- Appendice C: Scorciatoie, Tips e Best Practices
- Appendice D: FAQ - Domande Frequenti

## PARTE QUINTA: FUNZIONALIT√Ä AVANZATE
- Capitolo 20: Weekly Check-in ‚Äì Sistema Automatico di Contatto Settimanale via WhatsApp
- Capitolo 21: Chiamate Vocali AI ‚Äì Alessia AI Phone
- Capitolo 22: AI Autonomy ‚Äì Sistema di Dipendenti AI Autonomi
- Capitolo 23: Integrazione tra i Tre Sistemi

---

# PARTE PRIMA: INTRODUZIONE

---

## Capitolo 1: Benvenuto nella Piattaforma

### 1.1 Cos'√® Questa Piattaforma e Perch√© √à Diversa

Questa piattaforma √® un ecosistema completo per la gestione della consulenza professionale. Non √® semplicemente un software: √® un partner digitale che lavora con te 24 ore su 24, 7 giorni su 7.

**Immagina questo scenario:**

> *√à domenica sera, ore 22:30. Un potenziale cliente ti scrive su WhatsApp: "Ho visto il tuo webinar, mi interessa sapere di pi√π." Tu sei a cena con la famiglia. Cosa succede?*
>
> *Con questa piattaforma: il tuo agente AI risponde immediatamente, con il tuo tono di voce, fa le domande giuste per qualificare il lead, e prenota un appuntamento nel tuo calendario per marted√¨ mattina. Luned√¨ mattina trovi tutto pronto: il lead qualificato, le informazioni raccolte, l'appuntamento confermato.*

Questo √® solo un esempio di ci√≤ che la piattaforma pu√≤ fare. Ma andiamo con ordine.

### 1.2 I Tre Pilastri della Piattaforma

#### Pilastro 1: Intelligenza Artificiale Integrata

L'AI non √® un'aggiunta, √® il cuore del sistema. Ecco cosa fa concretamente:

| Funzione | Cosa Fa l'AI | Esempio Pratico |
|----------|--------------|-----------------|
| **Analisi Clienti** | Legge tutti i dati del cliente e genera insights | "Mario ha completato il 70% del corso ma rallenta negli esercizi. Suggerisco una sessione di rinforzo." |
| **Generazione Email** | Scrive email personalizzate per ogni cliente | Genera un'email di follow-up che menziona esattamente cosa ha fatto il cliente questa settimana |
| **Risposta Domande** | Usa il tuo Cervello AI per rispondere | Cliente chiede "Come funziona X?" - l'AI risponde usando i tuoi documenti |
| **Gestione WhatsApp** | Conversa naturalmente con i lead | Qualifica lead, risponde a obiezioni, prenota appuntamenti |
| **Preparazione Consulenze** | Prepara brief prima delle sessioni | "Oggi con Laura: focus su esercizio 3 non completato, obiettivo settimanale raggiunto al 80%" |

#### Pilastro 2: Automazione Intelligente

L'automazione non significa robotico. Significa che le cose succedono al momento giusto, senza che tu debba ricordarti di farle.

**Esempio di flusso automatizzato:**

```
1. Lead compila form sul tuo sito
   ‚Üì
2. Viene importato automaticamente nella piattaforma
   ‚Üì
3. Riceve messaggio WhatsApp di benvenuto (template approvato)
   ‚Üì
4. L'agente AI inizia la conversazione
   ‚Üì
5. Lead risponde ‚Üí AI qualifica ‚Üí prenota appuntamento
   ‚Üì
6. Tu ricevi notifica con tutti i dettagli
   ‚Üì
7. Post-appuntamento: email di riepilogo automatica
```

#### Pilastro 3: Formazione Strutturata

Crea un'esperienza formativa professionale per i tuoi clienti:

- **Corsi organizzati** in moduli e lezioni
- **Esercizi pratici** con sistema di consegna e revisione
- **Progressi tracciati** automaticamente
- **Percorsi personalizzati** per ogni cliente
- **AI Course Builder** che genera corsi da video YouTube

### 1.3 I Due Ruoli: Consulente e Cliente

#### Il Ruolo del Consulente

Come consulente, hai accesso all'area `/consultant` dove puoi:

- **Gestire i clienti**: Profili, progressi, storico completo
- **Creare contenuti**: Corsi, esercizi, percorsi formativi
- **Comunicare**: WhatsApp, email, consulenze video
- **Automatizzare**: Agenti AI, campagne, follow-up
- **Analizzare**: Dashboard, metriche, insights

**La tua sidebar (menu laterale) √® organizzata cos√¨:**

| Categoria | Cosa Contiene |
|-----------|---------------|
| üè† PRINCIPALE | Dashboard, AI Assistant, Setup Iniziale |
| üìã LAVORO QUOTIDIANO | Clienti, Calendario, Task, Email Journey, Analisi Dati |
| üì£ COMUNICAZIONE | HUB Lead, I tuoi dipendenti, Email Hub, Chiamate Voice, AI Autonomo |
| üé® CONTENT STUDIO | Dashboard, Idee (AI), Contenuti, Calendario, Brand Assets, AdVisage AI (PRO) |
| üìö FORMAZIONE | Universit√†, Esercizi, Template, Corsi |
| üß† CERVELLO AI | Memoria & Documenti, API Esterne |
| ‚öôÔ∏è IMPOSTAZIONI | API Keys, Automazioni Pagamento |
| üìò GUIDE | Centro Guide (questo manuale) |
| ü§ñ AI AVANZATO | Consulenze AI, File Search Analytics |

#### Il Ruolo del Cliente

Come cliente, accedi all'area `/client` dove trovi:

- **La tua formazione**: Corsi, lezioni, esercizi
- **L'AI Assistant**: Il tuo assistente personale 24/7
- **Il tuo tempo**: Calendario, task, consulenze
- **I tuoi documenti**: Cervello AI personale

### 1.4 Scenari d'Uso Tipici

#### Scenario 1: Il Consulente Finanziario

> *Marco √® un consulente finanziario. Ha 45 clienti attivi. Ogni mattina:*
> 
> 1. Apre la dashboard ‚Üí vede che 3 clienti hanno completato esercizi da revisionare
> 2. Chiede all'AI: "Prepara i brief per le 3 consulenze di oggi"
> 3. L'AI genera riepiloghi personalizzati con insights
> 4. Dopo ogni consulenza, l'AI genera email di follow-up
> 5. I lead su WhatsApp vengono gestiti dall'agente AI mentre lui √® in call

*Risultato: Marco dedica il suo tempo a ci√≤ che conta (le consulenze) mentre l'AI gestisce il resto.*

#### Scenario 2: Il Coach Aziendale

> *Giulia √® una coach che forma team aziendali. Usa la piattaforma per:*
> 
> 1. Creare corsi formativi con l'AI Course Builder (da video registrati)
> 2. Assegnare percorsi diversi a team diversi
> 3. Monitorare i progressi di ogni membro
> 4. L'AI risponde alle domande dei partecipanti 24/7
> 5. Le email automatiche mantengono alta la partecipazione

*Risultato: Giulia scala il suo business senza moltiplicare le ore di lavoro.*

#### Scenario 3: Il Cliente che Impara

> *Laura √® cliente di un consulente. La sua giornata tipo:*
> 
> 1. Riceve notifica push: "Nuova lezione disponibile"
> 2. Completa la lezione durante la pausa pranzo
> 3. Ha un dubbio ‚Üí chiede all'AI Assistant ‚Üí risposta immediata
> 4. Completa l'esercizio della settimana
> 5. Riceve feedback dal consulente
> 6. L'AI le ricorda l'appuntamento di domani

*Risultato: Laura impara al suo ritmo, con supporto sempre disponibile.*

---

## Capitolo 2: Architettura e Navigazione

### 2.1 La Sidebar: Il Tuo Centro di Controllo

La sidebar √® la barra laterale sinistra presente in ogni pagina. √à il tuo menu principale per navigare la piattaforma.

#### Come Funziona

1. **Categorie Espandibili**: Clicca su una categoria (es: "FORMAZIONE") per vedere le voci al suo interno
2. **Icone Colorate**: Ogni voce ha un'icona distintiva per riconoscerla rapidamente
3. **Badge Numerici**: I numeri rossi indicano elementi che richiedono attenzione (es: "Esercizi (3)" = 3 esercizi da revisionare)
4. **Stato Attivo**: La voce corrente √® evidenziata con sfondo colorato

#### Sidebar Consulente - Dettaglio Completo

**PRINCIPALE** (sempre visibile in cima)
| Voce | Dove Porta | Quando Usarla |
|------|------------|---------------|
| Dashboard | `/consultant` | Panoramica quotidiana, KPI, accesso rapido |
| AI Assistant | `/consultant/ai-assistant` | Chiedere aiuto all'AI, generare contenuti |
| Setup Iniziale | `/consultant/setup-wizard` | Configurazione iniziale (prime settimane) |

**LAVORO QUOTIDIANO**
| Voce | Dove Porta | Quando Usarla |
|------|------------|---------------|
| Clienti | `/consultant/clients` | Gestire profili clienti, vedere progressi |
| Calendario | `/consultant/appointments` | Vedere/creare appuntamenti |
| Task | `/consultant/tasks` | Gestire i tuoi task operativi |
| Email Journey | `/consultant/ai-config` | Configurare email automatiche |
| Analisi Dati | `/consultant/client-data-analysis` | Analizzare dataset Excel/CSV con AI |

**COMUNICAZIONE**
| Voce | Dove Porta | Quando Usarla |
|------|------------|---------------|
| HUB Lead | `/consultant/lead-hub` | Centro controllo acquisizione clienti |
| I tuoi dipendenti | `/consultant/whatsapp` | Gestire agenti AI WhatsApp |
| Email Hub | `/consultant/email-hub` | Gestire email con risposte AI |
| Chiamate Voice | `/consultant/voice-calls` | Gestire chiamate vocali AI (Alessia) |
| AI Autonomo | `/consultant/ai-autonomy` | Configurare dipendenti AI autonomi |

**FORMAZIONE**
| Voce | Dove Porta | Quando Usarla |
|------|------------|---------------|
| Universit√† | `/consultant/university` | Creare/gestire corsi |
| Esercizi | `/consultant/exercises` | Revisionare esercizi consegnati |
| Template | `/consultant/exercise-templates` | Creare template riutilizzabili |
| Corsi | `/consultant/library` | Libreria completa dei corsi |

**CERVELLO AI**
| Voce | Dove Porta | Quando Usarla |
|------|------------|---------------|
| Memoria & Documenti | `/consultant/knowledge-documents` | Caricare documenti per l'AI |
| API Esterne | `/consultant/knowledge-apis` | Collegare fonti dati esterne |

**IMPOSTAZIONI**
| Voce | Dove Porta | Quando Usarla |
|------|------------|---------------|
| API Keys | `/consultant/api-keys-unified` | Configurare integrazioni tecniche |
| Automazioni Pagamento | `/consultant/payment-automations` | Configurare pagamenti ricorrenti e abbonamenti |

**GUIDE**
| Voce | Dove Porta | Quando Usarla |
|------|------------|---------------|
| Centro Guide | `/consultant/guides` | Consultare questo manuale |

**AI AVANZATO**
| Voce | Dove Porta | Quando Usarla |
|------|------------|---------------|
| Consulenze AI | `/consultant/ai-consultations` | Storico consulenze con analisi AI |
| File Search | `/consultant/file-search-analytics` | Analytics ricerche documenti |

### 2.2 Convenzioni di Navigazione in Questo Manuale

In tutto il manuale, troverai istruzioni di navigazione in questo formato:

> **Sidebar ‚Üí CATEGORIA ‚Üí Voce**

**Esempi pratici:**

| Istruzione | Significato |
|------------|-------------|
| `Sidebar ‚Üí PRINCIPALE ‚Üí Dashboard` | Clicca su Dashboard nella sezione PRINCIPALE |
| `Sidebar ‚Üí FORMAZIONE ‚Üí Universit√†` | Espandi FORMAZIONE, poi clicca Universit√† |
| `Sidebar ‚Üí COMUNICAZIONE ‚Üí I tuoi dipendenti ‚Üí [Agente]` | Vai a I tuoi dipendenti, poi seleziona un agente |

### 2.3 Elementi dell'Interfaccia

#### Header (Barra Superiore)

In alto trovi:
- **Logo/Nome**: Cliccalo per tornare alla dashboard
- **Ricerca** (se presente): Cerca contenuti in tutta la piattaforma
- **Notifiche**: Campanella con badge per nuove notifiche
- **Profilo**: Il tuo avatar con menu (logout, impostazioni)

#### Badge e Indicatori

| Elemento | Significato |
|----------|-------------|
| üî¥ Badge rosso con numero | Elementi urgenti che richiedono azione |
| üü¢ Pallino verde | Elemento attivo/online |
| üü° Pallino giallo | In attesa/configurato ma non verificato |
| ‚ö™ Pallino grigio | Inattivo/da fare |

#### Tema Chiaro/Scuro

Clicca sull'icona ‚òÄÔ∏è/üåô nella sidebar per cambiare tema. La preferenza viene salvata.

#### Responsive Design

La piattaforma funziona su:
- **Desktop** (esperienza completa)
- **Tablet** (sidebar collassabile)
- **Smartphone** (sidebar come menu hamburger)

---

## Capitolo 3: Primi Passi e Orientamento

### 3.1 Il Tuo Primo Giorno come Consulente

Hai appena ricevuto le credenziali. Cosa fai? Segui questa checklist:

#### Checklist Primo Giorno

- [ ] **Fai login** e familiarizza con la dashboard
- [ ] **Vai al Setup Wizard** (`Sidebar ‚Üí PRINCIPALE ‚Üí Setup Iniziale`)
- [ ] **Configura Vertex AI** - senza questo l'AI non funziona
- [ ] **Configura SMTP** - senza questo non puoi inviare email
- [ ] **Esplora l'AI Assistant** - prova a fargli delle domande
- [ ] **Crea il tuo primo cliente** (anche di test)

#### Checklist Prima Settimana

- [ ] **Configura Twilio** per WhatsApp (se lo usi)
- [ ] **Crea il primo template WhatsApp** e attendi approvazione
- [ ] **Carica documenti** nel Cervello AI (Memoria & Documenti)
- [ ] **Crea il primo corso** o usa l'AI Course Builder
- [ ] **Crea il primo esercizio**
- [ ] **Assegna corso ed esercizio** al cliente test
- [ ] **Prova il flusso cliente** loggandoti come cliente

### 3.2 Il Tuo Primo Giorno come Cliente

Hai ricevuto l'invito dal tuo consulente. Ecco cosa fare:

#### Checklist Cliente

- [ ] **Fai login** con le credenziali ricevute
- [ ] **Esplora la dashboard** - vedi i tuoi progressi
- [ ] **Apri l'AI Assistant** - presentati e chiedi cosa puoi fare
- [ ] **Vai in Universit√†** - guarda i corsi assegnati
- [ ] **Inizia la prima lezione**
- [ ] **Completa il primo esercizio**
- [ ] **Guarda il calendario** - vedi le consulenze programmate

### 3.3 Capire il Flusso di Lavoro

#### Flusso Tipico Consulente-Cliente

```
CONSULENTE                          CLIENTE
     ‚îÇ                                   ‚îÇ
     ‚îÇ Crea corso/esercizio              ‚îÇ
     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí ‚îÇ Riceve notifica
     ‚îÇ                                   ‚îÇ
     ‚îÇ                                   ‚îÇ Completa lezione
     ‚îÇ                                   ‚îÇ Completa esercizio
     ‚îÇ Riceve notifica ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
     ‚îÇ                                   ‚îÇ
     ‚îÇ Revisiona esercizio               ‚îÇ
     ‚îÇ Scrive feedback                   ‚îÇ
     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí ‚îÇ Riceve feedback
     ‚îÇ                                   ‚îÇ
     ‚îÇ [Consulenza programmata]          ‚îÇ [Partecipa]
     ‚îÇ                                   ‚îÇ
     ‚îÇ AI genera email follow-up         ‚îÇ
     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí ‚îÇ Riceve email
     ‚îÇ                                   ‚îÇ
```

---

# PARTE SECONDA: GUIDA CONSULENTE

---

## Capitolo 4: Onboarding e Setup Iniziale

### 4.1 Il Setup Wizard: La Tua Bussola

**Dove trovarlo:** `Sidebar ‚Üí PRINCIPALE ‚Üí Setup Iniziale`

Il Setup Wizard √® un percorso guidato che ti porta dalla configurazione zero a una piattaforma completamente operativa. √à diviso in 4 fasi, ciascuna con step obbligatori e opzionali.

#### Perch√© Completare il Wizard

Senza completare almeno la Fase 1:
- ‚ùå L'AI Assistant non funziona
- ‚ùå Non puoi inviare email
- ‚ùå Non puoi usare WhatsApp
- ‚ùå Le automazioni sono disabilitate

#### Gli Stati degli Step

Ogni step pu√≤ avere uno di questi stati:

| Stato | Icona | Significato |
|-------|-------|-------------|
| Pending | ‚ö™ Grigio | Da configurare |
| Configured | üü° Giallo | Configurato, in attesa di verifica |
| Verified | üü¢ Verde | Configurato e funzionante |
| Error | üî¥ Rosso | Problema da risolvere |
| Skipped | ‚ö™ Barrato | Saltato volontariamente |

### 4.2 Fase 1: Infrastruttura Base + WhatsApp

Questa √® la fase CRITICA. Senza completarla, la maggior parte delle funzionalit√† non funziona.

#### 4.2.1 Configurare Vertex AI (OBBLIGATORIO)

**Dove:** `Sidebar ‚Üí IMPOSTAZIONI ‚Üí API Keys ‚Üí Tab "AI"`

**Cos'√® Vertex AI:**
Vertex AI √® il servizio di intelligenza artificiale di Google Cloud. √à il "cervello" che alimenta:
- L'AI Assistant (chat)
- La generazione di email
- L'analisi dei clienti
- Gli agenti WhatsApp
- La generazione di corsi
- E molto altro...

**Cosa ti serve prima di iniziare:**
1. Un account Google (puoi usare quello personale)
2. Accesso a Google Cloud Platform (console.cloud.google.com)
3. Una carta di credito per attivare la billing (Google offre $300 di credito gratuito)

**Procedura Passo-Passo:**

**Step 1: Creare un progetto Google Cloud**
1. Vai su console.cloud.google.com
2. Clicca sul selettore progetti in alto
3. Clicca "NUOVO PROGETTO"
4. Nome: scegli qualcosa come "MiaPiattaforma-AI"
5. Clicca "CREA"
6. Attendi 30 secondi per la creazione

**Step 2: Abilitare Vertex AI**
1. Nel menu laterale, vai su "API e servizi" ‚Üí "Libreria"
2. Cerca "Vertex AI API"
3. Clicca sul risultato
4. Clicca "ABILITA"
5. Attendi l'abilitazione (1-2 minuti)

**Step 3: Creare le credenziali**
1. Vai su "API e servizi" ‚Üí "Credenziali"
2. Clicca "CREA CREDENZIALI" ‚Üí "Account di servizio"
3. Nome: "piattaforma-ai-service"
4. Clicca "CREA E CONTINUA"
5. Ruolo: "Vertex AI User" (cerca nella lista)
6. Clicca "CONTINUA" ‚Üí "FATTO"
7. Ora clicca sull'account appena creato
8. Tab "CHIAVI" ‚Üí "AGGIUNGI CHIAVE" ‚Üí "Crea nuova chiave"
9. Formato: JSON
10. Clicca "CREA" ‚Üí il file viene scaricato automaticamente

**Step 4: Caricare le credenziali nella piattaforma**
1. Vai su `Sidebar ‚Üí IMPOSTAZIONI ‚Üí API Keys`
2. Seleziona il tab "AI"
3. Clicca "Carica JSON Credenziali"
4. Seleziona il file scaricato
5. Clicca "Salva e Testa"
6. Se tutto √® ok, vedrai "‚úÖ Connessione riuscita"

**Problemi Comuni:**

| Problema | Soluzione |
|----------|-----------|
| "API non abilitata" | Torna su Google Cloud e verifica che Vertex AI sia abilitato |
| "Credenziali non valide" | Ricrea il file JSON delle credenziali |
| "Quota exceeded" | Hai finito i crediti gratuiti, configura la billing |
| "Permission denied" | Verifica che l'account di servizio abbia il ruolo "Vertex AI User" |

#### 4.2.2 Configurare SMTP Email (OBBLIGATORIO)

**Dove:** `Sidebar ‚Üí IMPOSTAZIONI ‚Üí API Keys ‚Üí Tab "Email"`

**Cos'√® SMTP:**
SMTP √® il protocollo per inviare email. La piattaforma ne ha bisogno per:
- Email di follow-up ai clienti
- Email del journey automatico
- Notifiche di esercizi completati
- Inviti ai nuovi clienti

**Opzione 1: Usare Gmail (pi√π semplice)**

**Prerequisiti:**
- Un account Gmail
- Autenticazione a due fattori attiva

**Procedura:**

1. **Attiva 2FA** (se non l'hai gi√†):
   - Vai su myaccount.google.com
   - Sicurezza ‚Üí Verifica in due passaggi ‚Üí Attiva

2. **Crea App Password**:
   - Vai su myaccount.google.com
   - Sicurezza ‚Üí App Password (in fondo)
   - Seleziona app: "Mail"
   - Seleziona dispositivo: "Altro" ‚Üí scrivi "Piattaforma"
   - Clicca "GENERA"
   - **COPIA LA PASSWORD** (16 caratteri, la vedrai solo una volta!)

3. **Configura nella piattaforma**:
   - Server SMTP: `smtp.gmail.com`
   - Porta: `587`
   - Username: `tuaemail@gmail.com`
   - Password: la App Password copiata (16 caratteri)
   - Email mittente: `tuaemail@gmail.com`
   - Nome mittente: "Il Tuo Nome"

4. **Testa**:
   - Clicca "Invia Email di Test"
   - Controlla la tua casella (anche spam)

**Opzione 2: Usare un provider professionale**

Per volumi alti o email professionali, considera:
- **SendGrid** (gratis fino a 100 email/giorno)
- **Mailgun** (gratis per sviluppatori)
- **Amazon SES** (molto economico)

#### 4.2.3 Configurare Twilio + WhatsApp

**Dove:** `Sidebar ‚Üí IMPOSTAZIONI ‚Üí API Keys ‚Üí Tab "Twilio"`

**Cos'√® Twilio:**
Twilio √® il servizio che permette alla piattaforma di inviare e ricevere messaggi WhatsApp. √à OBBLIGATORIO se vuoi usare:
- Agenti AI WhatsApp
- Campagne marketing WhatsApp
- Notifiche WhatsApp ai clienti

**Importante:** L'approvazione di WhatsApp Business pu√≤ richiedere da 2 a 7 giorni. Inizia SUBITO questo processo.

**Procedura Completa:**

**Step 1: Creare account Twilio**
1. Vai su twilio.com/try-twilio
2. Registrati (gratis)
3. Verifica email e telefono
4. Completa il profilo

**Step 2: Ottenere le credenziali**
1. Nella dashboard Twilio, trova:
   - Account SID (inizia con AC...)
   - Auth Token (clicca "Show" per vederlo)
2. Copia entrambi

**Step 3: Configurare WhatsApp Business**
1. In Twilio, vai su "Messaging" ‚Üí "Try it out" ‚Üí "Send a WhatsApp message"
2. Segui la procedura guidata per collegare WhatsApp
3. Dovrai verificare un numero di telefono aziendale
4. Compila le informazioni aziendali per Meta

**Step 4: Inserire nella piattaforma**
1. `Sidebar ‚Üí IMPOSTAZIONI ‚Üí API Keys ‚Üí Tab "Twilio"`
2. Inserisci Account SID
3. Inserisci Auth Token
4. Inserisci il numero WhatsApp (formato: +39xxxxxxxxxx)
5. Clicca "Salva e Verifica"

**Costi:**
- Messaggi inviati: ~$0.005-0.05 per messaggio (varia per paese)
- Messaggi ricevuti: gratuiti
- I primi $15 sono offerti da Twilio per testare

### 4.3 Fase 2: Configurazione Agenti WhatsApp

Una volta completata la Fase 1, puoi creare i tuoi "dipendenti virtuali".

#### 4.3.1 Creare Template WhatsApp (ESSENZIALE)

**Dove:** `Sidebar ‚Üí COMUNICAZIONE ‚Üí I tuoi dipendenti ‚Üí Tab "Template"`

**Perch√© sono obbligatori:**
WhatsApp non permette di contattare persone "a freddo" con messaggi liberi. DEVI usare template pre-approvati da Meta.

**Le regole:**
- Solo i template approvati possono iniziare conversazioni
- Dopo che il cliente risponde, hai 24 ore per rispondere liberamente
- Dopo 24 ore di silenzio, devi usare di nuovo un template

**Creare un template efficace:**

**Esempio - Template "Primo Contatto":**
```
Ciao {{1}}, sono [TuoNome] di [TuaAzienda]. üëã

Ho visto il tuo interesse per {{2}} e mi piacerebbe farti due domande per capire come posso aiutarti al meglio.

Hai 5 minuti per una chiacchierata?
```

- `{{1}}` = verr√† sostituito con il nome del lead
- `{{2}}` = verr√† sostituito con l'argomento/fonte

**Procedura:**
1. Clicca "Nuovo Template"
2. **Nome**: `primo_contatto` (solo lettere minuscole e underscore)
3. **Categoria**: Marketing
4. **Lingua**: Italian
5. **Corpo**: Il testo del messaggio
6. Clicca "Sottometti per Approvazione"

**Tempi di approvazione:**
- Solitamente: 5 minuti - 2 ore
- A volte: fino a 24 ore
- Se rifiutato: leggi il motivo, modifica, risottometti

#### 4.3.2 Creare il Primo Agente AI

**Dove:** `Sidebar ‚Üí COMUNICAZIONE ‚Üí I tuoi dipendenti ‚Üí "Nuovo Agente"`

Un agente AI √® un "dipendente virtuale" che:
- Risponde ai messaggi WhatsApp
- Qualifica i lead
- Prenota appuntamenti
- Risponde a domande usando il Cervello AI (documenti e memorie)
- Gestisce obiezioni

**Tipi di agenti:**

| Tipo | Uso Principale | Esempio |
|------|----------------|---------|
| Inbound | Risponde a chi ti contatta | "Setter" che qualifica chi scrive dopo il webinar |
| Outbound | Contatta proattivamente | "SDR" che segue i lead importati |
| Consultivo | Supporto durante sessioni | Risponde a domande tecniche live |

**Configurazione guidata:**

**Tab 1: Informazioni Base**
- Nome: es. "Marco - Setter"
- Tipo: Inbound
- Descrizione: "Qualifica i lead dal webinar e prenota discovery call"

**Tab 2: Personalit√†**
Qui definisci COME parla l'agente. Pi√π sei specifico, meglio funziona.

**Esempio di personalit√† ben scritta:**
```
Sei Marco, un sales development representative giovane e dinamico.
Parli in modo amichevole ma professionale.
Usi il "tu" ma mantieni rispetto.
Non sei mai invadente o aggressivo.
Fai domande aperte per capire le esigenze.
Quando qualcuno esita, rassicuri senza insistere.
Non menzionare mai che sei un'AI.
```

**Tab 3: Script**
Definisci il flusso della conversazione:

```
STEP 1 - APERTURA
Obiettivo: Ingaggiare il lead
Messaggio tipo: "Ciao [nome]! Ho visto che hai partecipato al webinar su [topic]. Cosa ti ha colpito di pi√π?"

STEP 2 - QUALIFICA
Obiettivo: Capire se √® in target
Domande: Qual √® la tua situazione attuale? Cosa vorresti migliorare? In che tempi?

STEP 3 - PROPOSTA
Obiettivo: Proporre la call
Messaggio tipo: "In base a quello che mi dici, penso che una chiacchierata con [consulente] potrebbe esserti utile. Cosa ne pensi?"

STEP 4 - BOOKING
Obiettivo: Prenotare appuntamento
Azione: Proponi slot disponibili dal calendario
```

**Tab 4: Cervello AI**
Seleziona quali documenti dal Cervello AI l'agente pu√≤ consultare per rispondere.

**Tab 5: Configurazioni**
- Orari: quando l'agente pu√≤ rispondere
- Delay: secondi di attesa prima di rispondere (2-5 sec per sembrare naturale)
- Escalation: quando passare a un umano

### 4.4 Fase 3: Contenuti

#### 4.4.1 Creare il Primo Corso

**Dove:** `Sidebar ‚Üí FORMAZIONE ‚Üí Universit√†`

**Due opzioni:**

**Opzione A: Creazione Manuale**
1. Clicca "Nuovo Corso"
2. Inserisci titolo e descrizione
3. Aggiungi moduli
4. Per ogni modulo, aggiungi lezioni
5. Scrivi il contenuto di ogni lezione

**Opzione B: AI Course Builder (consigliato)**
1. Clicca "AI Course Builder"
2. Incolla link di video YouTube
3. L'AI estrae le trascrizioni
4. L'AI genera lezioni strutturate
5. Rivedi, modifica, pubblica

**Esempio pratico - AI Course Builder:**

*Scenario: Vuoi creare un corso sulla gestione del tempo*

1. Hai 5 video YouTube che hai registrato sull'argomento
2. Copia i link dei video
3. Nel Course Builder, incolla i link
4. L'AI elabora (5-10 minuti)
5. Ricevi 5 lezioni generate automaticamente con:
   - Titolo estratto dal video
   - Contenuto formattato
   - Punti chiave evidenziati
   - Esercizi suggeriti

#### 4.4.2 Creare Esercizi

**Dove:** `Sidebar ‚Üí FORMAZIONE ‚Üí Template`

Gli esercizi sono attivit√† pratiche che assegni ai clienti.

**Tipi disponibili:**
- **Risposta aperta**: Il cliente scrive liberamente
- **Quiz**: Domande a scelta multipla
- **Upload file**: Il cliente carica documenti
- **Checklist**: Lista di attivit√† da spuntare

**Best practices:**
- Titolo chiaro e specifico
- Istruzioni dettagliate
- Deadline ragionevole
- Collegamento al corso/lezione relativa

### 4.5 Fase 4: Configurazioni Avanzate

#### 4.5.1 Email Post-Consulenza

Dopo una consulenza, l'AI pu√≤ generare automaticamente un'email di riepilogo con:
- Punti discussi
- Decisioni prese
- Action items
- Prossimi passi

**Come abilitarlo:**
1. Vai nelle impostazioni del calendario
2. Abilita "Email post-consulenza"
3. Personalizza il template base

#### 4.5.2 Video Meeting con WebRTC

**Dove:** `Sidebar ‚Üí IMPOSTAZIONI ‚Üí API Keys ‚Üí Tab "Video"`

Per videochiamate affidabili, configura Metered.ca:
1. Crea account su metered.ca
2. Copia API Key
3. Inserisci nella piattaforma
4. I link meeting vengono generati automaticamente

---

## Capitolo 5: Dashboard e Panoramica

### 5.1 La Tua Home Operativa

**Dove trovarlo:** `Sidebar ‚Üí PRINCIPALE ‚Üí Dashboard`

La dashboard √® la prima cosa che vedi dopo il login. √à progettata per darti in 5 secondi lo stato della tua attivit√†.

### 5.2 I KPI in Alto

Nella parte superiore trovi 4 card con numeri chiave:

| KPI | Cosa Mostra | Azione Suggerita |
|-----|-------------|------------------|
| **Clienti Attivi** | Numero totale clienti | Clicca per vedere la lista |
| **Esercizi da Revisionare** | Esercizi consegnati in attesa | Priorit√† ALTA: rispondi entro 24-48h |
| **Consulenze Settimana** | Appuntamenti questa settimana | Clicca per vedere calendario |
| **Lead Prioritari** | Lead con alto score | Contattali subito |

### 5.3 Sezione "Richiede Attenzione"

Questa sezione mostra elementi urgenti:

**Consulenze da Completare**
Consulenze passate non ancora marcate come "completate". Completa la scheda per generare email di follow-up.

**Bozze Email**
Email generate dall'AI in attesa della tua approvazione. Revisiona e invia.

**Task Scaduti**
Task con deadline passata. Completali o riprogrammali.

**Lead Non Contattati**
Lead importati che non hanno ancora ricevuto il primo messaggio.

### 5.4 Navigazione Rapida

I pulsanti in basso ti portano direttamente alle sezioni pi√π usate:

| Pulsante | Destinazione | Quando Usarlo |
|----------|--------------|---------------|
| AI Assistant | Chat AI | Chiedere aiuto, generare contenuti |
| Clienti | Lista clienti | Gestione quotidiana |
| Calendario | Appuntamenti | Pianificare sessioni |
| Email Journey | Configurazione email | Setup automazioni |
| Lead Hub | Centro acquisizione | Gestire pipeline |
| Agent Setup | Agenti WhatsApp | Configurare bot |
| Formazione | Corsi | Creare contenuti |
| Cervello AI | Memoria & Documenti | Caricare materiali |

### 5.5 Esempio di Routine Mattutina

*Ogni mattina, Marco apre la dashboard:*

1. **Guarda i KPI**: "3 esercizi da revisionare, 2 consulenze oggi"
2. **Controlla "Richiede Attenzione"**: "1 email bozza da approvare"
3. **Clicca su Esercizi**: Revisiona rapidamente i 3 esercizi
4. **Approva l'email**: Legge, modifica leggermente, invia
5. **Chiede all'AI**: "Prepara i brief per le consulenze di oggi"
6. **Inizia la giornata**: Tutto sotto controllo in 10 minuti

---

## Capitolo 6: Gestione Clienti Completa

### 6.1 La Lista Clienti

**Dove trovarlo:** `Sidebar ‚Üí LAVORO QUOTIDIANO ‚Üí Clienti`

La pagina mostra tutti i tuoi clienti in formato tabella:

| Colonna | Informazione |
|---------|--------------|
| Nome | Nome completo + foto |
| Email | Indirizzo email |
| Stato | Attivo / In Pausa / Completato |
| Ultimo Accesso | Quando ha usato la piattaforma |
| Progressi | Barra percentuale |

**Filtri disponibili:**
- Per stato (attivi, in pausa, completati)
- Per data inizio
- Per corso assegnato
- Ricerca libera per nome/email

### 6.2 Profilo Cliente Dettagliato

Cliccando su un cliente, accedi al suo profilo completo con multiple tab:

#### Tab: Panoramica

| Sezione | Contenuto |
|---------|-----------|
| Dati Personali | Nome, email, telefono, foto |
| Obiettivi | Obiettivi del percorso |
| Note | Note importanti visibili solo a te |
| KPI Cliente | Lezioni completate, esercizi consegnati, streak |

#### Tab: Percorso Formativo

| Sezione | Contenuto |
|---------|-----------|
| Corsi Assegnati | Lista con % completamento |
| Esercizi | Tutti gli esercizi con stato |
| Timeline | Cronologia delle attivit√† |

**Esempio visivo:**
```
üìö Corso: Gestione Finanziaria Base
   ‚îú‚îÄ‚îÄ ‚úÖ Modulo 1: Fondamenti (100%)
   ‚îÇ   ‚îú‚îÄ‚îÄ ‚úÖ Lezione 1.1: Cos'√® un budget
   ‚îÇ   ‚îú‚îÄ‚îÄ ‚úÖ Lezione 1.2: Entrate e uscite
   ‚îÇ   ‚îî‚îÄ‚îÄ ‚úÖ Lezione 1.3: Tracciamento spese
   ‚îú‚îÄ‚îÄ üîÑ Modulo 2: Risparmio (60%)
   ‚îÇ   ‚îú‚îÄ‚îÄ ‚úÖ Lezione 2.1: Perch√© risparmiare
   ‚îÇ   ‚îú‚îÄ‚îÄ ‚úÖ Lezione 2.2: Strategie base
   ‚îÇ   ‚îî‚îÄ‚îÄ ‚¨ú Lezione 2.3: Automazione
   ‚îî‚îÄ‚îÄ ‚¨ú Modulo 3: Investimenti (0%)
```

#### Tab: Consulenze

| Sezione | Contenuto |
|---------|-----------|
| Prossime | Appuntamenti futuri |
| Passate | Storico con note e riepiloghi |

#### Tab: Comunicazioni

| Sezione | Contenuto |
|---------|-----------|
| Email | Storico email inviate |
| WhatsApp | Conversazioni (se attivo) |
| Note Interne | Note visibili solo a te |

#### Tab: Analytics

Grafici e statistiche:
- Engagement nel tempo
- Completamento lezioni per settimana
- Pattern di accesso
- Aree di forza/debolezza

### 6.3 Creare un Nuovo Cliente

**Procedura:**
1. Dalla lista clienti, clicca "Nuovo Cliente"
2. Compila i dati obbligatori:
   - Nome (campo unico o nome + cognome)
   - Email (deve essere valida e unica)
3. Compila i dati opzionali:
   - Telefono (per WhatsApp)
   - Foto profilo
   - Obiettivi
   - Note iniziali
4. Scegli se assegnare subito un corso
5. Clicca "Crea Cliente"

**Cosa succede dopo:**
- Il cliente riceve email con credenziali
- Appare nella tua lista
- Pu√≤ fare login e vedere i contenuti assegnati

### 6.4 Assegnare Contenuti

**Assegnare un Corso:**
1. Apri il profilo del cliente
2. Tab "Percorso" ‚Üí "Assegna Corso"
3. Seleziona il corso dalla lista
4. Imposta deadline (opzionale)
5. Conferma

**Assegnare un Esercizio:**
1. Apri il profilo del cliente
2. Tab "Percorso" ‚Üí "Assegna Esercizio"
3. Seleziona l'esercizio template
4. Imposta deadline
5. Aggiungi note specifiche (opzionale)
6. Conferma

### 6.5 Best Practices Gestione Clienti

**‚úÖ Cosa fare:**
- Revisiona esercizi entro 24-48 ore
- Scrivi feedback costruttivo e specifico
- Usa l'AI per preparare le consulenze
- Monitora l'engagement settimanalmente
- Festeggia i progressi (l'AI pu√≤ aiutarti)

**‚ùå Cosa evitare:**
- Lasciare esercizi in attesa per giorni
- Feedback generico tipo "Bene, continua cos√¨"
- Ignorare pattern di disengagement
- Non prepararsi alle consulenze

---

## Capitolo 7: Comunicazione e Lead Management

### 7.1 HUB Lead: Il Centro di Controllo

**Dove trovarlo:** `Sidebar ‚Üí COMUNICAZIONE ‚Üí HUB Lead`

Il Lead Hub √® il quartier generale per l'acquisizione clienti. Visualizza il flusso completo:

```
LEAD ‚Üí CAMPAGNE ‚Üí TEMPLATE ‚Üí AUTOMAZIONI ‚Üí CONVERSIONE
```

### 7.2 Gestione Lead

**Dove:** `Sidebar ‚Üí COMUNICAZIONE ‚Üí HUB Lead ‚Üí Lead Proattivi`

#### Struttura di un Lead

Ogni lead ha queste informazioni:

| Campo | Descrizione |
|-------|-------------|
| Nome | Nome completo |
| Telefono | Formato internazionale (+39...) |
| Email | Indirizzo email |
| Fonte | Da dove viene (webinar, ads, referral) |
| Stato | Pending ‚Üí Contacted ‚Üí Responded ‚Üí Converted/Lost |
| Score | Punteggio automatico (0-100) |
| Campagna | A quale campagna appartiene |
| Tag | Etichette personalizzate |

#### Importare Lead da File

**Scenario:** *Hai fatto un webinar con 150 partecipanti. Vuoi contattarli tutti.*

1. Esporta la lista dal sistema webinar (CSV o Excel)
2. Vai su `HUB Lead ‚Üí Lead Proattivi ‚Üí Importa`
3. Carica il file
4. Il sistema riconosce le colonne automaticamente
5. Se necessario, mappa manualmente (es: "full_name" ‚Üí "Nome")
6. Scegli come gestire duplicati:
   - **Salta**: Non importare se esiste gi√†
   - **Aggiorna**: Sovrascrivi con nuovi dati
7. Clicca "Importa"

**Formato file richiesto:**
| Colonna | Obbligatorio | Note |
|---------|--------------|------|
| nome | ‚úÖ | Pu√≤ essere nome+cognome insieme |
| telefono | ‚úÖ | Formato: +39xxxxxxxxxx |
| email | ‚ùå | Utile per follow-up email |

#### Lead Scoring Automatico

Il sistema assegna punti automaticamente:

| Azione | Punti |
|--------|-------|
| Lead importato | +10 |
| Risponde al messaggio | +20 |
| Risposta positiva | +30 |
| Clicca su link | +15 |
| Prenota appuntamento | +50 |
| Ogni giorno di silenzio | -5 |
| Risposta negativa | -20 |

**Lead con score > 70**: Prioritari, contattali subito
**Lead con score 40-70**: Tiepidi, nurtura con contenuti
**Lead con score < 40**: Freddi, considera riattivazione o rimozione

### 7.3 Campagne Marketing

**Dove:** `Sidebar ‚Üí COMUNICAZIONE ‚Üí HUB Lead ‚Üí Campagne` (o `/consultant/campaigns`)

Una campagna raggruppa lead con un obiettivo comune.

#### Creare una Campagna

**Scenario:** *Vuoi contattare i 150 lead del webinar per proporre una discovery call.*

1. Clicca "Nuova Campagna"
2. **Nome**: "Lead Webinar Dicembre 2025"
3. **Uncino**: "Ho visto che hai partecipato al webinar sulla gestione finanziaria"
   - L'uncino √® CRUCIALE: viene usato in tutti i messaggi
4. **Descrizione offerta**: "Discovery call gratuita di 30 minuti"
5. **Seleziona Lead**: Scegli i 150 lead importati
6. **Template**: Seleziona il template WhatsApp approvato
7. **Agente**: Collega l'agente AI che gestir√† le risposte
8. **Salva**

#### Avviare una Campagna

Prima di avviare, usa SEMPRE il Dry Run:

1. Attiva "Modalit√† Test"
2. Clicca "Simula Invio"
3. Verifica:
   - Il messaggio appare corretto?
   - Le variabili sono sostituite bene?
   - L'agente √® collegato?
4. Disattiva "Modalit√† Test"
5. Clicca "Avvia Campagna"

**Cosa succede quando avvii:**
- I messaggi partono gradualmente (non tutti insieme)
- Ogni risposta viene gestita dall'agente AI
- Puoi monitorare in tempo reale

### 7.4 Automazioni

**Dove:** `Sidebar ‚Üí COMUNICAZIONE ‚Üí HUB Lead ‚Üí Automazioni`

Le automazioni sono regole "SE... ALLORA..." che agiscono automaticamente.

#### Struttura di un'Automazione

```
TRIGGER (Quando)
    ‚Üì
CONDIZIONI (Se)
    ‚Üì
AZIONE (Allora)
```

#### Automazioni Comuni

**1. Follow-up 3 Giorni**
```
Trigger: Lead non risponde da 3 giorni
Condizione: Stato = "Contacted"
Azione: Invia messaggio follow-up
```

**2. Benvenuto Nuovo Lead**
```
Trigger: Lead importato
Condizione: Nessuna
Azione: Dopo 1 ora, invia messaggio benvenuto
```

**3. Notifica Lead Caldo**
```
Trigger: Lead risponde positivamente
Condizione: Score > 70
Azione: Notifica push immediata al consulente
```

**4. Re-engagement Settimanale**
```
Trigger: Lead fermo da 7 giorni
Condizione: Non ha mai prenotato
Azione: Invia messaggio con contenuto di valore
```

**5. Escalation a Umano**
```
Trigger: Lead chiede di parlare con persona
Condizione: Contiene parole "persona", "umano", "operatore"
Azione: Assegna a consulente, pausa agente AI
```

---

## Capitolo 8: WhatsApp Business e Agenti AI

### 8.1 Dashboard Agenti

**Dove trovarlo:** `Sidebar ‚Üí COMUNICAZIONE ‚Üí I tuoi dipendenti`

Questa √® la centrale di controllo per i tuoi "dipendenti virtuali".

#### Statistiche in Alto

| Metrica | Cosa Mostra |
|---------|-------------|
| Messaggi Oggi | Messaggi scambiati nelle ultime 24h |
| Conversazioni Attive | Chat con risposte recenti |
| Tasso Risposta | % di messaggi che ricevono risposta |
| Lead Convertiti | Lead che hanno prenotato o acquistato |

#### Lista Agenti

Per ogni agente vedi:
- Nome e tipo
- Stato (Attivo/Pausa)
- Conversazioni gestite (oggi/totale)
- Performance (% risposte positive)

### 8.2 Configurazione Approfondita Agente

**Dove:** Clicca su un agente dalla lista

#### Tab: Informazioni Base

| Campo | Descrizione | Esempio |
|-------|-------------|---------|
| Nome | Come si chiama | "Marco" |
| Tipo | Inbound/Outbound/Consultivo | Inbound |
| Descrizione | Cosa fa | "Qualifica lead webinar" |
| Stato | Attivo o in pausa | Attivo |

#### Tab: Personalit√† (CRUCIALE)

Qui definisci il "carattere" dell'agente. Pi√π dettagliato sei, meglio funziona.

**Esempio di personalit√† MEDIOCRE:**
```
Sei un assistente che risponde ai messaggi.
```

**Esempio di personalit√† ECCELLENTE:**
```
Sei Marco, il primo punto di contatto per chi √® interessato ai nostri servizi di consulenza finanziaria.

BACKGROUND:
- Lavori nell'azienda da 3 anni
- Hai aiutato centinaia di persone a iniziare il loro percorso
- Sei appassionato di finanza personale

COME PARLI:
- Usi il "tu", mai il "Lei"
- Sei amichevole ma professionale
- Fai domande aperte, non interrogatori
- Usi emoji con moderazione (1-2 per messaggio max)
- Mai pi√π di 3-4 frasi per messaggio

COSA NON FAI MAI:
- Non riveli mai di essere un'AI
- Non fai pressione per vendere
- Non prometti risultati specifici
- Non parli di prezzi (rimandi al consulente)
- Non invii link esterni a meno che non sia richiesto

GESTIONE OBIEZIONI:
- "Non ho tempo": "Capisco perfettamente! Per questo offriamo sessioni flessibili, anche di 30 minuti. Quando ti troveresti meglio?"
- "Costa troppo": "√à una preoccupazione comprensibile. Prima di parlare di investimento, che ne dici di una call conoscitiva gratuita per capire se possiamo davvero aiutarti?"
- "Devo pensarci": "Certo, prenditi il tempo che ti serve. Posso inviarti nel frattempo un articolo che potrebbe interessarti?"
```

#### Tab: Script Conversazione

Definisci il flusso ideale:

**STEP 1 - APERTURA (0-2 messaggi)**
```
Obiettivo: Ingaggiare e creare connessione
Trigger: Primo messaggio del lead
Esempio risposta: "Ciao [nome]! üëã Grazie per averci scritto. Ho visto che hai [trigger]. Cosa ti ha incuriosito di pi√π?"
```

**STEP 2 - QUALIFICA (2-5 messaggi)**
```
Obiettivo: Capire se √® in target
Domande da fare:
1. Qual √® la tua situazione attuale riguardo a [topic]?
2. Cosa vorresti migliorare nei prossimi 6 mesi?
3. Hai gi√† provato altre soluzioni?
Segnali positivi: Risponde con dettagli, fa domande, mostra urgenza
Segnali negativi: Risposte monosillabiche, resistenza, chiede solo prezzo
```

**STEP 3 - PROPOSTA (5-7 messaggi)**
```
Obiettivo: Proporre la call
Trigger: Lead sembra qualificato
Messaggio: "Da quello che mi racconti, penso che [consulente] potrebbe davvero aiutarti con [problema specifico]. Ti andrebbe una call conoscitiva di 30 minuti? √à gratuita e senza impegno."
```

**STEP 4 - BOOKING (7-10 messaggi)**
```
Obiettivo: Fissare l'appuntamento
Se accetta: "Perfetto! üìÖ Ti mando il link per scegliere il giorno e l'ora che preferisci: [link calendario]"
Se esita: "Capisco, nessuna pressione. Posso tenerti aggiornato con contenuti utili nel frattempo?"
```

#### Tab: Cervello AI

Seleziona quali documenti dal Cervello AI l'agente pu√≤ consultare:

| Tipo Documento | Quando Usarlo |
|----------------|---------------|
| FAQ Aziendali | Domande frequenti sui servizi |
| Pricing (se abilitato) | Solo se vuoi che parli di prezzi |
| Casi Studio | Per mostrare risultati |
| Articoli/Guide | Per condividere valore |

#### Tab: Configurazioni Avanzate

| Impostazione | Descrizione | Valore Consigliato |
|--------------|-------------|-------------------|
| Orari Attivit√† | Quando pu√≤ rispondere | Lun-Ven 8-20, Sab 9-13 |
| Delay Risposta | Secondi prima di rispondere | 3-8 secondi |
| Fuori Orario | Cosa fare | "Grazie per il messaggio! Ti risponder√≤ domani mattina." |
| Escalation | Quando passare a umano | Dopo 10 messaggi o su richiesta esplicita |

### 8.3 Template WhatsApp Approfondimento

#### Categorie Template

| Categoria | Uso | Approvazione |
|-----------|-----|--------------|
| Marketing | Promozioni, offerte | Pi√π restrittiva |
| Utility | Notifiche, conferme | Pi√π facile |
| Authentication | Codici, verifica | Automatica |

#### Variabili Disponibili

| Variabile | Sostituita Con |
|-----------|----------------|
| {{1}} | Primo parametro (solitamente nome) |
| {{2}} | Secondo parametro |
| {{3}} | Terzo parametro |
| {{4}} | Quarto parametro (fino a 10) |

#### Esempi di Template Approvabili

**Template: Primo Contatto Post-Webinar**
```
Ciao {{1}}! üëã

Sono Marco di [Azienda]. Ho visto che hai partecipato al nostro webinar "{{2}}".

Volevo chiederti: c'√® qualcosa in particolare su cui vorresti approfondire?
```

**Template: Follow-up 3 Giorni**
```
Ciao {{1}}, come stai?

Qualche giorno fa ci siamo sentiti riguardo a {{2}}.

Volevo sapere se hai avuto modo di rifletterci. Sono qui se hai domande! üòä
```

**Template: Conferma Appuntamento**
```
Ciao {{1}}! ‚úÖ

Confermo il nostro appuntamento per {{2}} alle {{3}}.

Ecco il link per la videochiamata: {{4}}

A presto!
```

### 8.4 Gestire le Conversazioni

**Dove:** Clicca il pulsante "Chat Agenti" in **alto a destra** nella pagina `Sidebar ‚Üí COMUNICAZIONE ‚Üí I tuoi dipendenti`

Questo ti porta a `/consultant/whatsapp-agents-chat` dove puoi:
- Vedere tutte le conversazioni attive
- Filtrare per agente, stato, data
- Leggere i messaggi scambiati
- Intervenire manualmente (prendere il controllo)
- Passare da AI a umano e viceversa

#### Intervento Manuale

Quando intervenire:
- Il lead chiede esplicitamente una persona
- La conversazione si complica
- Hai un'obiezione che l'AI non gestisce bene
- Vuoi chiudere personalmente un lead importante

**Come fare:**
1. Clicca sulla conversazione
2. Clicca "Prendi Controllo"
3. L'agente AI si mette in pausa
4. Scrivi i tuoi messaggi
5. Quando vuoi, clicca "Restituisci a AI"

---

## Capitolo 9: Contenuti Formativi e Universit√†

### 9.1 Panoramica Formazione

**Dove trovarlo:** `Sidebar ‚Üí FORMAZIONE ‚Üí Universit√†`

La sezione Formazione ti permette di creare un'esperienza educativa completa per i tuoi clienti.

### 9.2 Struttura dei Contenuti

```
CORSO (es: "Gestione Finanziaria")
‚îú‚îÄ‚îÄ MODULO 1 (es: "Fondamenti")
‚îÇ   ‚îú‚îÄ‚îÄ Lezione 1.1 (es: "Cos'√® un budget")
‚îÇ   ‚îú‚îÄ‚îÄ Lezione 1.2 (es: "Tracciare le spese")
‚îÇ   ‚îî‚îÄ‚îÄ Lezione 1.3 (es: "Obiettivi finanziari")
‚îú‚îÄ‚îÄ MODULO 2 (es: "Risparmio")
‚îÇ   ‚îú‚îÄ‚îÄ Lezione 2.1
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ MODULO 3 (es: "Investimenti")
    ‚îî‚îÄ‚îÄ ...
```

### 9.3 Creare un Corso Manualmente

1. `Sidebar ‚Üí FORMAZIONE ‚Üí Universit√†`
2. Clicca "Nuovo Corso"
3. **Titolo**: Nome del corso
4. **Descrizione**: Di cosa parla
5. **Immagine**: Copertina (consigliata 16:9)
6. **Livello**: Principiante/Intermedio/Avanzato
7. Salva

**Aggiungere Moduli:**
1. Apri il corso
2. Clicca "Nuovo Modulo"
3. Inserisci titolo e descrizione
4. Ripeti per ogni modulo

**Aggiungere Lezioni:**
1. Apri un modulo
2. Clicca "Nuova Lezione"
3. **Titolo**: Nome della lezione
4. **Contenuto**: Editor rich-text con:
   - Testo formattato
   - Immagini
   - Video embed
   - Link
5. Salva

### 9.4 AI Course Builder: Creare Corsi dai Video

**Scenario:** *Hai 10 video YouTube con le tue lezioni. Vuoi trasformarli in un corso strutturato.*

**Procedura:**

**Step 1: Avviare il Builder**
1. `Sidebar ‚Üí FORMAZIONE ‚Üí Universit√†`
2. Clicca "AI Course Builder"

**Step 2: Inserire i Video**
1. Incolla i link YouTube (uno per riga)
2. Clicca "Analizza Video"
3. Attendi l'elaborazione (2-5 min per video)

**Step 3: Revisione Trascrizioni**
Se un video non ha trascrizione automatica:
- Il sistema mostra un avviso
- Puoi inserire la trascrizione manualmente
- Oppure escludere il video

**Step 4: Generazione Lezioni**
1. Clicca "Genera Lezioni"
2. L'AI analizza le trascrizioni
3. Genera lezioni strutturate con:
   - Titolo estratto dal contenuto
   - Testo formattato
   - Punti chiave evidenziati
   - Sezioni logiche

**Step 5: Organizzazione in Moduli**
Tre opzioni:
- **Modulo Singolo**: Tutte le lezioni insieme
- **Manuale**: Tu decidi come raggrupparle
- **AI Auto**: L'AI suggerisce raggruppamenti tematici

**Step 6: Personalizzazione**
- Rivedi ogni lezione generata
- Modifica testo, titoli, formattazione
- Aggiungi contenuti extra
- Riordina le lezioni

**Step 7: Pubblicazione**
1. Scegli un tema visivo (5 disponibili)
2. Imposta titolo e descrizione corso
3. Clicca "Pubblica"
4. Il corso √® pronto per essere assegnato

### 9.5 Esercizi e Template

**Dove:** `Sidebar ‚Üí FORMAZIONE ‚Üí Template` (per creare) e `Sidebar ‚Üí FORMAZIONE ‚Üí Esercizi` (per revisionare)

#### Creare un Template Esercizio

1. `Sidebar ‚Üí FORMAZIONE ‚Üí Template`
2. Clicca "Nuovo Template"
3. **Titolo**: Es. "Analisi del Budget Mensile"
4. **Tipo**: Risposta aperta / Quiz / Upload / Checklist
5. **Istruzioni**: Spiega cosa deve fare il cliente
6. **Collegamento**: Associa a un corso/lezione (opzionale)
7. Salva

**Esempio di istruzioni ben scritte:**

*Template: "Diario delle Spese Settimanale"*
```
üìù ISTRUZIONI

In questo esercizio analizzerai le tue spese dell'ultima settimana.

COSA FARE:
1. Scarica il template Excel allegato
2. Inserisci TUTTE le spese degli ultimi 7 giorni
3. Categorizzale (Cibo, Trasporti, Svago, Bollette, Altro)
4. Calcola i totali per categoria
5. Rispondi alle domande di riflessione qui sotto

DOMANDE:
- Quale categoria ti ha sorpreso di pi√π? Perch√©?
- Identifichi almeno 3 spese che potevi evitare?
- Cosa farai diversamente la prossima settimana?

‚è∞ TEMPO STIMATO: 30-45 minuti
üìÖ SCADENZA: Domenica sera
```

#### Revisionare Esercizi Consegnati

**Dove:** `Sidebar ‚Üí FORMAZIONE ‚Üí Esercizi`

1. Vedi la lista degli esercizi consegnati
2. Filtra per "Da revisionare"
3. Clicca su un esercizio
4. Leggi la risposta del cliente
5. Scrivi il tuo feedback
6. Assegna un voto (opzionale)
7. Clicca "Approva" o "Richiedi Correzioni"

**Best Practices Feedback:**

‚ùå **Feedback scarso:**
```
"Bene, continua cos√¨."
```

‚úÖ **Feedback efficace:**
```
Ottimo lavoro sull'analisi delle spese! üëè

PUNTI DI FORZA:
- Hai categorizzato correttamente tutte le spese
- La riflessione sulla categoria "Svago" √® molto lucida

AREE DI MIGLIORAMENTO:
- Potresti essere pi√π specifico sul "cosa farai diversamente"
- Prova a quantificare: "risparmier√≤ X euro su Y"

PROSSIMO PASSO:
Nella prossima settimana, monitora in tempo reale usando l'app che ti ho suggerito nella lezione 2.3.

Continua cos√¨! üí™
```

### 9.6 Libreria Corsi

**Dove:** `Sidebar ‚Üí FORMAZIONE ‚Üí Corsi`

Vista a griglia di tutti i tuoi corsi con:
- Card con immagine e titolo
- Numero di iscritti
- Stato (Bozza/Pubblicato/Archiviato)
- Azioni rapide (Modifica, Duplica, Archivia)

---

## Capitolo 10: Cervello AI ‚Äì Memoria & Documenti

### 10.1 Cos'√® il Cervello AI

Il Cervello AI (precedentemente "Knowledge Base") √® l'archivio centrale di documenti, memorie e istruzioni che l'AI usa per rispondere alle domande e operare autonomamente. Pi√π documenti carichi e pi√π istruzioni configuri, pi√π intelligenti e accurate saranno le risposte e le azioni dell'AI.

**Dove:** `Sidebar ‚Üí CERVELLO AI ‚Üí Memoria & Documenti`
**URL:** `/consultant/knowledge-documents`

La pagina √® organizzata in **5 tab** principali:

| Tab | Funzione | Descrizione |
|-----|----------|-------------|
| **Guida** | Panoramica | Spiega come funziona ogni sezione del Cervello AI |
| **Documenti** | Archivio file | Upload e gestione di tutti i tuoi documenti (PDF, DOCX, CSV, Excel, audio, testo) |
| **Istruzioni AI** | Regole personalizzate | Istruzioni dirette che modificano il comportamento dell'AI |
| **Agenti AI** | Memoria dipendenti | Assegna documenti specifici a ciascuno degli 8 agenti AI autonomi |
| **Google Drive** | Importazione | Importa documenti da Google Drive con sincronizzazione automatica |

---

### 10.2 Tab Guida

La tab Guida mostra 4 card informative che spiegano come funziona ogni sezione del Cervello AI:

**Come funziona il flusso:**
1. I **Documenti** che carichi vanno **sempre** al tuo AI Assistant del consulente
2. Se vuoi che anche un dipendente autonomo li usi, vai nella tab **Agenti AI** e assegnali esplicitamente
3. Le **Istruzioni AI** sono regole che puoi indirizzare a destinatari specifici (AI Assistant, agenti autonomi, agenti WhatsApp)
4. **Google Drive** tiene tutto sincronizzato con i tuoi file esistenti

---

### 10.3 Tab Documenti

Questa √® la tab principale per caricare, organizzare e gestire i tuoi documenti.

#### Formati supportati

| Formato | Estensioni |
|---------|-----------|
| Documenti di testo | PDF, DOCX, TXT, MD, RTF, ODT |
| Fogli di calcolo | CSV, XLSX, XLS |
| Presentazioni | PPTX |
| Audio | MP3, WAV, M4A, OGG, WEBM |

**Limite:** 50 MB per file.

#### Pannello Cartelle (sidebar sinistra su desktop)

- **Tutti i documenti**: mostra il conteggio totale
- **Cartelle personalizzate**: crea cartelle con nome e colore per organizzare i documenti
- **Crea cartella**: pulsante "+" per creare una nuova cartella
- Ogni cartella mostra il conteggio documenti contenuti
- Clicca su una cartella per filtrare la vista

#### Area Upload

Ci sono 3 modi per aggiungere documenti:

| Metodo | Come funziona |
|--------|---------------|
| **Drag & Drop** | Trascina un file nell'area di upload sulla sinistra |
| **Click** | Clicca sull'area di upload per selezionare un file dal computer |
| **Incolla Testo** | Pulsante "Incolla Testo" per aggiungere contenuto testuale direttamente |

**Procedura upload:**
1. Trascina o seleziona un file
2. Si apre un dialogo con i campi:
   - **Titolo** (obbligatorio): nome del documento
   - **Descrizione** (opzionale): breve descrizione
   - **Categoria**: White Paper, Case Study, Manuale, Normativa, Ricerca, Articolo, Altro
   - **Priorit√†** (1-10): slider per impostare la priorit√† di utilizzo dall'AI
3. Clicca "Carica" per avviare l'upload
4. Il sistema estrae automaticamente il testo e lo indicizza

#### Vista Documenti

Due modalit√† di visualizzazione:
- **Lista**: vista compatta con dettagli in righe
- **Griglia**: vista card con anteprime

I documenti sono raggruppati in 3 sezioni collassabili:

| Sezione | Descrizione |
|---------|-------------|
| **Documenti di Sistema (Solo per me)** | Documenti assegnati dall'admin, in sola lettura |
| **Documenti Google Drive** | File importati da Google Drive con sincronizzazione |
| **Documenti Caricati** | File caricati manualmente |

#### Filtri e Ricerca

- **Barra di ricerca**: cerca per titolo o contenuto
- **Filtro Categoria**: filtra per tipo (White Paper, Case Study, ecc.)
- **Filtro Stato**: Indicizzato, In elaborazione, Errore

#### Azioni sui Documenti

| Azione | Descrizione |
|--------|-------------|
| **Anteprima** | Mostra contenuto estratto, riassunto AI, tag, metadati |
| **Modifica** | Cambia titolo, descrizione, categoria, priorit√† |
| **Elimina** | Rimuove il documento definitivamente |
| **Chiedimi qualcosa** | Apre l'AI Assistant pre-caricato con il contesto del documento |
| **Riassunto AI** | Toggle per attivare/disattivare il riassunto automatico |
| **Tag personalizzati** | Aggiungi/rimuovi tag per organizzazione |

#### Azioni Bulk (selezione multipla)

Seleziona pi√π documenti per:
- **Seleziona tutti** / **Deseleziona**
- **Sposta**: sposta i documenti in una cartella diversa
- **Elimina**: eliminazione multipla

#### Anteprima Documenti Tabulari (CSV/Excel)

Per file CSV e Excel, l'anteprima mostra:
- Griglia con intestazioni colonne
- Conteggio righe e colonne
- Navigazione pagine per dataset grandi
- Tab per fogli multipli (file Excel con pi√π sheet)

#### Cosa caricare

| Tipo Documento | Esempio | Utilit√† |
|----------------|---------|---------|
| FAQ | "Domande frequenti servizi.pdf" | L'AI risponde alle domande comuni |
| Procedure | "Come funziona il programma.docx" | L'AI spiega i processi |
| Materiali Formativi | "Guida al budget.pdf" | Integra le lezioni |
| Casi Studio | "Caso cliente Marco.pdf" | Mostra esempi reali |
| Articoli | "I 10 errori finanziari.docx" | Contenuti di valore |
| Listini Prezzi | "Prezzi 2025.xlsx" | L'AI risponde su costi e offerte |
| Manuali Prodotto | "Guida prodotto.pdf" | Supporto tecnico automatico |

---

### 10.4 Tab Istruzioni AI

**Cosa sono:** Le Istruzioni AI sono regole personalizzate che dici all'AI di seguire. Sono istruzioni dirette che modificano il comportamento dell'intelligenza artificiale.

#### Tipi di Iniezione

| Modalit√† | Descrizione | Quando usarla |
|----------|-------------|---------------|
| **System Prompt** | Sempre in memoria, iniettata direttamente nel prompt di sistema | Istruzioni brevi e critiche che devono essere sempre rispettate |
| **File Search** | Cercata solo quando serve, tramite ricerca semantica | Testi lunghi, procedure dettagliate, documentazione estesa |

#### Destinatari (Targeting)

Ogni istruzione pu√≤ essere indirizzata a destinatari specifici:

| Destinatario | Descrizione |
|-------------|-------------|
| **AI Assistant del consulente** | Il tuo chat assistant personale |
| **Tutti** | Tutti i clienti e dipendenti |
| **Solo consulente** | Solo per te |
| **Solo clienti** | Solo per gli AI assistant dei clienti |
| **Solo dipendenti** | Solo per i dipendenti AI |
| **Clienti specifici** | Seleziona singoli clienti |
| **Reparti specifici** | Seleziona reparti aziendali |
| **Dipendenti specifici** | Seleziona dipendenti AI specifici |
| **Agenti Autonomi** | Seleziona quali dei tuoi 8 agenti AI (Alessia, Millie, Echo, Nova, Stella, Iris, Marco, Personalizza) ricevono l'istruzione |
| **Agenti WhatsApp** | Seleziona gli agenti WhatsApp che ricevono l'istruzione |

#### Creazione Istruzione AI

1. Clicca "Nuova Istruzione"
2. Compila i campi:
   - **Titolo**: nome descrittivo
   - **Contenuto**: il testo dell'istruzione (puoi scrivere manualmente, incollare testo, o importare da Google Drive)
   - **Descrizione** (opzionale)
   - **Modalit√† iniezione**: System Prompt o File Search
   - **Priorit√†** (1-10)
   - **Destinatari**: seleziona a chi inviare l'istruzione
3. Attiva/disattiva l'istruzione con il toggle

**Esempi di istruzioni efficaci:**
- "Rispondi sempre in italiano formale"
- "Non offrire sconti oltre il 10%"
- "Quando un cliente chiede dei prezzi, indirizzalo sempre al listino aggiornato"
- "Per le domande tecniche, suggerisci di prenotare una consulenza"

---

### 10.5 Tab Agenti AI

La tab Agenti AI gestisce la **memoria dei dipendenti autonomi**. Qui assegni documenti specifici a ciascuno degli 8 agenti AI, dando a ognuno le conoscenze di cui ha bisogno per svolgere il proprio ruolo.

#### I tuoi 8 Agenti AI

| Agente | Ruolo | Specializzazione |
|--------|-------|-----------------|
| **Alessia** | Voice Consultant | Chiamate AI proattive e follow-up vocale |
| **Millie** | Financial Analyst | Analisi finanziaria e report automatici |
| **Echo** | Client Listener | Monitoraggio sentiment e ascolto attivo |
| **Nova** | Content Creator | Creazione contenuti e marketing |
| **Stella** | Engagement Specialist | Engagement clienti e nurturing |
| **Iris** | Data Insights | Analisi dati e insight strategici |
| **Marco** | Executive Assistant | Assistente esecutivo e organizzazione |
| **Personalizza** | Custom Agent | Agente personalizzabile secondo le tue esigenze |

#### Come Assegnare Documenti

1. Clicca su un agente dalla griglia
2. Si apre un dialogo con due sezioni:
   - **Documenti Assegnati**: documenti gi√† assegnati a quell'agente (con possibilit√† di rimuoverli)
   - **Documenti Disponibili**: tutti i documenti indicizzati non ancora assegnati (con barra di ricerca)
3. Clicca "+" per assegnare un documento
4. Clicca "-" per rimuovere un documento

**Principio chiave:** Ogni agente accede SOLO ai documenti che gli assegni. Questo permette di dare conoscenze specializzate a ciascun agente.

**Esempio pratico:**
- Assegna il **listino prezzi** a Marco (vendite)
- Assegna le **procedure HR** a Millie (analisi)
- Assegna i **contenuti marketing** a Nova (content)

---

### 10.6 Tab Google Drive

Importa documenti direttamente da Google Drive senza doverli scaricare e ricaricare.

#### Funzionalit√†

| Funzione | Descrizione |
|----------|-------------|
| **Sfoglia cartelle** | Naviga le tue cartelle Google Drive direttamente dalla piattaforma |
| **Importa come Documento** | Importa il file come documento nel Cervello AI |
| **Importa come Istruzione AI** | Importa il file come istruzione AI per il system prompt |
| **Sincronizzazione automatica** | Quando modifichi il file su Drive, il contenuto si aggiorna automaticamente nella piattaforma |
| **Cronologia sync** | Visualizza lo storico delle sincronizzazioni con dettagli su caratteri estratti, token, durata |

**Formati supportati da Drive:** Google Docs, Google Sheets, PDF, e altri formati compatibili.

**Prerequisito:** Devi avere configurato le credenziali Google Drive nelle API Keys (`Sidebar ‚Üí IMPOSTAZIONI ‚Üí API Keys`).

### 10.4 AI Assistant per Consulenti

**Dove:** `Sidebar ‚Üí PRINCIPALE ‚Üí AI Assistant`

L'AI Assistant √® il tuo collaboratore sempre disponibile.

#### Cosa Puoi Chiedere

**Analisi Clienti:**
```
"Analizza la situazione di Mario Rossi"
‚Üí L'AI genera un report con: progressi, engagement, suggerimenti
```

**Preparazione Consulenze:**
```
"Prepara il brief per la consulenza con Laura di domani"
‚Üí L'AI riassume: ultimo incontro, esercizi fatti, obiettivi, suggerimenti
```

**Generazione Email:**
```
"Scrivi un'email di follow-up per Giovanni che non completa gli esercizi"
‚Üí L'AI scrive un'email empatica e motivazionale
```

**Suggerimenti Formativi:**
```
"Che esercizio posso assegnare a un cliente che fatica con il budget?"
‚Üí L'AI propone esercizi dalla tua libreria o ne suggerisce di nuovi
```

**Domande sulla Piattaforma:**
```
"Come faccio a creare un template WhatsApp?"
‚Üí L'AI ti guida passo-passo (usando questo manuale!)
```

### 10.5 Preferenze AI

Clicca l'icona ‚öôÔ∏è nell'header della chat per personalizzare:

**Stili di Scrittura:**

| Stile | Descrizione |
|-------|-------------|
| Predefinito | Naturale e bilanciato |
| Professionale | Formale e preciso |
| Amichevole | Espansivo e caloroso |
| Schietto | Diretto e incoraggiante |
| Eccentrico | Vivace e fantasioso |
| Efficiente | Essenziale e semplice |
| Nerd | Curioso e approfondito |
| Cinico | Critico e sarcastico |
| Personalizzato | Le tue istruzioni specifiche |

**Lunghezza Risposte:**
- Breve: Risposte concise, solo l'essenziale
- Bilanciata: Via di mezzo (default)
- Completa: Risposte dettagliate e approfondite

### 10.6 Selezione Agente nell'AI Assistant

Se hai creato agenti WhatsApp, puoi usarli anche nella chat:

1. Apri l'AI Assistant
2. Clicca sul dropdown nell'header
3. Seleziona un agente

**Perch√© farlo:**
- Testare l'agente senza usare WhatsApp
- Usare l'agente come assistente specializzato
- Condividere l'agente con clienti specifici

### 10.7 File Search Analytics

**Dove:** `Sidebar ‚Üí AI AVANZATO ‚Üí File Search`

Monitora come l'AI usa i tuoi documenti:
- Documenti pi√π consultati
- Query pi√π frequenti
- Gap di contenuto (domande senza risposta)
- Suggerimenti per nuovi documenti

---

## Capitolo 11: Email Marketing e Automazioni

### 11.1 Email Journey

**Dove trovarlo:** `Sidebar ‚Üí LAVORO QUOTIDIANO ‚Üí Email Journey`

L'Email Journey √® un sistema di email automatiche che accompagna i clienti nei primi 31 giorni del percorso.

#### Come Funziona

```
Giorno 1-10 (EARLY):    Onboarding, prime azioni, creazione abitudine
Giorno 11-20 (MID):     Consolidamento, sfide, supporto
Giorno 21-31 (LATE):    Autonomia, risultati, next steps
```

Ogni giorno il sistema pu√≤ inviare un'email con:
- Contenuto educativo
- Azioni suggerite
- Motivazione
- Link a risorse

### 11.2 Configurare il Journey

1. Vai su `Sidebar ‚Üí LAVORO QUOTIDIANO ‚Üí Email Journey`
2. Per ogni giorno, puoi:
   - Attivare/disattivare l'email
   - Personalizzare il contenuto
   - Scegliere il template

**Esempio Email Giorno 1:**
```
Oggetto: Benvenuto nel tuo percorso! üöÄ

Ciao {{nome}},

Sono entusiasta di iniziare questo percorso insieme a te!

PRIMA COSA DA FARE:
‚Üí Accedi alla piattaforma
‚Üí Completa la prima lezione del corso "Fondamenti"

Ci vogliono solo 10 minuti e ti dar√† una base solida per tutto il resto.

Hai domande? L'AI Assistant √® disponibile 24/7 nella tua dashboard.

A domani con il secondo step!

[Firma]
```

### 11.3 Monitoraggio Journey

La dashboard mostra:
- Clienti per fase (Early/Mid/Late)
- Email inviate vs aperte
- Azioni suggerite vs completate
- Clienti in difficolt√† (non aprono email)

### 11.4 Abilitazione per Cliente

Puoi abilitare/disabilitare il journey per singolo cliente:

1. Vai al profilo del cliente
2. Tab "Comunicazioni"
3. Toggle "Email Journey Automatico"

**Quando disabilitare:**
- Cliente che preferisce meno email
- Cliente gi√† avanzato nel percorso
- Pausa temporanea

### 11.5 Email Hub

**Dove trovarlo:** `Sidebar ‚Üí COMUNICAZIONE ‚Üí Email Hub`

Gestisci tutte le email in un'unica interfaccia con risposte AI.

#### Interfaccia

**Pulsanti** (alto a destra):
- **Nuova Email** - Apre il composer per scrivere email
- **Sincronizza** - Aggiorna le email dagli account collegati

**Sidebar sinistra** - Cartelle:
- **Inbox** - Email in arrivo
- **AI Drafts** - Bozze generate dall'AI
- **Starred** - Email con stella
- **Sent** - Email inviate
- **Drafts** - Bozze manuali
- **Trash** - Cestino

#### AI Drafts: Risposte Automatiche

L'AI genera automaticamente bozze di risposta per le email ricevute.

Per ogni bozza puoi:
| Azione | Cosa Fa |
|--------|---------|
| **Approva** | Accetta la bozza cos√¨ com'√® |
| **Modifica** | Edita il testo prima di inviare |
| **Rifiuta** | Scarta la bozza generata |
| **Invia** | Invia direttamente la risposta |

#### Collegare Account Email

1. Clicca "Aggiungi Account" nella sidebar
2. Inserisci credenziali IMAP/SMTP
3. L'AI inizier√† a sincronizzare le email

---

## Content Studio

Il Content Studio √® l'area dedicata alla creazione, gestione e pubblicazione di contenuti marketing per social media. Include 6 sezioni: Dashboard, Idee (AI), Contenuti, Calendario, Brand Assets, e AdVisage AI (PRO). Tutte le pagine sono accessibili dalla sidebar sotto la voce **CONTENT STUDIO**.

---

### Dashboard Content Studio

**Dove trovarlo:** `Sidebar ‚Üí CONTENT STUDIO ‚Üí Dashboard`
**URL:** `/consultant/content-studio`

La dashboard centrale mostra una panoramica completa di tutto il Content Studio.

#### 4 Card KPI (riga superiore)

| Card | Cosa misura | Icona |
|------|-------------|-------|
| **Idee Generate** | Numero totale di idee create nella sezione Idee | Lampadina (ambra) |
| **Post Pubblicati** | Numero di post con stato "pubblicato" | Documento (blu) |
| **Brand Assets** | Numero di asset del brand configurati | Palette (viola) |
| **Post Programmati** | Numero di post programmati nel calendario | Calendario (verde) |

#### Azioni Rapide

3 pulsanti gradient con navigazione diretta:

| Pulsante | Destinazione |
|----------|-------------|
| **Genera Nuova Idea** | Pagina Idee |
| **Crea Post** | Pagina Contenuti |
| **AdVisage AI** | Pagina AdVisage AI |

#### Attivita Recente

Lista delle ultime 5 attivit√† combinate (idee e post pi√π recenti, ordinate e troncate a 5). Per ogni elemento mostra:
- Titolo
- Tempo relativo (es. "2 ore fa", "1 giorno fa")
- Badge stato (Nuova, In Lavorazione, Bozza, Programmato, Pubblicato, Attiva, In Pausa)

#### Performance (card riepilogativa)

- **Performance**: mostra conteggi totali di Idee e Post creati

#### Post per Progetto

Lista di tutti i progetti (cartelle di tipo "project") con conteggio post associati (inclusi i post nelle sottocartelle). In fondo mostra quanti post non sono assegnati a nessun progetto.

#### Guida Flussi Social

Pulsante in alto a destra "Guida Flussi Social" che porta a `/consultant/guide-social-flows`.

---

### Idee (AI)

**Dove trovarlo:** `Sidebar ‚Üí CONTENT STUDIO ‚Üí Idee`
**URL:** `/consultant/content-studio/ideas`
**Badge:** AI

Genera idee per contenuti social con intelligenza artificiale. Il form utilizza un sistema a sezioni espandibili (accordion).

#### Configurazione Idea - Sezioni Accordion

**Sezione 1: Brand & Target**
| Campo | Tipo | Dettaglio |
|-------|------|-----------|
| **Argomento** | Testo libero | L'argomento principale del contenuto |
| **Pubblico Target** | Testo libero | A chi e destinato il contenuto |
| **Pulsante "Genera Nicchia"** | AI | Genera automaticamente argomento e target con Gemini |

**Sezione 2: Piattaforma & Formato**
| Campo | Opzioni |
|-------|---------|
| **Piattaforma** | Instagram, X (Twitter), LinkedIn |
| **Categoria** | Ads, Valore, Formazione, Altri |
| **Schema** | Variabile in base a piattaforma+categoria (vedi tabella sotto) |
| **Tipo Media** | Foto, Video |
| **Tipo Copy** | Corto (short), Lungo (long) |
| **Numero Idee** | Da 1 a 10 (slider) |

**Sezione 3: Livelli di Mercato**
| Campo | Livelli |
|-------|---------|
| **Awareness** | Unaware, Problem Aware, Solution Aware, Product Aware, Most Aware |
| **Sofisticazione** | Livello 1 (Mercato Vergine), Livello 2 (Primi Competitor), Livello 3 (Mercato Saturo), Livello 4 (Mercato Scettico), Livello 5 (Mercato Esausto) |
| **Pulsante "Suggerisci Livelli"** | AI analizza argomento e target per suggerire i livelli ottimali con motivazione |

**Sezione 4: Stile di Scrittura**
| Stile | Descrizione |
|-------|-------------|
| Default | Stile neutro e professionale |
| Conversazionale (Nurturing) | Tono amichevole e accogliente |
| Diretto | Dritto al punto |
| Persuasivo (Copy) | Orientato alla vendita |
| Personalizzato | Campo testo libero per istruzioni custom |

**Sezione 5: Brand Voice & Cervello AI (opzionale)**
- Toggle **Usa Brand Voice**: carica i dati Brand (Chi Sono, Tono di Voce, Note AI, Keywords, Parole da Evitare)
- Pulsante **Importa da Agente**: importa la Brand Voice da un agente WhatsApp configurato
- Toggle **Usa Cervello AI**: seleziona documenti dal Cervello AI per contestualizzare la generazione
- Upload file temporanei per contesto aggiuntivo
- Campo **Contesto Aggiuntivo**: note libere

#### Schema dei Post (POST_SCHEMAS)

Gli schemi variano per piattaforma e categoria. Ogni schema definisce una struttura specifica di sezioni che l'AI segue per generare il contenuto.

**Instagram - Ads (6 schemi)**
| Schema | Struttura |
|--------|-----------|
| Originale (Universale) | Hook, Chi-Cosa-Come, Errore, Soluzione, Riprova Sociale, CTA |
| Hook > Problema > Nuovo modo > Prova > CTA | Hook, Problema, Nuovo modo, Prova sociale, Offerta, CTA |
| Before > After > Bridge > CTA | Prima, Dopo, Ponte (processo), CTA |
| 3 Pain > 3 Benefit > Offer > Urgenza > CTA | Pain x3, Benefit x3, Offerta, Urgenza, CTA |
| Obiezione > Confutazione > Demo > CTA | Obiezione forte, Confutazione, Mini-dimostrazione, CTA |
| UGC/Founder Script (15-30s) | Chi sono, Cosa odiavo, Cosa ho cambiato, Risultato, Come farlo, CTA |

**Instagram - Valore (5 schemi)**
| Schema | Struttura |
|--------|-----------|
| Carousel Errore | Errore #1, Perche succede, Cosa fare, Esempio, Checklist, CTA soft |
| Framework in 5 Step | Hook, Contesto, Step 1-5, Caso reale, CTA |
| Teardown / Analisi | Hook, Cosa analizziamo, 3 fatte bene, 3 da migliorare, Template, CTA |
| Myth Busting | Mito, Perche e falso, La regola vera, Come applicarla, CTA |
| Case Study | Risultato, Punto di partenza, Azioni, Ostacolo, Soluzione, Lezione, CTA |

**Instagram - Formazione (6 schemi)**
| Schema | Struttura |
|--------|-----------|
| Originale (Universale) | Hook, Chi-Cosa-Come, Errore, Soluzione, Riprova Sociale, CTA |
| Tutorial Step-by-Step | Hook, Obiettivo, Step 1-5, Risultato, CTA |
| Lezione: Concetto > Applicazione | Hook, Concetto chiave, Perche importante, Esempio 1-2, Come applicarlo, Errore comune, CTA |
| Teaser Corso/Modulo | Hook, Cosa imparerai, Modulo 1-3, Per chi e, Risultato atteso, CTA |
| Esercizio Pratico | Hook, Obiettivo esercizio, Materiali, Istruzioni, Errori da evitare, Risultato atteso, CTA |
| Quiz/Verifica Apprendimento | Hook, Domanda 1-3, Risposte, Spiegazione, CTA |

**Instagram - Altri (3 schemi)**
| Schema | Struttura |
|--------|-----------|
| POV + Domanda | Opinione forte, Motivo 1-2, Domanda |
| Behind the Scenes | Cosa stai facendo, Perche, Cosa hai imparato, CTA |
| Story: Fallimento > Lezione > Regola | Errore, Costo, Cosa hai cambiato, Regola |

**X (Twitter) - Ads (5 schemi)**
| Schema | Struttura |
|--------|-----------|
| Originale (Universale) | Hook, Chi-Cosa-Come, Errore, Soluzione, Riprova Sociale, CTA |
| One-liner Value > Proof > CTA | Promessa (1 riga), Prova (numero/risultato), CTA |
| PAS Ultracompatto | Problema, Agitazione (1 riga), Soluzione, CTA |
| Contrarian + Payoff | Hot take, Perche, Cosa fare invece, CTA |
| Offer-first | Offerta, Chi e per, Cosa ottieni, Vincolo/urgenza, CTA |

**X (Twitter) - Valore (5 schemi)**
| Schema | Struttura |
|--------|-----------|
| Thread Manuale Operativo | Hook tweet, Step 1-5, Esempio, Recap, CTA |
| Checklist | Titolo, Punto 1-7, CTA |
| Principio > Caso > Regola | Principio, Mini-storia, Regola applicabile |
| Mini-playbook | Obiettivo, Leva 1-3, Errore 1-3, Template |
| Swipe/Template Tweet | Copia-incolla, Template, Quando usarlo |

**X (Twitter) - Formazione (5 schemi)**
| Schema | Struttura |
|--------|-----------|
| Originale (Universale) | Hook, Chi-Cosa-Come, Errore, Soluzione, Riprova Sociale, CTA |
| Thread Tutorial | Hook tweet, Obiettivo, Step 1-5, Recap, CTA |
| Lezione Rapida (280 char) | Concetto, Perche, Come applicarlo, CTA |
| Tip Giornaliero | Tip, Esempio, Azione immediata |
| Errore > Correzione | Errore comune, Perche sbagliato, Come farlo bene, CTA |

**X (Twitter) - Altri (2 schemi)**
| Schema | Struttura |
|--------|-----------|
| Build in Public | Cosa hai fatto oggi, Cosa hai imparato, Prossima mossa |
| Q&A Prompt | Rispondo a domande su X... |

**LinkedIn - Ads (5 schemi)**
| Schema | Struttura |
|--------|-----------|
| Originale (Universale) | Hook, Chi-Cosa-Come, Errore, Soluzione, Riprova Sociale, CTA |
| Problema di Ruolo | Se sei [ruolo]..., Problema, Costo, Soluzione, Proof, CTA |
| Case Study Ad | Risultato, In quanto tempo, Cosa abbiamo cambiato, 1 grafico/numero, CTA |
| Lead Magnet Ad | Titolo asset, Bullet 1-3, Per chi, CTA |
| Obiezione > Risposta > Demo-invito | Non funziona se..., Condizione vera, Come lo rendiamo vero, CTA demo |

**LinkedIn - Valore (5 schemi)**
| Schema | Struttura |
|--------|-----------|
| Story Professionale | Situazione, Tensione, Decisione, Risultato, Lezione, CTA |
| Carosello Documento (PDF) | Titolo, Problema, Framework, Esempi, Checklist, CTA |
| Post Insegnamento | Claim, Perche, Esempio 1-3, Azione 1-3, CTA |
| Teardown B2B | Cosa analizziamo, 3 punti forti, 3 errori, Come rifarlo, CTA |
| Opinion + Dati | Tesi, Dato/prova, Implicazione, Cosa fare, CTA |

**LinkedIn - Formazione (5 schemi)**
| Schema | Struttura |
|--------|-----------|
| Originale (Universale) | Hook, Chi-Cosa-Come, Errore, Soluzione, Riprova Sociale, CTA |
| Post Educativo Professionale | Hook, Contesto professionale, Concetto chiave, 3 Punti pratici, Esempio reale, Takeaway, CTA |
| Carosello Formativo (PDF) | Titolo corso/modulo, Obiettivo, Lezione 1-3, Esercizio, CTA |
| Case Study Formativo | Situazione iniziale, Sfida formativa, Metodo usato, Risultati, Lezioni apprese, CTA |
| Framework Educativo | Hook, Nome framework, Componente 1-3, Come applicarlo, CTA |

**LinkedIn - Altri**: Nessuno schema disponibile.

#### Linee Guida per Sezione (SECTION_GUIDELINES_DISPLAY)

Ogni sezione dello schema ha una linea guida AI che aiuta il consulente a capire cosa scrivere. Esempi:
- **Hook**: "Cattura l'attenzione nei primi 3 secondi. Usa domanda provocatoria, statistica sorprendente, o affermazione controintuitiva."
- **CTA**: "Invito all'azione chiaro e diretto. Di cosa fare e cosa succede dopo."
- **Riprova Sociale**: "Inserisci prove di credibilita: numeri, risultati, testimonianze."

Il sistema include oltre 60 linee guida per sezioni diverse (hook, pain, soluzione, esempio, case study, checklist, ecc.).

#### Classificazione Hook

Ogni idea generata riceve una classificazione automatica del tipo di hook:
| Tipo | Criterio di Rilevamento |
|------|------------------------|
| How-to | Contiene "come " o "come?" |
| Curiosita | Contiene "?" |
| Numero | Contiene cifre |
| Problema | Default (nessun match) |

#### Punteggio Potenziale

Ogni idea riceve un punteggio (score) con valutazione visuale:
| Range | Etichetta | Colore |
|-------|-----------|--------|
| 85-100 | Alto | Verde |
| 70-84 | Medio | Ambra |
| 0-69 | Basso | Rosso |

#### Filtri e Ordinamento Idee Salvate

| Filtro | Opzioni |
|--------|---------|
| **Piattaforma** | Tutte, Instagram, X, LinkedIn |
| **Stato** | Tutti, Nuova, In Lavorazione, Completata |
| **Tipo Contenuto** | Tutti, Copy Corto, Copy Lungo, Video Script |
| **Ordinamento** | Punteggio (desc/asc), Data (piu recente/vecchio) |

#### Template

- **Salva Template**: salva la configurazione corrente (argomento, target, piattaforma, categoria, schema, stili, livelli) per riutilizzarla
- **Carica Template**: ricarica una configurazione precedentemente salvata

#### Content Autopilot (Pilota Automatico)

Sistema avanzato per generare contenuti automaticamente su piu giorni e piattaforme.

**Configurazione Autopilot:**

| Campo | Descrizione |
|-------|-------------|
| **Data Inizio / Data Fine** | Intervallo di date per la generazione |
| **Piattaforme abilitate** | Instagram, X, LinkedIn - ognuna con toggle on/off |
| **Per ogni piattaforma** | Categoria, Schema, Numero post/giorno (1-5), Stile di scrittura |
| **Includi Weekend** | Toggle per includere/escludere sabato e domenica |
| **Includi Festivita** | Toggle per includere/escludere festivita italiane (hardcoded 2024-2027) |
| **Genera Immagini** | Genera automaticamente immagini per ogni post |
| **Pubblica su Publer** | Pubblica automaticamente su Publer |
| **Modalita Revisione** | Genera in bozza per approvazione manuale |

**Configurazione Per-Giorno:**
E possibile personalizzare ogni singolo giorno del periodo selezionato con configurazioni specifiche per ogni piattaforma (categoria, schema, numero post, stile diversi da quelli globali).

**Sincronizzazione Brand Assets:**
L'autopilot puo importare automaticamente il Posting Schedule dalla pagina Brand Assets, precompilando gli orari di pubblicazione e lo stile di scrittura per ogni piattaforma.

**Conteggio e Anteprima:**
Prima di avviare, il sistema mostra un conteggio dei post che verranno generati (tot per piattaforma) e verifica eventuali conflitti con post gia programmati nelle stesse date.

**Progresso:**
Durante la generazione mostra: totale post, completati, data corrente in lavorazione, piattaforma corrente, giorno corrente su totale giorni.

---

### Contenuti (Post)

**Dove trovarlo:** `Sidebar ‚Üí CONTENT STUDIO ‚Üí Contenuti`
**URL:** `/consultant/content-studio/posts`

Area principale per creare, organizzare e pubblicare contenuti social media.

#### Sistema Cartelle

Struttura gerarchica per organizzare i contenuti:

| Tipo | Descrizione | Icona |
|------|-------------|-------|
| **Progetto** (project) | Cartella di primo livello, rappresenta un progetto/cliente | Valigetta |
| **Cartella** (folder) | Sottocartella, puo avere un parentId (genitore) | Cartella |

- I progetti appaiono sempre prima delle cartelle nella sidebar
- Le cartelle possono essere annidate sotto un progetto
- Ogni cartella ha un `sortOrder` per l'ordinamento
- Il conteggio post include ricorsivamente tutte le sottocartelle

**Operazioni su cartelle:**
- Crea nuovo progetto o cartella
- Rinomina
- Elimina (con conferma)
- Sposta sotto un progetto diverso

#### Editor Post

**4 Tipi di Copy:**

| Tipo | Campi Principali |
|------|-----------------|
| **Copy Corto** (copy_short) | Titolo, Body (testo breve) |
| **Copy Lungo** (copy_long) | Hook, Chi-Cosa-Come, Errore, Soluzione, Riprova Sociale, CTA + campo Full Copy |
| **Script Video** (video_script) | Titolo, Scena, Dialogo, Note Regia (multi-scena) |
| **Image Copy** (image_copy) | Testo da sovrapporre all'immagine |

**Limiti Caratteri per Piattaforma:**

| Piattaforma | Limite |
|-------------|--------|
| Instagram | 2.200 caratteri |
| X (Twitter) | 280 caratteri (4.000 con X Premium attivo) |
| LinkedIn | 3.000 caratteri |
| Facebook | 63.206 caratteri |
| TikTok | 2.200 caratteri |

#### Modalita Carosello

- Toggle "Carosello" nell'editor
- Massimo **10 slide** per carosello
- Ogni slide ha: Titolo + Contenuto
- Navigazione tra slide con indicatori numerati
- Pulsante "Aggiungi Slide" (disabilitato a 10)
- Pulsante "Rimuovi Slide" (minimo 1 slide)
- **Twitter non supporta caroselli** (il toggle viene disabilitato automaticamente quando si seleziona X come piattaforma)
- Il contenuto delle slide viene concatenato per l'anteprima social

#### Anteprima Social (Social Preview)

Anteprima visuale che simula come apparira il post su ogni piattaforma. Mostra:
- Layout specifico della piattaforma (Instagram, X, LinkedIn, Facebook)
- Hook, body e CTA formattati
- Per copy_long: sezioni Chi-Cosa-Come, Errore, Soluzione, Riprova Sociale
- Contatore caratteri con avviso se si supera il limite

#### Vista Post

| Modalita | Descrizione |
|----------|-------------|
| **Lista** | Elenco verticale con dettagli completi |
| **Griglia** | Card compatte in griglia |

#### Integrazione Publer

**Pubblicazione Singola:**
- Ogni post ha il pulsante "Pubblica su Publer"
- Apre il dialogo `PublerPublishDialog`
- Permette di selezionare data/ora di programmazione
- Gestione media: `publerMediaIds` array che memorizza {id, path, thumbnail}

**Pubblicazione Massiva (Bulk Publish):**
- Pulsante "Bulk Publish" nella toolbar principale
- Apre `BulkPublishDialog`
- Seleziona multipli post da pubblicare contemporaneamente su Publer
- Programma tutti i post selezionati in una sola operazione

#### Importazione da Idee

Quando si arriva dalla pagina Idee con un'idea selezionata, il sistema:
1. Precompila il tipo di copy (short/long) in base all'idea
2. Popola i campi specifici: per copy_long popola Hook, Chi-Cosa-Come, Errore, Soluzione, Riprova Sociale, CTA e Full Copy
3. Per copy_short popola titolo e body
4. Per video_script popola le scene
5. Imposta la piattaforma di destinazione

#### Rigenerazione Variazioni

Per ogni post salvato e possibile rigenerare variazioni AI del contenuto mantenendo la stessa struttura e parametri.

---

### Calendario Editoriale

**Dove trovarlo:** `Sidebar ‚Üí CONTENT STUDIO ‚Üí Calendario`
**URL:** `/consultant/content-studio/calendar`

Calendario visuale mensile per pianificare la pubblicazione dei post.

#### Vista Mensile

- Griglia 7 colonne (Lun-Dom, settimana italiana)
- Navigazione mese precedente/successivo con frecce
- Titolo mese e anno corrente
- Oggi evidenziato

#### Eventi nel Calendario

Ogni cella giorno mostra gli eventi programmati per quella data. Tipi di evento:
| Tipo | Icona | Colore |
|------|-------|--------|
| **Post** | Documento | Blu |
| **Campagna** | Megafono | Viola |

#### Dettaglio Giorno

Cliccando su un giorno si apre il pannello laterale con:
- Lista di tutti gli eventi di quel giorno
- Per ogni evento: titolo, orario programmato, piattaforma (se post), stato
- Pulsante elimina per ogni evento
- Pulsante "Aggiungi Evento" (icona +)

#### Creazione Evento

Dialog con campi:
| Campo | Tipo |
|-------|------|
| **Titolo** | Testo (obbligatorio) |
| **Tipo** | Post o Campagna |
| **Data** | Date picker (precompilata dal giorno cliccato) |
| **Orario** | Time picker |
| **Piattaforma** | Selezione piattaforma (se tipo = post) |

---

### Brand Assets

**Dove trovarlo:** `Sidebar ‚Üí CONTENT STUDIO ‚Üí Brand Assets`
**URL:** `/consultant/content-studio/brand`

Configura l'identita del brand usata dall'AI per generare contenuti coerenti.

#### Sezioni della Pagina

**1. Chi Sono**
- Textarea per la descrizione personale/aziendale
- Usato dall'AI come contesto nel prompt

**2. Colori Brand**
- 3 color picker: Primario, Secondario, Accento
- Anteprima visuale dei 3 colori come quadrati affiancati

**3. Logo**
- Area di upload drag & drop
- Formati accettati: PNG, SVG, JPG
- Dimensione consigliata: 500x500px

**4. Voce del Brand**
- Textarea per descrivere il tono di voce
- Esempio placeholder: "Professionale ma accessibile. Usiamo un tono amichevole che ispira fiducia."

**5. Parole Chiave da Usare**
- Lista di badge (tag) con parole chiave
- Input per aggiungere nuove parole (Enter o pulsante +)
- Pulsante X su ogni badge per rimuovere

**6. Parole da Evitare**
- Stessa meccanica delle parole chiave ma con badge rossi (destructive)
- Queste parole vengono escluse dalla generazione AI

**7. Handle Social**
| Piattaforma | Placeholder |
|-------------|-------------|
| Instagram | @tuohandle |
| Facebook | tuapagina |
| LinkedIn | tuoprofilo |
| Twitter/X | @tuohandle |
| YouTube | TuoCanale |

**8. Posting Schedule**

Configurazione orari e stile di pubblicazione per piattaforma:

| Piattaforma | Orario Post 1 (default) | Orario Post 2 (default) | Stile di Scrittura |
|-------------|------------------------|------------------------|-------------------|
| Instagram | 09:00 | 18:00 | Selezionabile |
| X (Twitter) | 10:00 | 17:00 | Selezionabile |
| LinkedIn | 08:00 | 12:00 | Selezionabile |

Stili di scrittura disponibili nel Posting Schedule: Default, Conversazionale (Nurturing), Diretto, Persuasivo (Copy), Personalizzato.

**Toggle X Premium / Blue:**
Sotto la sezione X (Twitter), toggle per indicare se si ha l'abbonamento X Premium. Se attivo, sblocca post fino a 4.000 caratteri invece dei 280 standard.

#### Wizard Brand Voice (AI)

Pulsante **"Genera Brand Voice con AI"** apre un wizard modale a 6 step.

**Funzionamento:**
1. Indicatore di progresso visuale (6 cerchi numerati con barre di avanzamento)
2. Ogni step mostra: titolo, descrizione, textarea per la risposta
3. Navigazione Avanti/Indietro tra gli step
4. All'ultimo step, pulsante "Genera con AI" che invia le 6 risposte a Gemini

**Output generato (Anteprima):**
| Campo | Descrizione |
|-------|-------------|
| **Chi Sono** | Descrizione professionale generata |
| **Tono di Voce** | Stile comunicativo definito |
| **Note per l'AI** | Istruzioni tecniche per l'AI (font monospace) |
| **Parole Chiave Suggerite** | Lista di keyword generate come badge |

Dopo la preview, pulsante **"Applica"** che popola i campi della pagina Brand Assets.

**Importazione da Agente WhatsApp:**
Il wizard puo anche importare la Brand Voice da un agente WhatsApp configurato nella sezione Dipendenti, precompilando i campi.

#### Salvataggio

Pulsante **"Salva Tutte le Impostazioni"** in fondo alla pagina salva tutti i dati in una sola operazione.

---

### AdVisage (AI)

**Dove trovarlo:** `Sidebar ‚Üí CONTENT STUDIO ‚Üí AdVisage`
**URL:** `/consultant/content-studio/advisage`
**Badge:** AI

Sistema avanzato per analizzare annunci pubblicitari esistenti e generare varianti visive con AI.

#### Funzionalita Principali

**1. Analisi Batch degli Annunci**
- Carica uno o piu annunci (immagini) per l'analisi
- Gemini analizza ogni annuncio e produce un report
- Concorrenza massima: 3 analisi simultanee
- Per ogni annuncio analizzato: punti di forza, punti deboli, suggerimenti di miglioramento

**2. Generazione Concept Visivi**
Dopo l'analisi, genera varianti visive in 2 modalita:
| Variante | Descrizione |
|----------|-------------|
| **Clean** | Immagine pulita senza testo sovrapposto |
| **Text** | Immagine con testo/copy sovrapposto |

**3. Collegamento ai Post**
- `sourcePostId` mantiene il link tra un concept AdVisage e il post originale da cui e stato importato
- Pulsante "Importa da Post" per selezionare un post esistente come base per l'analisi

**4. Upload su Publer**
- Ogni concept generato puo essere caricato direttamente come media su Publer
- Per caroselli: le immagini vengono aggiunte (append) alle slide esistenti
- Per post singoli: l'immagine sostituisce quella esistente

**5. Modalita di Visualizzazione**
| Modalita | Descrizione |
|----------|-------------|
| **Griglia** | Card in layout griglia |
| **Lista** | Layout dettagliato verticale |

---

## Capitolo 12: Calendario e Gestione Consulenze

### 12.1 Il Calendario

**Dove trovarlo:** `Sidebar ‚Üí LAVORO QUOTIDIANO ‚Üí Calendario`

Il calendario mostra tutte le tue consulenze in formato visuale.

### 12.2 Viste Disponibili

| Vista | Uso |
|-------|-----|
| Mese | Panoramica mensile |
| Settimana | Pianificazione settimanale |
| Giorno | Dettaglio giornaliero |

### 12.3 Creare un Appuntamento

**Metodo 1: Dal Calendario**
1. Clicca su data/ora nel calendario
2. Si apre il form
3. Compila i dati
4. Salva

**Metodo 2: Dal Profilo Cliente**
1. Apri il profilo del cliente
2. Tab "Consulenze"
3. Clicca "Nuova Consulenza"

**Campi:**
| Campo | Descrizione |
|-------|-------------|
| Cliente | Seleziona dalla lista |
| Titolo | Es: "Discovery Call" o "Check-in mensile" |
| Data/Ora | Quando |
| Durata | 30min, 45min, 60min, 90min |
| Note | Note preparatorie (visibili solo a te) |
| Link Meeting | Generato automaticamente se configurato |

### 12.4 Gestire Appuntamenti

**Spostare:**
- Trascina l'evento su altra data/ora
- Oppure clicca ‚Üí Modifica ‚Üí Cambia data

**Cancellare:**
- Clicca sull'evento
- Menu ‚Üí Cancella
- Il cliente riceve notifica automatica

**Completare:**
- Dopo la consulenza, clicca sull'evento
- Clicca "Completa"
- Aggiungi note della sessione
- L'AI pu√≤ generare email di follow-up

### 12.5 Task Operativi

**Dove:** `Sidebar ‚Üí LAVORO QUOTIDIANO ‚Üí Task`

Gestisci i tuoi task (non quelli dei clienti):

- Crea task con deadline
- Assegna priorit√†
- Collega a cliente (opzionale)
- Segna come completato

### 12.6 Analisi Dati

**Dove trovarlo:** `Sidebar ‚Üí LAVORO QUOTIDIANO ‚Üí Analisi Dati`
**URL:** `/consultant/client-data-analysis`
**Badge:** NEW

Analizza dataset Excel/CSV con l'intelligenza artificiale.

#### Come Usare

1. Clicca **"Nuovo Dataset"** (pulsante alto a destra)
2. Trascina il file Excel o CSV nell'area di upload
3. L'AI mappa automaticamente le colonne riconoscendo:
   - Date
   - Numeri/valute
   - Categorie
   - Testo
4. Fai domande in italiano sui tuoi dati

#### Esempio Domande che Puoi Fare

| Domanda | Cosa Ottieni |
|---------|--------------|
| "Quali prodotti vendono di pi√π?" | Classifica prodotti per vendite |
| "Qual √® il fatturato mensile?" | Trend mensile del fatturato |
| "Confronta le vendite per categoria" | Grafico comparativo |
| "Chi sono i clienti che spendono di pi√π?" | Top clienti per valore |
| "Come vanno le vendite rispetto all'anno scorso?" | Analisi comparativa |

#### Funzionalit√† Avanzate

- **Query Chat** - Fai domande in linguaggio naturale
- **Visualizzazione Risultati** - Grafici automatici
- **Metriche Personalizzate** - Definisci calcoli custom
- **Report Riconciliazione** - Verifica integrit√† dati

---

## Capitolo 13: Impostazioni e Configurazioni Avanzate

### 13.1 API Keys Unificate

**Dove trovarlo:** `Sidebar ‚Üí IMPOSTAZIONI ‚Üí API Keys`

Centro unificato per tutte le configurazioni tecniche:

#### Tab AI
- Vertex AI (Google Cloud)
- Modello predefinito
- Parametri generazione

#### Tab Email
- Server SMTP
- Credenziali
- Email mittente
- Nome mittente

#### Tab Twilio
- Account SID
- Auth Token
- Numero WhatsApp

#### Tab Video
- Metered.ca per WebRTC
- Link meeting automatici

### 13.2 Automazioni Pagamento

**Dove trovarlo:** `Sidebar ‚Üí IMPOSTAZIONI ‚Üí Automazioni Pagamento`
**URL:** `/consultant/payment-automations`

Configura pagamenti ricorrenti e abbonamenti per i clienti.

#### Funzionalit√†

| Funzione | Descrizione |
|----------|-------------|
| **Collegamento Stripe** | Connetti il tuo account Stripe per ricevere pagamenti |
| **Piani Abbonamento** | Crea piani mensili/annuali per i tuoi servizi |
| **Fatturazione Automatica** | I clienti vengono addebitati automaticamente |
| **Gestione Clienti** | Vedi chi paga, chi √® in ritardo, chi ha cancellato |

#### Come Configurare

1. Clicca "Collega Stripe"
2. Segui il flusso di autorizzazione Stripe
3. Crea il tuo primo piano abbonamento
4. Assegna il piano ai clienti

### 13.3 Centro Guide

**Dove:** `Sidebar ‚Üí GUIDE ‚Üí Centro Guide`

Accesso a tutte le guide disponibili, organizzate per argomento.

---

# PARTE TERZA: GUIDA CLIENTE

---

## Capitolo 14: Dashboard Cliente

### 14.1 La Tua Home

**Dove trovarlo:** `Sidebar ‚Üí Dashboard`

La dashboard √® la prima pagina che vedi dopo il login.

### 14.2 Cosa Vedi

| Sezione | Contenuto |
|---------|-----------|
| Progressi | % completamento percorso |
| Esercizi | Lista con scadenze |
| Prossime Consulenze | Data, ora, link |
| Task | Attivit√† del giorno |
| AI Assistant | Accesso rapido |

### 14.3 Badge e Notifiche

| Badge | Significato |
|-------|-------------|
| üî¥ Rosso | Scadenza imminente o passata |
| üü¢ Verde | Completato |
| üîµ Blu | Nuovo contenuto |

---

## Capitolo 15: AI Assistant - Il Tuo Assistente Personale

### 15.1 Accedere all'AI Assistant

**Dove trovarlo:** `Sidebar ‚Üí AI Assistant ‚Üí Chat AI`

L'AI Assistant √® il tuo assistente personale disponibile 24/7.

### 15.2 Cosa Puoi Chiedere

**Domande sui Corsi:**
```
"Spiegami meglio la lezione sul budget"
‚Üí L'AI riassume e spiega i concetti chiave
```

**Aiuto con gli Esercizi:**
```
"Non capisco cosa devo fare nell'esercizio 3"
‚Üí L'AI ti guida senza darti le risposte
```

**Dubbi sul Percorso:**
```
"Come sto andando? Sono in linea con gli obiettivi?"
‚Üí L'AI analizza i tuoi progressi
```

**Domande Generali:**
```
"Quando √® la prossima consulenza?"
‚Üí L'AI controlla il calendario
```

### 15.3 Gestire le Conversazioni

Nella sidebar sinistra della chat:
- "Nuova chat" per iniziare una nuova conversazione
- Lista delle conversazioni passate
- Ricerca per trovare conversazioni specifiche

### 15.4 Personalizzare l'AI

Clicca ‚öôÔ∏è per impostare:
- Stile di risposta (formale, amichevole, ecc.)
- Lunghezza risposte
- Istruzioni personalizzate

---

## Capitolo 16: Formazione e Universit√†

### 16.1 I Tuoi Corsi

**Dove trovarlo:** `Sidebar ‚Üí La Mia Universit√† ‚Üí Universit√†`

Qui trovi tutti i corsi assegnati dal tuo consulente.

### 16.2 Navigare un Corso

```
CORSO
‚îú‚îÄ‚îÄ Modulo 1 ‚úÖ Completato
‚îÇ   ‚îú‚îÄ‚îÄ Lezione 1.1 ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ Lezione 1.2 ‚úÖ
‚îÇ   ‚îî‚îÄ‚îÄ Lezione 1.3 ‚úÖ
‚îú‚îÄ‚îÄ Modulo 2 üîÑ In corso
‚îÇ   ‚îú‚îÄ‚îÄ Lezione 2.1 ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ Lezione 2.2 ‚Üê Sei qui
‚îÇ   ‚îî‚îÄ‚îÄ Lezione 2.3 ‚¨ú
‚îî‚îÄ‚îÄ Modulo 3 ‚¨ú Da fare
```

### 16.3 Completare una Lezione

1. Clicca sulla lezione
2. Leggi/guarda tutto il contenuto
3. Alla fine, clicca "Completa Lezione"
4. Passa alla successiva

**Puoi sempre tornare indietro** a rivedere lezioni gi√† completate.

### 16.4 I Tuoi Esercizi

**Dove trovarlo:** `Sidebar ‚Üí La Mia Universit√† ‚Üí I Miei Esercizi`

| Stato | Significato |
|-------|-------------|
| Da completare | In attesa che tu lo faccia |
| In corso | Hai iniziato a lavorarci |
| Consegnato | Inviato, in attesa di revisione |
| Revisionato | Feedback ricevuto |

### 16.5 Completare un Esercizio

1. Clicca sull'esercizio
2. Leggi le istruzioni attentamente
3. Completa le risposte
4. Opzionalmente carica allegati
5. Clicca "Consegna"

**Attenzione:** Dopo la consegna non puoi modificare.

### 16.6 Ricevere Feedback

Quando il consulente revisiona:
1. Ricevi notifica
2. L'esercizio passa a "Revisionato"
3. Apri per vedere i commenti
4. Se richiesto, correggi e riconsegna

---

## Capitolo 17: Gestione del Tempo e Consulenze

### 17.1 Calendario

**Dove trovarlo:** `Sidebar ‚Üí Il Mio Tempo ‚Üí Calendario`

Vedi tutti i tuoi impegni:
- üü¢ Consulenze
- üî¥ Scadenze esercizi
- üîµ Task
- ‚ö™ Altri appuntamenti

### 17.2 Le Tue Consulenze

**Dove trovarlo:** `Sidebar ‚Üí Il Mio Tempo ‚Üí Consulenze`

#### Consulenze Future
- Data e ora
- Link per partecipare (appare 15 min prima)
- Note del consulente

#### Come Prepararti
1. Rivedi le lezioni assegnate
2. Completa gli esercizi pendenti
3. Scrivi le tue domande
4. Testa webcam/microfono

### 17.3 Task & Riflessioni

**Dove trovarlo:** `Sidebar ‚Üí Il Mio Tempo ‚Üí Task & Riflessioni`

| Sezione | Uso |
|---------|-----|
| Task | Attivit√† da completare oggi |
| Riflessioni | Il tuo diario personale |

### 17.4 Momentum

**Dove trovarlo:** `Sidebar ‚Üí Il Mio Tempo ‚Üí Momentum`

Traccia la tua costanza:
- **Streak**: Giorni consecutivi di attivit√†
- **Statistiche**: Lezioni, esercizi, tempo dedicato

---

## Capitolo 18: Agenti AI e Strumenti di Vendita

*(Questa sezione √® disponibile solo per clienti con accesso agli strumenti di vendita)*

### 18.1 I Tuoi Agenti AI

**Dove trovarlo:** `Sidebar ‚Üí Agenti AI ‚Üí I Miei Agenti AI`

Gestisci i tuoi agenti AI per la vendita.

### 18.2 Script Manager

**Dove trovarlo:** `Sidebar ‚Üí Agenti AI ‚Üí Script Manager`

Crea e gestisci script di vendita.

### 18.3 AI Analytics

**Dove trovarlo:** `Sidebar ‚Üí Agenti AI ‚Üí AI Analytics`

Monitora l'utilizzo e i costi AI.

---

## Capitolo 19: Cervello AI Personale (Area Cliente)

### 19.1 I Tuoi Documenti

**Dove trovarlo:** `Sidebar ‚Üí Base di Conoscenza ‚Üí Documenti`
**Nota:** Nell'area cliente questa sezione si chiama ancora "Base di Conoscenza" con la voce "Documenti".

Carica documenti che solo tu e l'AI potete vedere.

### 19.2 Come Funziona

1. Carichi un documento (PDF, Word, TXT)
2. Il sistema lo indicizza
3. Quando fai domande all'AI, cerca anche nei tuoi documenti
4. Risposte personalizzate basate sui tuoi materiali

---

# PARTE QUARTA: APPENDICI

---

## Appendice A: Glossario Completo dei Termini

| Termine | Definizione |
|---------|-------------|
| **Agente AI** | Bot intelligente che gestisce conversazioni WhatsApp automaticamente |
| **AI Assistant** | Interfaccia chat per interagire con l'intelligenza artificiale |
| **Campagna** | Raggruppamento di lead con obiettivo comune |
| **Dry Run** | Modalit√† test che simula invii senza mandare messaggi reali |
| **Email Journey** | Sistema di email automatiche su 31 giorni |
| **Escalation** | Passaggio di una conversazione da AI a umano |
| **File Search** | Tecnologia di ricerca semantica nei documenti |
| **Inbound** | Agente che risponde a messaggi in arrivo |
| **Cervello AI** | Archivio documenti e memorie usato dall'AI per rispondere (precedentemente "Knowledge Base") |
| **Lead** | Potenziale cliente da convertire |
| **Lead Scoring** | Sistema automatico di punteggio per prioritizzare i lead |
| **Modulo** | Raggruppamento di lezioni all'interno di un corso |
| **Outbound** | Agente che contatta proattivamente |
| **RAG** | Retrieval Augmented Generation - tecnologia che permette all'AI di cercare informazioni prima di rispondere |
| **SMTP** | Protocollo per l'invio di email |
| **Streak** | Giorni consecutivi di attivit√† |
| **Template WhatsApp** | Messaggio pre-approvato da Meta per contatti a freddo |
| **Twilio** | Servizio per inviare/ricevere messaggi WhatsApp |
| **Uncino** | Frase di apertura che cattura l'attenzione |
| **Vertex AI** | Servizio AI di Google che alimenta la piattaforma |
| **Webhook** | Meccanismo per ricevere notifiche automatiche |
| **WebRTC** | Tecnologia per videochiamate nel browser |

---

## Appendice B: Risoluzione Problemi per Scenario

### B.1 L'AI non risponde alle domande

**Verifica:**
1. Vertex AI √® configurato? (`Sidebar ‚Üí IMPOSTAZIONI ‚Üí API Keys ‚Üí Tab AI`)
2. Le credenziali sono valide? (stato verde ‚úÖ)
3. Hai crediti Google Cloud disponibili?

**Soluzione:**
- Riconfigura Vertex AI seguendo le istruzioni del Capitolo 4
- Verifica la billing su Google Cloud
- Contatta supporto se persiste

### B.2 WhatsApp non invia messaggi

**Verifica:**
1. Twilio configurato? (`Sidebar ‚Üí IMPOSTAZIONI ‚Üí API Keys ‚Üí Tab Twilio`)
2. Numero WhatsApp verificato?
3. Template approvato da Meta?
4. Credito Twilio sufficiente?

**Soluzione:**
- Controlla lo stato dei template nella dashboard Twilio
- Ricarica credito Twilio se necessario
- Attendi approvazione template (fino a 24h)

### B.3 Le email non arrivano

**Verifica:**
1. SMTP configurato? (`Sidebar ‚Üí IMPOSTAZIONI ‚Üí API Keys ‚Üí Tab Email`)
2. Credenziali corrette?
3. Email di test funziona?

**Soluzione per Gmail:**
- Verifica che 2FA sia attiva
- Usa App Password (non la password normale)
- Controlla la cartella spam del destinatario

### B.4 Il cliente non vede i corsi

**Verifica:**
1. Il corso √® stato assegnato al cliente?
2. Il corso √® pubblicato (non bozza)?
3. Il cliente sta usando le credenziali corrette?

**Soluzione:**
- Vai al profilo cliente ‚Üí Tab Percorso ‚Üí Verifica assegnazioni
- Pubblica il corso se √® ancora bozza
- Resetta password del cliente se necessario

### B.5 L'agente WhatsApp non risponde

**Verifica:**
1. L'agente √® attivo (non in pausa)?
2. √à dentro gli orari configurati?
3. √à collegato alla campagna corretta?
4. Il Cervello AI √® popolato con documenti?

**Soluzione:**
- Attiva l'agente dalla dashboard
- Verifica gli orari di attivit√†
- Collega l'agente alla campagna
- Carica documenti nel Cervello AI (Memoria & Documenti)

---

## Appendice C: Scorciatoie, Tips e Best Practices

### C.1 Tips per Consulenti

**Efficienza:**
- Revisiona esercizi ogni mattina (max 48h dalla consegna)
- Usa l'AI per preparare ogni consulenza
- Batch: fai tutte le revisioni insieme, poi tutte le email

**WhatsApp:**
- Testa sempre con Dry Run prima di avviare
- Delay di 3-8 secondi per sembrare naturale
- Aggiorna gli script basandoti sulle conversazioni reali

**Contenuti:**
- Usa l'AI Course Builder per velocizzare
- Lezioni brevi (5-10 min) funzionano meglio
- Esercizi pratici > teoria

**Engagement:**
- Rispondi velocemente = clienti pi√π attivi
- Celebra i progressi (anche piccoli)
- Personalizza i feedback

### C.2 Tips per Clienti

**Costanza:**
- Mantieni lo streak (anche 5 minuti contano)
- Imposta un orario fisso per studiare
- Usa le notifiche come promemoria

**Apprendimento:**
- Non saltare lezioni
- Completa gli esercizi con calma
- Chiedi all'AI quando hai dubbi

**Consulenze:**
- Prepara domande in anticipo
- Testa la tecnologia prima
- Prendi appunti o usa le trascrizioni

### C.3 Best Practices Generali

| Cosa | Perch√© |
|------|--------|
| Popola il Cervello AI | AI pi√π intelligente |
| Rispondi entro 24h | Engagement alto |
| Personalizza i feedback | Clienti pi√π motivati |
| Usa automazioni | Risparmia tempo |
| Monitora le metriche | Migliora continuamente |

---

## Appendice D: FAQ - Domande Frequenti

### Consulenti

**D: Quanto costa usare Vertex AI?**
R: Google offre $300 di crediti gratuiti. Dopo, circa $0.001-0.01 per richiesta. Un uso normale costa ‚Ç¨10-50/mese.

**D: Posso avere pi√π agenti WhatsApp?**
R: S√¨, puoi creare quanti agenti vuoi. Ogni agente pu√≤ avere personalit√† e script diversi.

**D: I clienti vedono che l'AI risponde?**
R: No, se configurato correttamente l'agente non rivela mai di essere un'AI.

**D: Posso importare clienti da un altro sistema?**
R: S√¨, puoi importare via CSV/Excel.

### Clienti

**D: L'AI ha sempre ragione?**
R: L'AI √® molto accurata ma non infallibile. Per dubbi importanti, chiedi al consulente.

**D: I miei dati sono privati?**
R: S√¨, i tuoi documenti e conversazioni sono visibili solo a te e al tuo consulente.

**D: Posso accedere da telefono?**
R: S√¨, la piattaforma funziona su tutti i dispositivi.

---

# PARTE QUINTA: FUNZIONALIT√Ä AVANZATE

---

## Capitolo 20: Weekly Check-in ‚Äì Sistema Automatico di Contatto Settimanale via WhatsApp

### 20.1 Panoramica del Sistema

Il Weekly Check-in √® un sistema completamente automatizzato che invia messaggi WhatsApp personalizzati ai clienti ogni settimana, senza intervento manuale del consulente. L'obiettivo √® mantenere il contatto costante con ogni cliente, verificare i progressi e offrire supporto proattivo.

**Come funziona in sintesi:**

```
Ogni mattina alle 08:00 ‚Üí Il sistema analizza chi contattare oggi
                ‚Üì
Ogni minuto     ‚Üí Il sistema invia i messaggi in coda
                ‚Üì
L'AI personalizza ogni messaggio in base ai dati reali del cliente
```

Il sistema √® composto da:
- **2 processi automatici (CRON)** che lavorano in tandem
- **Un calendario deterministico a 4 settimane** che distribuisce equamente i contatti
- **Personalizzazione AI** che rende ogni messaggio unico
- **Rotazione template** per evitare messaggi ripetitivi
- **3 tabelle nel database** per tracciare tutto

---

### 20.2 Interfaccia Utente ‚Äì Le 6 Schede

La pagina "Check-in Settimanale" √® accessibile dalla sidebar del consulente e presenta 6 schede:

#### Scheda 1: Dashboard
Mostra una panoramica con:
- **Statistiche globali**: totale clienti attivi, messaggi inviati questa settimana, percentuale di risposte, prossimo ciclo
- **Grafico progressi**: andamento settimanale degli invii
- **Stato sistema**: indica se il check-in √® attivo o in pausa

#### Scheda 2: Calendario
Visualizza un **calendario a 4 settimane** che mostra esattamente quale giorno della settimana ogni cliente ricever√† il proprio check-in.

**Come viene assegnato il giorno:**
Il sistema usa un algoritmo deterministico basato sull'ID del cliente (hash). Questo garantisce che:
- Ogni cliente riceve il check-in sempre lo **stesso giorno della settimana**
- I clienti sono distribuiti **equamente** tra luned√¨ e venerd√¨
- Non ci sono giorni sovraccarichi

Il calendario mostra:
- Nome del cliente per ogni giorno
- Stato: ‚úÖ inviato, ‚è≥ in attesa, ‚ùå fallito
- Possibilit√† di cliccare su un cliente per vedere il dettaglio

#### Scheda 3: Cronologia
Elenco completo di tutti i check-in inviati, con:
- Data e ora di invio
- Nome del cliente destinatario
- Anteprima del messaggio inviato
- Stato di consegna (inviato, consegnato, letto)
- Eventuale risposta del cliente

Supporta filtri per:
- Periodo (settimana corrente, mese, tutti)
- Stato (inviato, fallito, risposto)
- Cliente specifico

#### Scheda 4: Template
Gestione dei modelli di messaggio. Il sistema include template predefiniti e permette di crearne di personalizzati.

**Template predefiniti:**
Ogni template √® un messaggio di check-in con variabili dinamiche che vengono sostituite con i dati reali del cliente. Esempi:
- "Ciao {nome}, come va questa settimana? Volevo fare un check-in veloce..."
- "Buongiorno {nome}! √à il tuo momento settimanale di confronto..."

**Rotazione automatica:**
Il sistema tiene traccia di quale template √® stato usato per ciascun cliente e **ruota automaticamente** tra i template disponibili, rispettando un parametro `minDaysBetweenContacts` per evitare di ricontattare lo stesso cliente troppo presto.

#### Scheda 5: Impostazioni
Configurazione completa del sistema:

| Impostazione | Descrizione | Default |
|---|---|---|
| **Attivo/Disattivo** | Accende o spegne l'intero sistema | Disattivo |
| **Giorni attivi** | Quali giorni della settimana inviare (lun-ven) | Lun-Ven |
| **Orario invio** | Finestra oraria per gli invii | 08:00-18:00 |
| **Personalizzazione AI** | Abilita/disabilita la personalizzazione intelligente | Attivo |
| **Min giorni tra contatti** | Giorni minimi tra un check-in e l'altro per lo stesso cliente | 7 |

#### Scheda 6: Analitica
Metriche dettagliate:
- Tasso di risposta per cliente
- Tempo medio di risposta
- Clienti pi√π/meno reattivi
- Andamento nel tempo

---

### 20.3 Come Funziona Tecnicamente ‚Äì I Due Processi Automatici

#### Processo 1: Pianificazione (ogni giorno alle 08:00, fuso orario Roma)

Ogni mattina alle 08:00 il sistema:

1. **Cerca tutti i consulenti** che hanno il check-in attivo
2. Per ogni consulente, **identifica i clienti** che devono ricevere il check-in oggi, basandosi su:
   - Il giorno della settimana assegnato a quel cliente (algoritmo hash deterministico)
   - Se il cliente non ha gi√† ricevuto un messaggio recente (rispetta `minDaysBetweenContacts`)
   - Se il consulente ha WhatsApp configurato e attivo
3. Per ogni cliente identificato, **crea un record** nella tabella `weekly_checkin_queue` con stato "pending"
4. Se la personalizzazione AI √® attiva, il sistema **prepara il contesto** del cliente per l'AI

**Sicurezza anti-duplicazione:**
- Usa un sistema di **lock con mutex** nel database per evitare che il processo venga eseguito due volte contemporaneamente
- La durata del lock √® di 5 minuti

#### Processo 2: Invio (ogni minuto)

Ogni minuto il sistema:

1. **Cerca messaggi in coda** con stato "pending" e orario di invio raggiunto
2. Per ogni messaggio:
   a. Seleziona il **template** appropriato (rotazione automatica)
   b. Se la personalizzazione AI √® attiva:
      - Chiama la funzione `buildUserContext()` che raccoglie: esercizi completati, progressi corsi, note delle consulenze recenti, obiettivi attivi
      - Integra con **File Search** per accedere al Cervello AI del consulente
      - L'AI genera un messaggio personalizzato basato sui dati reali
   c. **Invia il messaggio** tramite Twilio/WhatsApp API
   d. Aggiorna lo stato a "sent" con timestamp
3. In caso di **errore**:
   - Il messaggio viene segnato come "failed"
   - L'errore viene registrato nel campo `error_message`
   - Il sistema **riprova automaticamente** al ciclo successivo (fino a 3 tentativi)

---

### 20.4 Personalizzazione AI dei Messaggi

Quando la personalizzazione AI √® attiva, ogni messaggio viene arricchito con dati reali:

**Dati raccolti automaticamente per ogni cliente:**
- Ultimi esercizi completati e punteggi
- Progressi nei corsi (percentuale completamento)
- Note dell'ultima consulenza
- Obiettivi attivi e scadenze
- Storico risposte ai check-in precedenti
- Documenti rilevanti dal Cervello AI (via File Search)

**Esempio di messaggio senza AI:**
> "Ciao Marco, come va questa settimana? Fammi sapere se hai bisogno di supporto."

**Esempio di messaggio con AI:**
> "Ciao Marco, ho visto che hai completato l'esercizio sul budget familiare con ottimi risultati (85/100)! Questa settimana potresti concentrarti sulla sezione 'investimenti a lungo termine' del corso ‚Äì sei al 60% e manca poco per finire il modulo. Come stai procedendo con l'obiettivo di risparmio mensile che avevamo fissato?"

---

### 20.5 Database e Tabelle

Il sistema utilizza 3 tabelle dedicate:

| Tabella | Scopo |
|---|---|
| `weekly_checkin_settings` | Configurazione per consulente (attivo, giorni, orari, template) |
| `weekly_checkin_queue` | Coda dei messaggi da inviare (stato, template usato, tentativo) |
| `weekly_checkin_log` | Storico completo degli invii (messaggio finale, risposta, metriche) |

---

### 20.6 Risoluzione Problemi

| Problema | Causa Probabile | Soluzione |
|---|---|---|
| Nessun messaggio inviato | Sistema disattivo | Verifica che sia attivo nella scheda Impostazioni |
| Messaggi non personalizzati | AI disabilitata o nessun dato cliente | Abilita personalizzazione AI; verifica che il cliente abbia dati (esercizi, consulenze) |
| Stesso messaggio ripetuto | Pochi template disponibili | Aggiungi pi√π template nella scheda Template |
| Cliente non riceve | WhatsApp non configurato per quel cliente | Verifica numero telefono del cliente; controlla configurazione WhatsApp Business |
| Errore "lock timeout" | Processo precedente ancora in esecuzione | Attendi 5 minuti; il lock si rilascia automaticamente |

---

## Capitolo 21: Chiamate Vocali AI ‚Äì Alessia AI Phone

### 21.1 Panoramica del Sistema

Il sistema di chiamate vocali AI permette al consulente di far effettuare telefonate automatiche dalla propria assistente AI "Alessia". L'AI chiama il cliente (o qualsiasi numero), conduce una conversazione naturale in tempo reale, e poi invia un riepilogo.

**Architettura del sistema:**

```
Piattaforma Web ‚Üê‚Üí VPS con FreeSWITCH ‚Üê‚Üí Rete Telefonica
        ‚Üï                    ‚Üï
   Google Gemini        Conversione
   (cervello AI)     Voce ‚Üî Testo
```

- **FreeSWITCH**: Software open-source installato su un VPS esterno che gestisce le chiamate telefoniche reali
- **Gemini 2.5 Flash Native Audio**: Modello AI di Google che capisce e genera voce in tempo reale
- **VPS Bridge**: Connessione sicura tra la piattaforma e il VPS via token di servizio

---

### 21.2 Interfaccia Utente ‚Äì Le 7 Schede

#### Scheda 1: Chiamate (calls)
Dashboard principale con:
- **Statistiche in tempo reale**: chiamate totali, completate, fallite, durata media
- **Stato connessione VPS**: indica se il bridge √® connesso (verde/rosso)
- **Elenco chiamate**: tutte le chiamate con stato, durata, trascrizione
- **Filtri disponibili**: per stato (in arrivo, connessa, in corso, completata, fallita, trasferita, terminata), per tipo cliente (tutti, clienti, non-clienti), ricerca per nome/numero
- **Polling automatico**: la lista si aggiorna ogni 10 secondi

**Stati delle chiamate:**

| Stato | Icona | Significato |
|---|---|---|
| In Arrivo | üîî | La chiamata sta squillando |
| Connessa | üìû | La linea √® aperta |
| In Corso | üü¢ | L'AI sta parlando con il destinatario |
| Completata | ‚úÖ | Chiamata terminata con successo |
| Fallita | ‚ùå | La chiamata non √® riuscita |
| Trasferita | üü£ | Trasferita al consulente in persona |
| Terminata | ‚¨ú | Terminata normalmente |

#### Scheda 2: Chiamate in Uscita (outbound)
Permette di avviare nuove chiamate. Include un sistema wizard a 3 passi:

**Passo 1 ‚Äì Chi chiamare:**
- Seleziona un cliente dalla lista (con ricerca e filtro attivi/inattivi)
- Oppure inserisci un numero di telefono manuale

**Passo 2 ‚Äì Cosa dire:**
Il consulente pu√≤ dare istruzioni all'AI in due modi:

1. **Libreria di template** organizzata in 7 categorie:
   - üìÖ **Appuntamenti** (4 template): Conferma appuntamento, Richiesta nuovo appuntamento, Promemoria domani, Riprogrammazione
   - üí∞ **Pagamenti** (3 template): Scadenza in arrivo, Sollecito scaduto, Conferma pagamento
   - üìÑ **Documenti** (3 template): Richiesta documenti, Documento pronto, Verifica conformit√†
   - üìä **Commerciale** (4 template): Proposta commerciale, Follow-up proposta, Upselling, Richiesta feedback
   - üì¶ **Ordini** (3 template): Conferma ordine, Verifica consegna, Richiesta feedback
   - ü§ù **Relazione** (4 template): Check-in periodico, Riattivazione, Auguri, Ringraziamento
   - ‚ö†Ô∏è **Urgenze** (3 template): Scadenza fiscale, Variazione importante, Azione immediata

   Ogni template ha **campi dinamici** specifici. Esempio per "Conferma appuntamento":
   - Campo "Data appuntamento" (tipo: data, obbligatorio)
   - Campo "Ora" (tipo: testo)
   - Il sistema genera automaticamente l'istruzione: "Conferma l'appuntamento del {data} alle {ora}. Chiedi se ha preparato i documenti necessari."

2. **Istruzione libera**: il consulente scrive cosa deve dire/fare l'AI durante la chiamata

**Passo 3 ‚Äì Quando chiamare:**
- **Ora**: la chiamata parte immediatamente
- **Programmata**: seleziona data e ora futura
- **Tipo di chiamata**:
  - *Chiamata Singola*: una telefonata una tantum
  - *Follow-up Programmato*: serie di chiamate a intervalli regolari (giornaliero, settimanale), con data di fine e possibilit√† di scegliere i giorni della settimana
  - *Task AI Autonomo* (in sviluppo): l'AI esegue un compito e poi opzionalmente chiama

**Miglioramento AI dell'istruzione:**
Un pulsante "‚ú® Migliora con AI" invia l'istruzione scritta dal consulente a Gemini che la riformula in modo ottimale per la conduzione della chiamata telefonica.

#### Scheda 3: Task AI (ai-tasks)
Coda di tutte le attivit√† programmate, con due visualizzazioni:

1. **Vista Calendario** (default): un calendario settimanale drag-and-drop dove:
   - Le chiamate programmate appaiono come eventi colorati
   - I task AI appaiono con icone diverse
   - Si pu√≤ trascinare per creare nuovi task
   - Cliccando su un evento si aprono i dettagli completi
   - Navigazione per settimana avanti/indietro
   - Filtro per contatto specifico
   - Toggle per mostrare/nascondere chiamate completate

2. **Vista Lista**: elenco tabulare con:
   - Filtri per stato: In attesa, Programmato, In esecuzione, Completato, Fallito, Annullato, In approvazione, Approvato
   - Dettagli: contatto, istruzione, data/ora, tipo, stato, tentativi
   - Azioni: approva, rifiuta, elimina, modifica, riesegui

**Stati dei task:**

| Stato | Significato |
|---|---|
| `pending` | In attesa di esecuzione |
| `scheduled` | Programmato (approvato automaticamente se autonomy ‚â• 4) |
| `waiting_approval` | In attesa di approvazione del consulente (autonomy < 4) |
| `approved` | Approvato dal consulente, pronto per l'esecuzione |
| `in_progress` | In esecuzione |
| `completed` | Completato con successo |
| `failed` | Fallito (con motivo) |
| `cancelled` | Annullato dal consulente |
| `retry_pending` | In attesa di nuovo tentativo |

**Eliminazione ricorrenti:**
Per task ricorrenti (follow-up programmati) √® possibile:
- Eliminare solo questa occorrenza
- Eliminare tutte le occorrenze future
- Eliminare fino a una data specifica

#### Scheda 4: Non-Clienti (non-client)
Configurazione per le chiamate ricevute da numeri non riconosciuti (non associati a nessun cliente).

**Configurazione separata per direzione:**

*Chiamate in entrata (inbound):*
- **Fonte del prompt**: Template, Agente AI, o Manuale
- **Template disponibili**: Mini Discovery, Sales Orbitale, ecc.
- **Agente AI**: seleziona un agente WhatsApp esistente (usa il suo prompt e personalit√†)
- **Prompt manuale**: scrivi istruzioni personalizzate
- **Brand Voice**: abilita/disabilita iniezione del brand voice separatamente dalle istruzioni

*Chiamate in uscita (outbound):*
- Stessa struttura delle inbound ma con template diversi ottimizzati per chiamate proattive

**Anteprima prompt:**
Un sistema di anteprima espandibile mostra esattamente cosa verr√† inviato all'AI, organizzato in sezioni: Business & Identit√†, Posizionamento, Target, Metodo, Credenziali, Servizi, Personalit√† AI.

#### Scheda 5: VPS (vps)
Configurazione tecnica della connessione al server FreeSWITCH:

- **URL VPS Bridge**: inserisci l'URL del tuo server FreeSWITCH (es: `https://mio-vps.example.com`)
- **Token di Servizio**: genera un token sicuro per autenticare la connessione
  - Il token viene mostrato una sola volta dopo la generazione
  - Se ne generi uno nuovo, quello vecchio viene revocato automaticamente
  - Il token va copiato e configurato sul VPS
- **Stato connessione**: verifica in tempo reale se il VPS √® raggiungibile
- **Connessioni Gemini attive**: monitoraggio delle connessioni WebSocket aperte con Google Gemini (sistema anti-zombie che chiude connessioni stale dopo 5 minuti)
- **Configurazione Retry**: quanti tentativi fare se una chiamata fallisce e intervallo tra i tentativi

| Impostazione | Descrizione | Default |
|---|---|---|
| Max tentativi | Numero massimo di tentativi per chiamata | 3 |
| Intervallo retry | Minuti tra un tentativo e l'altro | 5 |

#### Scheda 6: Guida Vocale (voice-guide)
Guida interattiva integrata che spiega:
- Come configurare il VPS
- Come funziona il bridge
- Risoluzione problemi comuni
- Sezioni espandibili/collassabili per ogni argomento

#### Scheda 7: Conversazioni (conversazioni)
Accesso alle trascrizioni complete delle chiamate AI:
- Trascrizioni parola per parola
- Riepiloghi generati dall'AI
- Possibilit√† di ascoltare la registrazione (se disponibile)
- Filtri per data e contatto

---

### 21.3 Selezione della Voce

Il sistema offre 6 voci AI tra cui scegliere:

| Voce | Descrizione |
|---|---|
| **Achernar** | üáÆüáπ Femminile Professionale (default) |
| **Puck** | üá¨üáß Maschile Giovane |
| **Charon** | üá¨üáß Maschile Maturo |
| **Kore** | üá¨üáß Femminile Giovane |
| **Fenrir** | üá¨üáß Maschile Profondo |
| **Aoede** | üá¨üáß Femminile Melodiosa |

La voce si configura dalla scheda VPS o dalla scheda Chiamate.

---

### 21.4 Sistema di Retry e Recupero Chiamate

#### Retry automatico per chiamate senza risposta

Quando una chiamata non riceve risposta (no_answer, busy, short_call):

1. Il sistema verifica se il numero di tentativi fatti √® inferiore al massimo configurato
2. Se s√¨, programma un **nuovo tentativo** dopo l'intervallo configurato (default: 5 minuti)
3. Lo stato della chiamata diventa `retry_scheduled`
4. Il tentativo successivo crea una **nuova entry** nella tabella delle chiamate programmate, collegata alla stessa istruzione originale
5. Se tutti i tentativi falliscono, lo stato finale diventa `failed`

#### Pulizia chiamate bloccate (stuck calls)

Ogni minuto il sistema controlla se ci sono chiamate rimaste in stato `calling` per pi√π di **5 minuti** (indica un problema di comunicazione con il VPS):

- Se il numero di tentativi non √® esaurito ‚Üí la chiamata viene **riprogrammata** con stato `retry_pending`
- Se il numero di tentativi √® esaurito ‚Üí la chiamata viene segnata come `failed` con messaggio "Call stuck in calling state - no callback received"
- Se la chiamata era collegata a un task AI, anche il task viene aggiornato di conseguenza

---

### 21.5 Template Vocali per Direzione (Inbound/Outbound)

Il sistema di template vocali offre istruzioni separate per le chiamate in entrata e in uscita:

**Template Inbound (chiamate ricevute):**
- Mini Discovery: conversazione di scoperta breve
- Customer Care Standard: assistenza clienti professionale
- Receptionist: smistamento e gestione chiamate

**Template Outbound (chiamate effettuate):**
- Sales Orbitale: vendita proattiva
- Follow-up Commerciale: ricontatto dopo proposta
- Survey/Feedback: raccolta opinioni

Ogni template include:
- Nome e descrizione
- Il prompt completo che verr√† inviato all'AI
- Variabili interpolabili (nome consulente, azienda, ecc.)

---

### 21.6 Integrazione con il Sistema AI Autonomo

Le chiamate vocali sono strettamente integrate con il sistema di AI Autonomy (Capitolo 22):

- Quando un **task AI autonomo** ha il campo `call_after_task = true`, al completamento del task viene **automaticamente creata una chiamata vocale** nella tabella `scheduled_voice_calls`
- Il tipo di azione `voice_call` nel Decision Engine dell'autonomia crea direttamente entry nella tabella delle chiamate
- Lo **stato del task AI** e della **chiamata vocale** sono sincronizzati: se la chiamata fallisce, anche il task viene aggiornato

---

### 21.7 Stato della Connessione e Monitoraggio

Il sistema monitora in tempo reale:

- **Stato VPS**: verde (connesso), rosso (disconnesso), con ultimo heartbeat
- **Connessioni Gemini WebSocket**: numero di sessioni attive con il modello AI vocale
- **Anti-Zombie**: sistema automatico che rileva e chiude connessioni WebSocket rimaste aperte dopo che la chiamata √® terminata (timeout: 5 minuti di inattivit√†)

---

### 21.8 Flusso Completo di una Chiamata

```
1. Consulente crea task (manuale o AI autonomo)
   ‚Üì
2. CRON ogni minuto controlla la coda
   ‚Üì
3. Trova task con orario raggiunto e stato "scheduled"
   ‚Üì
4. Invia richiesta al VPS Bridge con:
   - Numero di telefono
   - Istruzione AI
   - Voce selezionata
   - Token di autenticazione
   ‚Üì
5. VPS/FreeSWITCH effettua la chiamata
   ‚Üì
6. Gemini 2.5 Flash gestisce la conversazione in tempo reale
   ‚Üì
7. Al termine, il VPS invia callback con:
   - Stato (completata/fallita)
   - Durata
   - Trascrizione
   - Riepilogo AI
   ‚Üì
8. Il sistema aggiorna lo stato e salva i risultati
   ‚Üì
9. Se la chiamata ha fallito e ci sono tentativi rimasti ‚Üí retry
   ‚Üì
10. Se era un task ricorrente ‚Üí calcola e crea prossima occorrenza
```

---

### 21.9 Risoluzione Problemi Chiamate Vocali

| Problema | Causa Probabile | Soluzione |
|---|---|---|
| "VPS disconnesso" | URL Bridge errato o server spento | Verifica l'URL nella scheda VPS; controlla che il server FreeSWITCH sia attivo |
| "Token non valido" | Token scaduto o rigenerato | Genera un nuovo token e aggiornalo sul VPS |
| Chiamata sempre "calling" | VPS non invia callback | Controlla i log del VPS; il sistema ripulisce automaticamente dopo 5 minuti |
| "Nessuna risposta" ripetuto | Numero errato o orario scomodo | Verifica il numero; prova in orari diversi; aumenta i tentativi |
| AI non parla bene | Prompt troppo generico | Usa i template o il pulsante "Migliora con AI" per ottimizzare l'istruzione |
| Voce sbagliata | Configurazione voce diversa | Cambia la voce nella scheda VPS ‚Üí sezione "Selezione Voce" |

---

## Capitolo 22: AI Autonomy ‚Äì Sistema di Dipendenti AI Autonomi

### 22.1 Panoramica del Sistema

Il sistema AI Autonomy √® un team di **8 dipendenti AI specializzati** che lavorano autonomamente per il consulente. Ogni dipendente ha un ruolo specifico, analizza dati reali della piattaforma, e genera task (azioni) che possono essere eseguiti automaticamente o previa approvazione del consulente.

**Concetto chiave:** Non √® un singolo bot generico, ma un **team coordinato** dove ogni membro ha competenze diverse e accede a dati diversi.

```
Ogni 30 minuti ‚Üí Il sistema valuta ogni dipendente attivo
                        ‚Üì
              Raccoglie dati specifici per ruolo
                        ‚Üì
              L'AI analizza e suggerisce azioni
                        ‚Üì
              I task vengono creati (auto o con approvazione)
                        ‚Üì
              Il Task Executor esegue le azioni
```

---

### 22.2 Gli 8 Dipendenti AI

| Dipendente | Ruolo | Canale Preferito | Max Task/Ciclo | Cosa Analizza |
|---|---|---|---|---|
| **Alessia** | Voice Consultant | üìû Voce | 2 | Storico consulenze e chiamate ‚Üí identifica clienti che necessitano contatto vocale proattivo |
| **Millie** | Email Writer | üìß Email | 2 | Journey email e engagement ‚Üí crea email personalizzate per nurturing relazionale |
| **Echo** | Summarizer | üìß Email | 2 | Consulenze completate senza riepilogo ‚Üí genera e invia riepiloghi strutturati |
| **Nova** | Social Media Manager | ‚Äì Nessuno | 1 | Calendario contenuti e gap ‚Üí suggerisce post e strategie social (non lavora sui clienti ma sul brand) |
| **Stella** | WhatsApp Assistant | üí¨ WhatsApp | 2 | Conversazioni WhatsApp ‚Üí identifica lead da qualificare e clienti in attesa di risposta |
| **Iris** | Email Hub Manager | üìß Email | 2 | Email in arrivo e ticket ‚Üí identifica comunicazioni che richiedono risposta o escalation |
| **Marco** | Executive Coach | üìû/‚Äì Voce o Nessuno | 2 | Agenda e carico lavoro del consulente ‚Üí coaching operativo e preparazione consulenze |
| **Personalizza** | Assistente Custom | üìûüìßüí¨ Tutti | 3 | Completamente configurabile dal consulente: dati, istruzioni, canali, categorie |

---

### 22.3 Interfaccia Utente ‚Äì Le 4 Schede

#### Scheda 1: Impostazioni (Settings)

**Pannello principale:**

- **Attiva/Disattiva** il sistema con un interruttore globale
- **Livello di Autonomia** (scala 0-10):

| Livello | Comportamento |
|---|---|
| 0 | Sistema completamente spento |
| 1 | Solo analisi, nessun task creato |
| 2-3 | I task vengono creati con stato `waiting_approval` ‚Üí il consulente deve approvarli manualmente |
| 4-7 | I task vengono creati con stato `scheduled` ‚Üí esecuzione automatica |
| 8-10 | Massima autonomia, esecuzione automatica con priorit√† pi√π aggressive |

- **Orari di lavoro**: fascia oraria in cui i dipendenti possono operare (default: 09:00-18:00)
- **Giorni lavorativi**: quali giorni della settimana (default: luned√¨-venerd√¨)
- **Istruzioni personalizzate**: testo libero che viene iniettato nel prompt di TUTTI i dipendenti

**Gestione singoli dipendenti:**
Per ogni dipendente si pu√≤:
- **Attivare/Disattivare** individualmente (toggle on/off)
- **Configurare la frequenza** di analisi (ogni quanto il dipendente si attiva):
  - Valori: 30 min, 1h, 2h, 4h, 8h, 12h, 24h
  - Default: 30 minuti

**Canali attivi:**
Si possono abilitare/disabilitare i canali di comunicazione:
- Voce (chiamate)
- Email
- WhatsApp
- Nessuno (task interni)

Se un canale √® disabilitato, i dipendenti che lo richiedono vengono saltati automaticamente.

**Configurazione "Personalizza":**
Il dipendente "Personalizza" ha una sezione di configurazione dedicata dove il consulente pu√≤:
- Scrivere istruzioni libere per definire cosa deve fare
- Scegliere i canali attivi
- Definire le categorie di task

**Marco ‚Äì Executive Coach (configurazione avanzata):**
Marco ha una sezione speciale con:
- **Obiettivi strategici**: lista di obiettivi che il consulente vuole raggiungere (l'AI li usa come bussola per le analisi)
- **Roadmap/Note strategiche**: testo libero per la direzione strategica
- **Stile report**: sintetico, bilanciato, o dettagliato
- **Focus report**: area specifica su cui concentrare l'analisi
- **Contatti consulente**: telefono, email, WhatsApp per permettere a Marco di contattare direttamente il consulente

#### Scheda 2: Dashboard

Dashboard interattiva con:
- **Pulsante "Simula Analisi"**: esegue una simulazione dry-run di tutti i dipendenti attivi, mostrando:
  - Quali clienti verrebbero analizzati
  - Quali task verrebbero creati (senza crearli realmente)
  - Il ragionamento dell'AI per ogni decisione
  - I dati esatti inviati all'AI
  
- **Pulsante "Genera Task Ora"**: forza l'esecuzione immediata del ciclo di generazione task (invece di aspettare il CRON ogni 30 min)

- **Statistiche**:
  - Task creati oggi/settimana/mese
  - Task per dipendente
  - Task approvati vs rifiutati
  - Tasso di successo per dipendente

#### Scheda 3: Attivit√† (Activity)

Log cronologico di tutte le azioni del sistema:
- Ogni analisi effettuata da ogni dipendente
- Task creati con ragionamento AI
- Task completati/falliti
- Errori e avvisi

Ogni voce del log include:
- Timestamp
- Dipendente che ha agito
- Tipo di evento (analisi, task creato, task completato, errore)
- Descrizione con dettagli
- ID del ciclo (per raggruppare azioni dello stesso ciclo)

**Filtri disponibili:**
- Per dipendente
- Per tipo evento
- Per periodo

#### Scheda 4: Catalogo Dati (Data Catalog)

Mostra la **libreria di task predefiniti** (12 template) organizzati per categoria:
- Ogni template mostra: nome, descrizione, categoria, canale
- Utile per capire che tipo di azioni i dipendenti possono creare

---

### 22.4 Come Funziona il Ciclo Autonomo (ogni 30 minuti)

#### Fase 1: Selezione Consulenti Idonei

Il CRON ogni 30 minuti:
1. Cerca tutti i consulenti con:
   - `autonomy_level >= 2` (livello minimo per la generazione task)
   - `is_active = true`
2. Per ciascuno, verifica:
   - √à dentro l'orario di lavoro configurato? (confronto con fuso orario Europa/Roma)
   - Se fuori orario ‚Üí salta

#### Fase 2: Raccolta Dati Clienti

Per ogni consulente:
1. Carica tutti i **clienti attivi** (max 50)
2. Per ogni cliente, arricchisce i dati con:
   - Data ultima consulenza
   - Data ultimo task AI
3. Identifica i **clienti idonei** escludendo:
   - Clienti con task **gi√† in coda** (scheduled, in_progress, retry_pending, waiting_approval, approved)
   - Clienti con task **completati nelle ultime 24 ore**
4. Raccoglie i **task recenti** (ultimi 7 giorni) per la memoria anti-duplicazione
5. Raccoglie i **blocchi permanenti** (clienti/categorie che il consulente ha vietato)

#### Fase 3: Esecuzione per Ruolo

Per ogni dipendente attivo:

1. **Controllo prerequisiti:**
   - Se il dipendente richiede un canale disabilitato ‚Üí salta
   - Se non ci sono clienti idonei (eccetto Nova e Marco che non necessitano clienti) ‚Üí salta
   - Se la frequenza configurata non √® stata raggiunta (es: ultima esecuzione 15 min fa, frequenza = 30 min) ‚Üí salta

2. **Raccolta dati specifici per ruolo:**
   Ogni dipendente ha la sua funzione `fetchRoleData()` che raccoglie dati diversi:
   - **Alessia**: storico consulenze + chiamate vocali
   - **Millie**: progressi journey email + log email inviate
   - **Echo**: consulenze senza riepilogo + pipeline riepiloghi
   - **Nova**: post pubblicati + idee pendenti
   - **Stella**: conversazioni WhatsApp + messaggi recenti
   - **Iris**: email non lette + ticket aperti
   - **Marco**: agenda prossimi 7gg + carico lavoro + monitoraggio consulenze + obiettivi strategici + eventi Google Calendar
   - **Personalizza**: dati configurati dal consulente

3. **Costruzione prompt AI:**
   - Ogni ruolo ha un `buildPrompt()` dedicato che assembla il contesto
   - Include la **memoria anti-duplicazione**: elenco di task recenti (in coda, completati, cancellati, falliti) per evitare duplicati
   - Include i **blocchi permanenti**: clienti/categorie esplicitamente vietati dal consulente
   - Inietta i **documenti di sistema** (System Prompt Documents) assegnati a quel dipendente
   - Se disponibile, attiva il **File Search** per RAG sui documenti del Cervello AI

4. **Chiamata AI (Gemini):**
   - Modello: Gemini 2.5 Flash Lite (o il modello del provider configurato)
   - Temperatura: 0.3 (bassa per consistenza)
   - Output: JSON strutturato con campo `overall_reasoning` obbligatorio e array `tasks`
   - Retry: fino a 3 tentativi con backoff esponenziale per errori 503/overloaded

5. **Creazione task:**
   - Per ogni task suggerito dall'AI, verifica:
     - L'istruzione non √® vuota
     - Il cliente non ha gi√† task in coda
     - Non √® bloccato da un blocco permanente
   - Crea il record in `ai_scheduled_tasks` con:
     - Status: `scheduled` (se autonomy ‚â• 4) o `waiting_approval` (se autonomy < 4)
     - `origin_type`: `autonomous` (per distinguerlo dai task manuali)
     - `ai_role`: ID del dipendente che l'ha generato
     - `scheduled_at`: calcolato da `computeNextWorkingSlot()` (prossimo slot lavorativo con offset casuale)
   - Registra l'attivit√† nel log

#### Fase 4: Anti-Duplicazione

Il sistema ha un sofisticato meccanismo per prevenire task duplicati:

1. **Memoria task 7 giorni**: Ogni prompt AI include l'elenco completo dei task degli ultimi 7 giorni, categorizzati per:
   - Task gi√† in coda (NON duplicare)
   - Task cancellati dal consulente (NON riproporre)
   - Task completati (evitare ripetizioni simili)
   - Task falliti (valutare se riprovare con approccio diverso)
   - Task di altri ruoli AI (evitare sovrapposizioni)

2. **Blocchi permanenti**: Il consulente pu√≤ creare blocchi per:
   - Un cliente specifico + una categoria specifica + un ruolo specifico
   - Es: "Non far mai chiamare Alessia a Mario per follow-up"

3. **Esclusione pre-AI**: Prima ancora di chiamare l'AI, il sistema esclude:
   - Clienti con task pendenti
   - Clienti contattati nelle ultime 24 ore

---

### 22.5 Il Decision Engine (Motore Decisionale)

Quando un task viene eseguito, il **Decision Engine** (`autonomous-decision-engine.ts`) genera un **piano di esecuzione multi-step**. L'AI analizza il contesto del cliente e decide quali azioni compiere.

**9 tipi di azione disponibili:**

| Azione | Descrizione |
|---|---|
| `fetch_client_data` | Raccoglie dati completi del cliente (consulenze, esercizi, progressi) |
| `search_private_stores` | Cerca nel Cervello AI privato del consulente (File Search/RAG) |
| `web_search` | Effettua una ricerca web per informazioni aggiornate |
| `analyze_patterns` | Analizza pattern nei dati raccolti per identificare trend e insights |
| `generate_report` | Genera un report strutturato con i risultati dell'analisi |
| `send_email` | Invia un'email personalizzata al cliente |
| `send_whatsapp` | Invia un messaggio WhatsApp al cliente |
| `voice_call` | Programma una chiamata vocale AI al cliente |
| `prepare_call` | Prepara il contesto e il briefing per una chiamata |

**Esempio di piano generato per un task "follow-up post-consulenza":**

```
Step 1: fetch_client_data     ‚Üí Raccoglie storico consulenze e progressi
Step 2: search_private_stores ‚Üí Cerca documenti rilevanti nella KB
Step 3: analyze_patterns      ‚Üí Identifica punti chiave e aree di miglioramento
Step 4: prepare_call          ‚Üí Prepara il briefing per la chiamata
Step 5: voice_call            ‚Üí Effettua la chiamata al cliente
```

---

### 22.6 Il Task Executor (Esecutore dei Task)

Il **Task Executor** (`ai-task-executor.ts`) prende il piano dal Decision Engine e lo esegue step-by-step:

1. Per ogni step del piano:
   - Registra l'inizio dell'esecuzione con timestamp
   - Esegue l'azione specifica (es: chiama API, genera testo, invia email)
   - Registra il risultato (successo/errore) con log dettagliato
   - Se uno step fallisce, pu√≤ decidere se continuare o interrompere

2. **Integrazione File Search (RAG):**
   - Quando un step richiede `search_private_stores`, il sistema usa Google File Search per cercare nei documenti del Cervello AI del consulente
   - I risultati vengono iniettati nel contesto degli step successivi

3. **Integrazione chiamate vocali:**
   - Quando un step √® di tipo `voice_call`, il sistema crea automaticamente una entry nella tabella `scheduled_voice_calls`
   - La chiamata viene poi gestita dal sistema di chiamate vocali (Capitolo 21)
   - Lo stato del task e della chiamata restano sincronizzati

---

### 22.7 Sistema di Guardrail (Protezioni)

Il sistema implementa pi√π livelli di protezione per evitare comportamenti indesiderati:

#### Guardrail di Livello 0 (sempre attivi):
- Il sistema deve essere `is_active = true`
- L'autonomia deve essere `‚â• 2` per la generazione
- Nessuna operazione fuori dall'orario di lavoro configurato

#### Guardrail di Livello 1 (anti-spam):
- **Limite giornaliero**: numero massimo di task generabili per giornata (basato su autonomy level)
- **Anti-duplicazione per cliente**: un solo task pendente per cliente alla volta
- **Cooldown 24 ore**: nessun nuovo task per un cliente che ne ha completato uno nelle ultime 24 ore

#### Guardrail di Livello 2 (anti-ripetizione):
- **Memoria 7 giorni**: l'AI conosce tutti i task recenti ed evita ripetizioni
- **Blocchi permanenti**: il consulente pu√≤ vietare specifiche combinazioni cliente/categoria/ruolo
- **Frequenza per ruolo**: ogni dipendente ha una frequenza configurabile (es: ogni 30 min, ogni 4 ore)

#### Guardrail di Livello 3 (canali):
- I canali (voce, email, WhatsApp) possono essere abilitati/disabilitati globalmente
- Se un canale √® disabilitato, tutti i dipendenti che lo richiedono vengono saltati

#### Guardrail di Livello 4 (approvazione):
- Con autonomia < 4: tutti i task richiedono approvazione manuale
- Con autonomia ‚â• 4: i task vengono eseguiti automaticamente
- Il consulente pu√≤ sempre annullare un task prima dell'esecuzione

---

### 22.8 Dettaglio per Dipendente

#### Alessia ‚Äì Voice Consultant üìû
- **Analizza**: Storico consulenze (date, durata, note, trascrizioni) + chiamate vocali precedenti
- **Cerca**: Clienti con consulenza recente ma senza follow-up; clienti non sentiti da >2 settimane; clienti con note che indicano difficolt√†
- **Crea**: Task di tipo chiamata vocale con istruzioni dettagliate (cosa √® stato discusso, punti da toccare, tono, obiettivo)
- **Regola**: Non suggerisce chiamate a clienti gi√† chiamati negli ultimi 3 giorni

#### Millie ‚Äì Email Writer üìß
- **Analizza**: Progressi email journey (giorno corrente, ultimo invio) + log email inviate (aperture, click)
- **Cerca**: Clienti senza email da >7 giorni; journey fermi; clienti che hanno aperto email recenti
- **Crea**: Task email con argomento specifico, tipo (check-in, educativo, motivazionale), tono e punti chiave

#### Echo ‚Äì Summarizer üìß
- **Analizza**: Consulenze completate senza riepilogo + pipeline riepiloghi (quanti mancano di trascrizione, quanti pronti per email)
- **Cerca**: Consulenze con trascrizione/note ma senza summary_email generata
- **Crea**: Task per generare riepiloghi strutturati delle consulenze e inviarli ai clienti
- **Dati aggiuntivi**: Pipeline statistiche (quante completate, quante mancano trascrizione, quante pronte per email)

#### Nova ‚Äì Social Media Manager üé®
- **Analizza**: Post recenti (titolo, piattaforma, stato pubblicazione) + idee pendenti nel content studio
- **Non lavora sui clienti**: Si concentra sul brand del consulente
- **Cerca**: Gap nel calendario editoriale (nessun post da >5 giorni); idee pendenti da sviluppare; trend rilevanti
- **Crea**: Task per creazione contenuti (post, carosello, reel, articolo) con piattaforme target, tema, hook e CTA

#### Stella ‚Äì WhatsApp Assistant üí¨
- **Analizza**: Conversazioni WhatsApp attive (ultimo messaggio, mittente, √® lead, conteggio messaggi, non letti) + messaggi recenti ultimi 7 giorni
- **Cerca**: Conversazioni con messaggi non letti; lead non qualificati; clienti senza messaggi da >5 giorni
- **Crea**: Task WhatsApp con contesto dell'ultima conversazione, tipo messaggio, punti chiave e tono

#### Iris ‚Äì Email Hub Manager üì®
- **Analizza**: Email in arrivo non lette degli ultimi 7 giorni + ticket aperti/pendenti con priorit√† e classificazione AI
- **Cerca**: Email urgenti non lette; ticket con alta priorit√†; comunicazioni che richiedono escalation
- **Crea**: Task per rispondere a email, gestire ticket o segnalare al consulente

#### Marco ‚Äì Executive Coach üéØ
- **Analizza**: Agenda prossimi 7 giorni + carico lavoro (task completati 7/30gg, pendenti) + monitoraggio limiti consulenze mensili + gap schedulazione futura + eventi Google Calendar
- **Focus sul consulente**: Non contatta i clienti ma aiuta il consulente a organizzarsi
- **Pu√≤ contattare il consulente**: Se ha i contatti configurati, pu√≤ chiamare, mandare WhatsApp o email al consulente stesso
- **Cerca**: Consulenze imminenti senza preparazione; pacchetti consulenze esauriti; mesi senza consulenze programmate; troppi task pendenti; gap nell'agenda
- **Crea**: Task di preparazione briefing, monitoraggio, report, scheduling
- **Extra**: Obiettivi strategici come bussola, rispetta stile report preferito (sintetico/dettagliato/bilanciato)

#### Personalizza ‚Äì Assistente Custom ‚öôÔ∏è
- **Completamente configurabile**: Il consulente definisce istruzioni, canali e categorie
- **Analizza**: Consulenze recenti + task recenti + dati configurati
- **Accede a tutti i canali**: voce, email, WhatsApp, nessuno
- **Max 3 task per ciclo**: Il pi√π produttivo del team
- **Dati personalizzati**: usa la configurazione custom definita nelle impostazioni del dipendente

---

### 22.9 Cervello AI e File Search per i Dipendenti

Ogni dipendente AI pu√≤ accedere al Cervello AI del consulente in due modi:

1. **System Prompt Documents (Istruzioni AI)**: Documenti iniettati direttamente nel prompt dell'AI (sempre in memoria)
   - Configurabili dalla pagina Memoria & Documenti ‚Üí tab "Istruzioni AI"
   - Si possono assegnare documenti specifici a dipendenti specifici
   - Tabella `agent_knowledge_assignments`

2. **File Search (RAG)**: Ricerca semantica nei documenti del Cervello AI
   - Attivato automaticamente se il dipendente ha documenti assegnati (tab "Agenti AI")
   - Usa Google File Search per cercare contenuti rilevanti
   - I risultati vengono iniettati nel contesto dell'analisi

---

### 22.10 Simulazione e Debug

Il sistema offre strumenti avanzati per capire cosa farebbero i dipendenti senza effettivamente creare task:

**Modalit√† Simulazione (Dry-Run):**
Accessibile dalla Dashboard, mostra per ogni dipendente:
- Se verrebbe saltato (e perch√©: nessun cliente, canale disabilitato, frequenza non raggiunta)
- Quanti clienti verrebbero analizzati vs quanti sono idonei
- Il prompt completo inviato all'AI
- La risposta grezza dell'AI
- I task che verrebbero creati (con contatto, categoria, istruzione, ragionamento)
- Il provider e modello AI utilizzato

Questo √® utilissimo per:
- Verificare che i dipendenti funzionino correttamente
- Capire perch√© un dipendente non genera task
- Ottimizzare le istruzioni personalizzate

---

### 22.11 Risoluzione Problemi AI Autonomy

| Problema | Causa Probabile | Soluzione |
|---|---|---|
| Nessun task generato | Autonomia < 2 o sistema spento | Verifica livello autonomia ‚â• 2 e che il sistema sia attivo |
| Dipendente non si attiva | Canale richiesto disabilitato | Abilita il canale necessario nelle impostazioni |
| Task sempre "in approvazione" | Autonomia < 4 | Alza il livello di autonomia a 4+ per l'esecuzione automatica |
| Task duplicati | Raro, ma possibile con timing ravvicinato | Il sistema ha anti-duplicazione automatica; verifica la memoria 7 giorni |
| "Nessun cliente idoneo" | Tutti i clienti hanno gi√† task pendenti | Attendi che i task esistenti vengano completati; il sistema si sblocca automaticamente |
| AI risponde con JSON non valido | Problema temporaneo del modello | Il sistema riprova automaticamente (3 tentativi con backoff) |
| Dipendente sbaglia analisi | Istruzioni troppo vaghe | Aggiungi istruzioni personalizzate pi√π dettagliate; usa documenti KB per contesto |
| Marco non chiama il consulente | Contatti non configurati | Configura telefono/email/WhatsApp del consulente nelle impostazioni di Marco |
| Task creato fuori orario | Fuso orario non allineato | Il sistema usa Europa/Roma; verifica le impostazioni orari di lavoro |

---

## Capitolo 23: Integrazione tra i Tre Sistemi

### 23.1 Come Weekly Check-in, Chiamate Vocali e AI Autonomy Collaborano

I tre sistemi non operano in modo isolato ma sono interconnessi:

```
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ  AI AUTONOMY     ‚îÇ
                    ‚îÇ  (8 dipendenti)  ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚ñº             ‚ñº             ‚ñº
     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
     ‚îÇ Chiamate   ‚îÇ  ‚îÇ  Email    ‚îÇ  ‚îÇ WhatsApp ‚îÇ
     ‚îÇ Vocali     ‚îÇ  ‚îÇ  (SMTP)   ‚îÇ  ‚îÇ (Twilio) ‚îÇ
     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ                              ‚îÇ
            ‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚ñº              ‚ñº
     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
     ‚îÇ   Weekly Check-in       ‚îÇ
     ‚îÇ   (WhatsApp automatico) ‚îÇ
     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Flusso esempio: Alessia genera una chiamata**

1. Il CRON autonomo analizza i dati (ogni 30 min)
2. Alessia identifica che Marco non √® stato sentito da 2 settimane
3. Crea un task con `preferred_channel = "voice"` e istruzione dettagliata
4. Il Decision Engine genera un piano multi-step:
   - Step 1: `fetch_client_data` (raccoglie dati Marco)
   - Step 2: `search_private_stores` (cerca info nella KB)
   - Step 3: `prepare_call` (prepara il briefing)
   - Step 4: `voice_call` (crea entry in `scheduled_voice_calls`)
5. Il CRON delle chiamate vocali (ogni minuto) trova la chiamata e la esegue via VPS/FreeSWITCH
6. Gemini gestisce la conversazione in tempo reale
7. A fine chiamata, il callback aggiorna sia `scheduled_voice_calls` che `ai_scheduled_tasks`

**Integrazione Weekly Check-in ‚Üî AI Autonomy:**
- Il Weekly Check-in opera in modo indipendente (CRON dedicato alle 08:00)
- Tuttavia, l'AI Autonomy (tramite Stella) pu√≤ creare task WhatsApp aggiuntivi al di fuori del ciclo settimanale
- Il sistema anti-duplicazione dell'autonomia √® consapevole dei check-in gi√† inviati

### 23.2 Tabella CRON Riepilogativa

| CRON | Frequenza | Orario | Fuso | Funzione |
|---|---|---|---|---|
| Weekly Check-in Scheduling | Giornaliero | 08:00 | Europa/Roma | Pianifica quali clienti contattare oggi |
| Weekly Check-in Processing | Ogni minuto | Sempre | Europa/Roma | Invia i messaggi in coda |
| AI Task Processing | Ogni minuto | Sempre | Europa/Roma | Esegue task e chiamate in coda + cleanup stuck calls |
| Autonomous Generation | Ogni 30 minuti | Sempre (ma verifica orario lavoro) | Europa/Roma | Genera nuovi task con gli 8 dipendenti AI |

### 23.3 File Search Condiviso

Tutti e tre i sistemi possono accedere allo stesso Cervello AI del consulente via File Search:
- **Weekly Check-in**: usa File Search per personalizzare i messaggi con contesto dal Cervello AI
- **Chiamate Vocali**: il prompt della chiamata pu√≤ essere arricchito con info dal Cervello AI
- **AI Autonomy**: ogni dipendente pu√≤ cercare nel Cervello AI durante l'analisi e l'esecuzione dei task

Questo garantisce che ogni comunicazione ‚Äì sia un messaggio WhatsApp, una chiamata o un'email ‚Äì sia **contestualizzata** con le informazioni pi√π aggiornate del consulente.

---

# FINE DEL MANUALE

**Versione:** 3.0 Espansa ‚Äì Funzionalit√† Avanzate
**Data:** Febbraio 2026
**Autore:** Sistema AI + Team Piattaforma

---

*Per ulteriori domande, usa l'AI Assistant disponibile in ogni pagina della piattaforma.*
